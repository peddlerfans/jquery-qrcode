/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(_,r,u){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function F(t,e){return t(e={exports:{}},e.exports),e.exports}function k(t){return t&&t.Math==Math&&t}function n(t){try{return!!t()}catch(t){return!0}}function U(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function G(t){return et?ct(t):function(){return it.apply(t,arguments)}}function o(t){return at(ut(t),8,-1)}function e(t){if("Function"===o(t))return G(t)}function V(t){if(pt(t))throw ht("Can't call method on "+t);return t}function $(t){return lt(V(t))}function i(t,e){return arguments.length<2?(n=m[t],p(n)?n:void 0):m[t]&&m[t][e];var n}function B(t){return Lt(V(t))}function H(t){return"Symbol("+(void 0===t?"":t)+")_"+It(++At+Mt,36)}function c(t){var e;return S(Dt,t)&&(mt||"string"==typeof Dt[t])||(e="Symbol."+t,mt&&S(E,t)?Dt[t]=E[t]:Dt[t]=(gt&&Nt?Nt:_t)(e)),Dt[t]}function z(t){return t=function(t,e){if(!h(t)||wt(t))return t;var n=Ot(t,kt);if(n){if(n=g(n,t,e=void 0===e?"default":e),!h(n)||wt(n))return n;throw Ft("Can't convert object to primitive value")}return Pt(t,e=void 0===e?"number":e)}(t,"string"),wt(t)?t:t+""}function W(t){return Gt?Ut.createElement(t):{}}function q(t,e,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:e;if(p(n)&&ae(n,i,r),r.global)o?t[e]=n:xt(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:Qt.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t}function K(t){return ye(t.length)}function J(u){return function(t,e,n){var r,o=$(t),i=K(o),c=function(t,e){t=pe(t);return t<0?he(t+e,0):de(t,e)}(n,i);if(u&&e!=e){for(;c<i;)if((r=o[c++])!=r)return!0}else for(;c<i;c++)if((u||c in o)&&o[c]===e)return u||c||0;return!u&&-1}}function X(t,e){return(t=Pe[Te(t)])==xe||t!=Ce&&(p(e)?n(e):!!e)}function a(t,e){var n,r,o,i=t.target,c=t.global,u=t.stat,a=c?m:u?m[i]||xt(i,{}):(m[i]||{}).prototype;if(a)for(n in e){if(r=e[n],o=t.dontCallGetSet?(o=Re(a,n))&&o.value:a[n],!Le(c?n:i+(u?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;for(var s=r,f=o,l=y=v=d=h=p=void 0,p=je(f),h=Qt.f,d=Bt.f,v=0;v<p.length;v++){var y=p[v];S(s,y)||l&&S(l,y)||h(s,y,d(f,y))}}(t.sham||o&&o.sham)&&Zt(r,"sham",!0),q(a,n,r,t)}}function Y(t){if("Symbol"===De(t))throw TypeError("Cannot convert a Symbol value to a string");return Ne(t)}var Q,Z,s,f,tt,m=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof t&&t)||function(){return this}()||Function("return this")(),l=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),et=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),nt=Function.prototype.call,g=et?nt.bind(nt):function(){return nt.apply(nt,arguments)},t={}.propertyIsEnumerable,rt=Object.getOwnPropertyDescriptor,ot={f:rt&&!t.call({1:2},1)?function(t){t=rt(this,t);return!!t&&t.enumerable}:t},t=Function.prototype,it=t.call,ct=et&&t.bind.bind(it,it),ut=G({}.toString),at=G("".slice),st=Object,ft=e("".split),lt=n(function(){return!st("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?ft(t,""):st(t)}:st,pt=function(t){return null==t},ht=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},dt=t.all,p=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===dt}:function(t){return"function"==typeof t},vt=t.all,h=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:p(t)||t===vt}:function(t){return"object"==typeof t?null!==t:p(t)},yt=e({}.isPrototypeOf),t=i("navigator","userAgent")||"",d=m.process,v=m.Deno,d=d&&d.versions||v&&v.version,v=d&&d.v8,y=T=!(T=v?0<(j=v.split("."))[0]&&j[0]<4?1:+(j[0]+j[1]):T)&&t&&(!(j=t.match(/Edge\/(\d+)/))||74<=j[1])&&(j=t.match(/Chrome\/(\d+)/))?+j[1]:T,mt=!!Object.getOwnPropertySymbols&&!n(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&y&&y<41}),gt=mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,bt=Object,wt=gt?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return p(e)&&yt(e.prototype,bt(t))},St=String,Et=function(t){try{return St(t)}catch(t){return"Object"}},jt=TypeError,b=function(t){if(p(t))return t;throw jt(Et(t)+" is not a function")},Ot=function(t,e){t=t[e];return pt(t)?void 0:b(t)},Tt=TypeError,Pt=function(t,e){var n,r;if("string"===e&&p(n=t.toString)&&!h(r=g(n,t)))return r;if(p(n=t.valueOf)&&!h(r=g(n,t)))return r;if("string"!==e&&p(n=t.toString)&&!h(r=g(n,t)))return r;throw Tt("Can't convert object to primitive value")},Ct=Object.defineProperty,xt=function(e,n){try{Ct(m,e,{value:n,configurable:!0,writable:!0})}catch(t){m[e]=n}return n},d="__core-js_shared__",w=m[d]||xt(d,{}),v=F(function(t){(t.exports=function(t,e){return w[t]||(w[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),Lt=Object,Rt=e({}.hasOwnProperty),S=Object.hasOwn||function(t,e){return Rt(B(t),e)},At=0,Mt=Math.random(),It=e(1..toString),Dt=v("wks"),E=m.Symbol,Nt=E&&E.for,_t=gt?E:E&&E.withoutSetter||H,Ft=TypeError,kt=c("toPrimitive"),Ut=m.document,Gt=h(Ut)&&h(Ut.createElement),Vt=!l&&!n(function(){return 7!=Object.defineProperty(W("div"),"a",{get:function(){return 7}}).a}),$t=Object.getOwnPropertyDescriptor,Bt={f:l?$t:function(t,e){if(t=$(t),e=z(e),Vt)try{return $t(t,e)}catch(t){}if(S(t,e))return U(!g(ot.f,t,e),t[e])}},j=l&&n(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Ht=String,zt=TypeError,O=function(t){if(h(t))return t;throw zt(Ht(t)+" is not an object")},Wt=TypeError,qt=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,Jt="enumerable",Xt="configurable",Yt="writable",Qt={f:l?j?function(t,e,n){var r;return O(t),e=z(e),O(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Yt in n&&!n[Yt]&&((r=Kt(t,e))&&r[Yt]&&(t[e]=n.value,n={configurable:(Xt in n?n:r)[Xt],enumerable:(Jt in n?n:r)[Jt],writable:!1})),qt(t,e,n)}:qt:function(t,e,n){if(O(t),e=z(e),O(n),Vt)try{return qt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Wt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Zt=l?function(t,e,n){return Qt.f(t,e,U(1,n))}:function(t,e,n){return t[e]=n,t},T=Function.prototype,d=l&&Object.getOwnPropertyDescriptor,j=S(T,"name"),te={EXISTS:j,PROPER:j&&"something"===function(){}.name,CONFIGURABLE:j&&(!l||d(T,"name").configurable)},ee=e(Function.toString),ne=(p(w.inspectSource)||(w.inspectSource=function(t){return ee(t)}),w.inspectSource),j=m.WeakMap,d=p(j)&&/native code/.test(String(j)),T=v("keys"),re={},oe="Object already initialized",ie=m.TypeError,j=m.WeakMap,ce=d||w.state?((s=w.state||(w.state=new j)).get=s.get,s.has=s.has,s.set=s.set,Q=function(t,e){if(s.has(t))throw ie(oe);return e.facade=t,s.set(t,e),e},Z=function(t){return s.get(t)||{}},function(t){return s.has(t)}):(f=T[v="state"]||(T[v]=H(v)),re[f]=!0,Q=function(t,e){if(S(t,f))throw ie(oe);return e.facade=t,Zt(t,f,e),e},Z=function(t){return S(t,f)?t[f]:{}},function(t){return S(t,f)}),ue={set:Q,get:Z,has:ce,enforce:function(t){return ce(t)?Z(t):Q(t,{})},getterFor:function(e){return function(t){if(h(t)&&(t=Z(t)).type===e)return t;throw ie("Incompatible receiver, "+e+" required")}}},ae=F(function(t){var r=te.CONFIGURABLE,o=ue.enforce,e=ue.get,i=Object.defineProperty,c=l&&!n(function(){return 8!==i(function(){},"length",{value:8}).length}),u=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!S(t,"name")||r&&t.name!==e)&&(l?i(t,"name",{value:e,configurable:!0}):t.name=e),c&&n&&S(n,"arity")&&t.length!==n.arity&&i(t,"length",{value:n.arity});try{n&&S(n,"constructor")&&n.constructor?l&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=o(t);return S(n,"source")||(n.source=u.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return p(this)&&e(this).source||ne(this)},"toString")}),se=Math.ceil,fe=Math.floor,le=Math.trunc||function(t){t=+t;return(0<t?fe:se)(t)},pe=function(t){t=+t;return t!=t||0==t?0:le(t)},he=Math.max,de=Math.min,ve=Math.min,ye=function(t){return 0<t?ve(pe(t),9007199254740991):0},me={includes:J(!0),indexOf:J(!1)}.indexOf,ge=e([].push),be=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),we={f:Object.getOwnPropertyNames||function(t){var e,n=be,r=$(t),o=0,i=[];for(e in r)!S(re,e)&&S(r,e)&&ge(i,e);for(;n.length>o;)!S(r,e=n[o++])||~me(i,e)||ge(i,e);return i}},Se={f:Object.getOwnPropertySymbols},Ee=e([].concat),je=i("Reflect","ownKeys")||function(t){var e=we.f(O(t)),n=Se.f;return n?Ee(e,n(t)):e},Oe=/#|\.prototype\./,Te=X.normalize=function(t){return String(t).replace(Oe,".").toLowerCase()},Pe=X.data={},Ce=X.NATIVE="N",xe=X.POLYFILL="P",Le=X,Re=Bt.f,d={},j=(d[c("toStringTag")]="z","[object z]"===String(d)),Ae=c("toStringTag"),Me=Object,Ie="Arguments"==o(function(){return arguments}()),De=j?o:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Me(t),Ae))?e:Ie?o(t):"Object"==(e=o(t))&&p(t.callee)?"Arguments":e},Ne=String,_e=/"/g,Fe=e("".replace);function ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?Ue(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}a({target:"String",proto:!0,forced:(tt="anchor",n(function(){var t=""[tt]('"');return t!==t.toLowerCase()||3<t.split('"').length}))},{anchor:function(t){return n="a",r="name",t=t,e=Y(V(e=this)),o="<"+n,""!==r&&(o+=" "+r+'="'+Fe(Y(t),_e,"&quot;")+'"'),o+">"+e+"</"+n+">";var e,n,r,o}});function Ge(t,e){if(t<e)throw Ze("Not enough arguments");return t}function Ve(i){return tn?function(t,e){var n=2<Ge(arguments.length,1),r=p(t)?t:en(t),o=n?Qe(arguments,2):void 0;return i(n?function(){Ye(r,this,o)}:r,e)}:i}function $e(t,e){return b(t),void 0===e?t:et?un(t,e):function(){return t.apply(e,arguments)}}function Be(){}function He(t){if(!p(t))return!1;try{return fn(Be,sn,t),!0}catch(t){return!1}}function ze(t){if(!p(t))return!1;switch(De(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return hn||!!pn(ln,ne(t))}catch(t){return!0}}function We(t,e){return new(mn(t))(0===e?0:e)}function P(p){var h=1==p,d=2==p,v=3==p,y=4==p,m=6==p,g=7==p,b=5==p||m;return function(t,e,n,r){for(var o,i,c=B(t),u=lt(c),a=$e(e,n),s=K(u),f=0,e=r||We,l=h?e(t,s):d||g?e(t,0):void 0;f<s;f++)if((b||f in u)&&(i=a(o=u[f],f,c),p))if(h)l[f]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return f;case 2:gn(l,o)}else switch(p){case 4:return!1;case 7:gn(l,o)}return m?-1:v||y?y:l}}var qe,Ke,T=Function.prototype,Je=T.apply,Xe=T.call,Ye="object"==typeof Reflect&&Reflect.apply||(et?Xe.bind(Je):function(){return Xe.apply(Je,arguments)}),Qe=e([].slice),Ze=TypeError,tn=/MSIE .\./.test(t),en=m.Function,v={setTimeout:Ve(m.setTimeout),setInterval:Ve(m.setInterval)},d=v.setInterval,T=(a({global:!0,bind:!0,forced:m.setInterval!==d},{setInterval:d}),v.setTimeout),nn=(a({global:!0,bind:!0,forced:m.setTimeout!==T},{setTimeout:T}),Function),rn=e([].concat),on=e([].join),cn={},d=et?nn.bind:function(c){var u=b(this),t=u.prototype,a=Qe(arguments,1),s=function(){var t=rn(a,Qe(arguments));if(this instanceof s){var e=u,n=t.length,r=t;if(!S(cn,n)){for(var o=[],i=0;i<n;i++)o[i]="a["+i+"]";cn[n]=nn("C,a","return new C("+on(o,",")+")")}return cn[n](e,r)}return u.apply(c,t)};return h(t)&&(s.prototype=t),s},un=(a({target:"Function",proto:!0,forced:Function.bind!==d},{bind:d}),e(e.bind)),an=Array.isArray||function(t){return"Array"==o(t)},sn=[],fn=i("Reflect","construct"),ln=/^\s*(?:class|function)\b/,pn=e(ln.exec),hn=!ln.exec(Be),dn=(ze.sham=!0,!fn||n(function(){var t;return He(He.call)||!He(Object)||!He(function(){t=!0})||t})?ze:He),vn=c("species"),yn=Array,mn=function(t){var e;return an(t)&&(e=t.constructor,(dn(e)&&(e===yn||an(e.prototype))||h(e)&&null===(e=e[vn]))&&(e=void 0)),void 0===e?yn:e},gn=e([].push),bn={forEach:P(0),map:P(1),filter:P(2),some:P(3),every:P(4),find:P(5),findIndex:P(6),filterReject:P(7)}.forEach,wn=!!(Ke=[]["forEach"])&&n(function(){Ke.call(null,qe||function(){return 1},1)})?[].forEach:function(t){return bn(this,t,1<arguments.length?arguments[1]:void 0)};a({target:"Array",proto:!0,forced:[].forEach!=wn},{forEach:wn});function Sn(e){if(e&&e.forEach!==wn)try{Zt(e,"forEach",wn)}catch(t){e.forEach=wn}}j||q(Object.prototype,"toString",j?{}.toString:function(){return"[object "+De(this)+"]"},{unsafe:!0});var En,jn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},v=W("span").classList,T=v&&v.constructor&&v.constructor.prototype,d=T===Object.prototype?void 0:T;for(En in jn)jn[En]&&Sn(m[En]&&m[En].prototype);Sn(d);function On(t,e){var n,t=O(t).constructor;if(void 0===t||pt(n=O(t)[An]))return e;if(dn(t=n))return t;throw Rn(Et(t)+" is not a constructor")}var Tn,Pn,C="process"==o(m.process),Cn=String,xn=TypeError,j=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return O(t),function(t){if("object"==typeof t||p(t))return;throw xn("Can't set "+Cn(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),v=Qt.f,T=c("toStringTag"),d=c("species"),Ln=TypeError,Rn=TypeError,An=c("species"),Mn=i("document","documentElement"),x=/(?:ipad|iphone|ipod).*applewebkit/i.test(t),L=m.setImmediate,R=m.clearImmediate,In=m.process,Dn=m.Dispatch,Nn=m.Function,A=m.MessageChannel,_n=m.String,Fn=0,kn={},Un="onreadystatechange";try{Tn=m.location}catch(t){}function Gn(t){return function(){er(t)}}function Vn(t){er(t.data)}function $n(t){m.postMessage(_n(t),Tn.protocol+"//"+Tn.host)}function Bn(){this.head=null,this.tail=null}function Hn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw hr("Bad Promise constructor");n=t,r=e}),this.resolve=b(n),this.reject=b(r)}function zn(t,e){var n,r,o,i,c=e.value,u=e.state==Rr,a=u?t.ok:t.fail,s=t.resolve,f=t.reject,l=t.domain;try{a?(u||(e.rejection===Ir&&(i=e,g(vr,m,function(){var t=i.facade;C?Or.emit("rejectionHandled",t):_r(Lr,t,i.value)})),e.rejection=Mr),!0===a?n=c:(l&&l.enter(),n=a(c),l&&(l.exit(),o=!0)),n===t.promise?f(Er("Promise-chain cycle")):(r=Dr(n))?g(r,n,s,f):s(n)):f(c)}catch(t){l&&!o&&l.exit(),f(t)}}var Wn,M,qn,Kn,Jn,Xn,Yn,Qn,Zn,tr,er=function(t){var e;S(kn,t)&&(e=kn[t],delete kn[t],e())},A=(L&&R||(L=function(t){Ge(arguments.length,1);var e=p(t)?t:Nn(t),n=Qe(arguments,1);return kn[++Fn]=function(){Ye(e,void 0,n)},Pn(Fn),Fn},R=function(t){delete kn[t]},C?Pn=function(t){In.nextTick(Gn(t))}:Dn&&Dn.now?Pn=function(t){Dn.now(Gn(t))}:A&&!x?(I=(A=new A).port2,A.port1.onmessage=Vn,Pn=$e(I.postMessage,I)):m.addEventListener&&p(m.postMessage)&&!m.importScripts&&Tn&&"file:"!==Tn.protocol&&!n($n)?(Pn=$n,m.addEventListener("message",Vn,!1)):Pn=Un in W("script")?function(t){Mn.appendChild(W("script"))[Un]=function(){Mn.removeChild(this),er(t)}}:function(t){setTimeout(Gn(t),0)}),{set:L,clear:R}),I=/ipad|iphone|ipod/i.test(t)&&void 0!==m.Pebble,L=/web0s(?!.*chrome)/i.test(t),R=Bt.f,nr=A.set,t=m.MutationObserver||m.WebKitMutationObserver,rr=m.document,or=m.process,D=m.Promise,R=R(m,"queueMicrotask"),R=R&&R.value,ir=(R||(Wn=function(){var t,e;for(C&&(t=or.domain)&&t.exit();M;){e=M.fn,M=M.next;try{e()}catch(t){throw M?Kn():qn=void 0,t}}qn=void 0,t&&t.enter()},Kn=x||C||L||!t||!rr?!I&&D&&D.resolve?((x=D.resolve(void 0)).constructor=D,Yn=$e(x.then,x),function(){Yn(Wn)}):C?function(){or.nextTick(Wn)}:(nr=$e(nr,m),function(){nr(Wn)}):(Jn=!0,Xn=rr.createTextNode(""),new t(Wn).observe(Xn,{characterData:!0}),function(){Xn.data=Jn=!Jn})),R||function(t){t={fn:t,next:void 0};qn&&(qn.next=t),M||(M=t,Kn()),qn=t}),cr=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},ur=(Bn.prototype={add:function(t){t={item:t,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},Bn),N=m.Promise,ar="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,sr=!ar&&!C&&"object"==typeof window&&"object"==typeof document,fr=(N&&N.prototype,c("species")),lr=!1,pr=p(m.PromiseRejectionEvent),L={CONSTRUCTOR:Le("Promise",function(){var t=ne(N),e=t!==String(N);if(!e&&66===y)return!0;if(!y||y<51||!/native code/.test(t)){var t=new N(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((t.constructor={})[fr]=n,!(lr=t.then(function(){})instanceof n))return!0}return!e&&(sr||ar)&&!pr}),REJECTION_EVENT:pr,SUBCLASSING:lr},hr=TypeError,dr={f:function(t){return new Hn(t)}},vr=A.set,yr="Promise",I=L.CONSTRUCTOR,mr=L.REJECTION_EVENT,D=L.SUBCLASSING,gr=ue.getterFor(yr),br=ue.set,x=N&&N.prototype,wr=N,Sr=x,Er=m.TypeError,jr=m.document,Or=m.process,Tr=dr.f,Pr=Tr,Cr=!!(jr&&jr.createEvent&&m.dispatchEvent),xr="unhandledrejection",Lr="rejectionhandled",Rr=1,Ar=2,Mr=1,Ir=2,Dr=function(t){var e;return!(!h(t)||!p(e=t.then))&&e},Nr=function(n,o){n.notified||(n.notified=!0,ir(function(){for(var t,r,e=n.reactions;t=e.get();)zn(t,n);n.notified=!1,o&&!n.rejection&&(r=n,g(vr,m,function(){var t=r.facade,e=r.value,n=Fr(r);if(n&&(n=cr(function(){C?Or.emit("unhandledRejection",e,t):_r(xr,t,e)}),r.rejection=C||Fr(r)?Ir:Mr,n.error))throw n.value}))}))},_r=function(t,e,n){var r;Cr?((r=jr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),m.dispatchEvent(r)):r={promise:e,reason:n},!mr&&(e=m["on"+t])?e(r):t===xr&&function(t,e){var n=m.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Fr=function(t){return t.rejection!==Mr&&!t.parent},kr=function(e,n,r){return function(t){e(n,t,r)}},Ur=function(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=Ar,Nr(t,!0))},Gr=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw Er("Promise can't be resolved itself");var r=Dr(t);r?ir(function(){var e={done:!1};try{g(r,t,kr(Gr,e,n),kr(Ur,e,n))}catch(t){Ur(e,t,n)}}):(n.value=t,n.state=Rr,Nr(n,!1))}catch(t){Ur({done:!1},t,n)}}};if(I&&(Sr=(wr=function(t){!function(t,e){if(yt(e,t))return;throw Ln("Incorrect invocation")}(this,Sr),b(t),g(Qn,this);var e=gr(this);try{t(kr(Gr,e),kr(Ur,e))}catch(t){Ur(e,t)}}).prototype,(Qn=function(t){br(this,{type:yr,done:!1,notified:!1,parent:!1,reactions:new ur,rejection:!1,state:0,value:void 0})}).prototype=q(Sr,"then",function(t,e){var n=gr(this),r=Tr(On(this,wr));return n.parent=!0,r.ok=!p(t)||t,r.fail=p(e)&&e,r.domain=C?Or.domain:void 0,0==n.state?n.reactions.add(r):ir(function(){zn(r,n)}),r.promise}),Zn=function(){var t=new Qn,e=gr(t);this.promise=t,this.resolve=kr(Gr,e),this.reject=kr(Ur,e)},dr.f=Tr=function(t){return t===wr||void 0===t?new Zn:Pr(t)},p(N)&&x!==Object.prototype)){tr=x.then,D||q(x,"then",function(t,e){var n=this;return new wr(function(t,e){g(tr,n,t,e)}).then(t,e)},{unsafe:!0});try{delete x.constructor}catch(t){}j&&j(x,Sr)}a({global:!0,constructor:!0,wrap:!0,forced:I},{Promise:wr}),t=!(rr=yr),(R=(R=wr)&&!t?R.prototype:R)&&!S(R,T)&&v(R,T,{configurable:!0,value:rr}),A=i(A=yr),D=Qt.f,l&&A&&!A[d]&&D(A,d,{configurable:!0,get:function(){return this}});function Vr(t,e,n){var r,o;O(t);try{if(!(r=Ot(t,"return"))){if("throw"===e)throw n;return}r=g(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;O(r)}function $r(t,e){this.stopped=t,this.result=e}function Br(t,e,n){function r(t){return i&&Vr(i,"normal",t),new $r(!0,t)}function o(t){return p?(O(t),v?y(t[0],t[1],r):y(t[0],t[1])):v?y(t,r):y(t)}var i,c,u,a,s,f,l=n&&n.that,p=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),y=$e(e,l);if(h)i=t.iterator;else if(d)i=t;else{if(!(n=Kr(t)))throw Xr(Et(t)+" is not iterable");if(void 0!==(e=n)&&(Hr.Array===e||Wr[zr]===e)){for(c=0,u=K(t);c<u;c++)if((a=o(t[c]))&&yt(Yr,a))return;return}i=function(t,e){e=arguments.length<2?Kr(t):e;if(b(e))return O(g(e,t));throw Jr(Et(t)+" is not iterable")}(t,n)}for(s=(h?t:i).next;!(f=g(s,i)).done;){try{a=o(f.value)}catch(t){Vr(i,"throw",t)}if("object"==typeof a&&a&&yt(Yr,a))return}}var Hr={},zr=c("iterator"),Wr=Array.prototype,qr=c("iterator"),Kr=function(t){if(!pt(t))return Ot(t,qr)||Ot(t,"@@iterator")||Hr[De(t)]},Jr=TypeError,Xr=TypeError,Yr=$r.prototype,Qr=c("iterator"),Zr=!1;try{var to=0,eo={next:function(){return{done:!!to++}},return:function(){Zr=!0}};eo[Qr]=function(){return this},Array.from(eo,function(){throw 2})}catch(t){}j=L.CONSTRUCTOR||!function(t,e){if(!e&&!Zr)return!1;var n=!1;try{var r={};r[Qr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){N.all(t).then(void 0,function(){})}),a({target:"Promise",stat:!0,forced:j},{all:function(t){var u=this,e=dr.f(u),a=e.resolve,s=e.reject,n=cr(function(){var r=b(u.resolve),o=[],i=0,c=1;Br(t,function(t){var e=i++,n=!1;c++,g(r,u,t).then(function(t){n||(n=!0,o[e]=t,--c||a(o))},s)}),--c||a(o)});return n.error&&s(n.value),e.promise}}),x=L.CONSTRUCTOR,I=N&&N.prototype;a({target:"Promise",proto:!0,forced:x,real:!0},{catch:function(t){return this.then(void 0,t)}}),p(N)&&(t=i("Promise").prototype.catch,I.catch!==t&&q(I,"catch",t,{unsafe:!0})),a({target:"Promise",stat:!0,forced:j},{race:function(t){var n=this,r=dr.f(n),o=r.reject,e=cr(function(){var e=b(n.resolve);Br(t,function(t){g(e,n,t).then(r.resolve,o)})});return e.error&&o(e.value),r.promise}});a({target:"Promise",stat:!0,forced:L.CONSTRUCTOR},{reject:function(t){var e=dr.f(this);return g(e.reject,void 0,t),e.promise}});function no(t){if(9007199254740991<t)throw io("Maximum allowed index exceeded")}function ro(t,e,n){(e=z(e))in t?Qt.f(t,e,U(0,n)):t[e]=n}var oo,v=L.CONSTRUCTOR,io=(i("Promise"),a({target:"Promise",stat:!0,forced:v},{resolve:function(t){return t=t,O(e=this),h(t)&&t.constructor===e?t:((0,(e=dr.f(e)).resolve)(t),e.promise);var e}}),TypeError),co=c("species"),uo=c("isConcatSpreadable"),R=51<=y||!n(function(){var t=[];return t[uo]=!1,t.concat()[0]!==t}),T=(oo="concat",51<=y||!n(function(){var t=[];return(t.constructor={})[co]=function(){return{foo:1}},1!==t[oo](Boolean).foo}));a({target:"Array",proto:!0,arity:1,forced:!R||!T},{concat:function(t){for(var e,n,r,o,i,c=B(this),u=We(c,0),a=0,s=-1,f=arguments.length;s<f;s++)if(i=void 0,!h(o=r=-1===s?c:arguments[s])||(void 0!==(i=o[uo])?!i:!an(o)))no(a+1),ro(u,a++,r);else for(n=K(r),no(a+n),e=0;e<n;e++,a++)e in r&&ro(u,a,r[e]);return u.length=a,u}});rr=u.mvc.View.extend({className:"context-toolbar",eventNamespace:"context-toolbar",events:{"click .tool":"onToolPointerdown"},options:{padding:20,autoClose:!0,vertical:!1,anchor:"top",position:"bottom",scale:1},documentEvents:{mousedown:"onDocumentPointerdown",touchstart:"onDocumentPointerdown"},init:function(){u.util.bindAll(this,"onDocumentPointerdown")},render:function(){var t=this.options,e=this.constructor;return e.opened&&e.close(),t.autoClose&&setTimeout(this.delegateAutoCloseEvents.bind(this),0),t.type&&this.$el.attr("data-type",t.type),this.beforeMount(),this.getRoot().append(this.$el),this.renderContent(),this.position(),this.scale(),e.opened=this},delegateAutoCloseEvents:function(){this.delegateDocumentEvents(),document.addEventListener("mousedown",this.onDocumentPointerdown,!0),document.addEventListener("touchstart",this.onDocumentPointerdown,!0)},undelegateAutoCloseEvents:function(){this.undelegateDocumentEvents(),document.removeEventListener("mousedown",this.onDocumentPointerdown,!0),document.removeEventListener("touchstart",this.onDocumentPointerdown,!0)},beforeMount:function(){this.$el.toggleClass("joint-vertical",!!this.options.vertical)},renderContent:function(){var n=r("<div/>",{class:"tools"});this.options.tools&&u.util.toArray(this.options.tools).forEach(function(t){var e=t.icon?r("<img/>",{src:t.icon}):t.content,e=r("<button/>",{class:"tool",html:e,"data-action":t.action});t.attrs&&e.attr(t.attrs),n.append(e)}),this.$el.append(n)},getRoot:function(){return r(this.options.root||document.documentElement)},position:function(){var t=this.options,e=t.target,n=t.padding,r=t.position,t=t.anchor,o=this.$el,i={x:0,y:0},r=(void 0!==u.V.toNode(e)?(c=u.util.getElementBBox(e),c=u.util.getRectPoint(c,r),i.x=c.x,i.y=c.y,c=u.util.getRectPoint((new u.g.Rect).inflate(n),r),i.x+=c.x,i.y+=c.y):(n=new u.g.Point(e),i.x=n.x,i.y=n.y),o.outerWidth()),c=o.outerHeight(),e=u.util.getRectPoint(new u.g.Rect(0,0,r,c),t),n=(i.x-=e.x,i.y-=e.y,u.util.getElementBBox(this.getRoot()));i.x-=n.x,i.y-=n.y,o.css({left:i.x,top:i.y})},scale:function(){var t=this.options,e=t.scale,t=t.anchor;e&&(this.el.style.transform="scale(".concat(e,", ").concat(e,")"),"corner"===(e=u.util.toKebabCase(t).split("-"))[0]&&(e[0]="bottom",e[1]="right"),"origin"===e[0]&&(e[0]="top",e[1]="left"),"middle"===e[1]&&(e[1]=null),this.el.style.transformOrigin="".concat(e[0]," ").concat(e[1]||""))},onRemove:function(){this.undelegateAutoCloseEvents(),this.constructor.opened=void 0},onToolPointerdown:function(t){var e=r(t.currentTarget).attr("data-action");e&&this.trigger("action:"+e,t)},onDocumentPointerdown:function(t){var e=this.el,n=this.options.target,t=t.target;if(void 0!==u.V.toNode(n)){n=ke(r(n),1)[0];if(!n||n===t||n.contains(t))return}e.contains(t)||e===t||this.constructor.close()}},{opened:void 0,close:function(){this.opened&&(this.opened.trigger("close"),this.opened.remove(),this.opened=void 0)},update:function(){this.opened&&this.opened.position()}}).extend({className:"popup",eventNamespace:"popup",events:{},beforeMount:function(){var t=this.options,e=t.anchor,t=t.arrowPosition;this.$el.removeClass("left right top bottom top-left top-right bottom-left bottom-right"),t?this.$el.addClass("none"===t?"":t):this.$el.addClass("center"===e?"":e)},renderContent:function(){var t=this.options,e=t.content,n=t.arrowPosition,t=t.anchor,e=u.util.isFunction(e)?e(this.el):e;e&&this.$el.html(e),"none"===n&&"center"!==t||((e=document.createElement("div")).classList.add("popup-arrow"),(n=document.createElement("div")).classList.add("popup-arrow-mask"),this.el.append(e,n))}});_.Popup=rr}(this.joint.ui=this.joint.ui||{},$,joint);