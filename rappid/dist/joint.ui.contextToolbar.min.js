/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(_,r,u){"use strict";function F(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?k(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function U(t,e){return t(e={exports:{}},e.exports),e.exports}function G(t){return t&&t.Math==Math&&t}function n(t){try{return!!t()}catch(t){return!0}}function V(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function B(t){return ft?vt(t):function(){return dt.apply(t,arguments)}}function o(t){return mt(yt(t),8,-1)}function e(t){if("Function"===o(t))return B(t)}function H(t){if(St(t))throw jt("Can't call method on "+t);return t}function z(t){return wt(H(t))}function i(t,e){return arguments.length<2?(n=m[t],h(n)?n:void 0):m[t]&&m[t][e];var n}function $(t){return kt(H(t))}function W(t){return"Symbol("+(void 0===t?"":t)+")_"+Bt(++Gt+Vt,36)}function c(t){var e;return j(Ht,t)&&(Pt||"string"==typeof Ht[t])||(e="Symbol."+t,Pt&&j(E,t)?Ht[t]=E[t]:Ht[t]=(Ct&&zt?zt:$t)(e)),Ht[t]}function q(t){return t=function(t,e){if(!d(t)||Lt(t))return t;var n=Mt(t,qt);if(n){if(n=g(n,t,e=void 0===e?"default":e),!d(n)||Lt(n))return n;throw Wt("Can't convert object to primitive value")}return Nt(t,e=void 0===e?"number":e)}(t,"string"),Lt(t)?t:t+""}function K(t){return Jt?Kt.createElement(t):{}}function J(t,e,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:e;if(h(n)&&me(n,i,r),r.global)o?t[e]=n:Ft(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:ue.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t}function X(t){return Te(t.length)}function Y(u){return function(t,e,n){var r,o=z(t),i=X(o),c=function(t,e){t=Se(t);return t<0?je(t+e,0):Ee(t,e)}(n,i);if(u&&e!=e){for(;c<i;)if((r=o[c++])!=r)return!0}else for(;c<i;c++)if((u||c in o)&&o[c]===e)return u||c||0;return!u&&-1}}function Q(t,e){return(t=Ne[De(t)])==Fe||t!=_e&&(h(e)?n(e):!!e)}function a(t,e){var n,r,o,i=t.target,c=t.global,u=t.stat,a=c?m:u?m[i]||Ft(i,{}):(m[i]||{}).prototype;if(a)for(n in e){if(r=e[n],o=t.dontCallGetSet?(o=Ue(a,n))&&o.value:a[n],!ke(c?n:i+(u?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;for(var s=r,f=o,l=y=v=d=h=p=void 0,p=Ie(f),h=ue.f,d=Qt.f,v=0;v<p.length;v++){var y=p[v];j(s,y)||l&&j(l,y)||h(s,y,d(f,y))}}(t.sham||o&&o.sham)&&ae(r,"sham",!0),J(a,n,r,t)}}function Z(t,e){if(t<e)throw ze("Not enough arguments");return t}function tt(i){return $e?function(t,e){var n=2<Z(arguments.length,1),r=h(t)?t:We(t),o=n?He(arguments,2):void 0;return i(n?function(){Be(r,this,o)}:r,e)}:i}function et(t,e){return w(t),void 0===e?t:ft?Ye(t,e):function(){return t.apply(e,arguments)}}function nt(){}function rt(t){if(!h(t))return!1;try{return on(nt,rn,t),!0}catch(t){return!1}}function ot(t){if(!h(t))return!1;switch(nn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return an||!!un(cn,le(t))}catch(t){return!0}}function it(t,e){return new(pn(t))(0===e?0:e)}function s(p){var h=1==p,d=2==p,v=3==p,y=4==p,m=6==p,g=7==p,b=5==p||m;return function(t,e,n,r){for(var o,i,c=$(t),u=wt(c),a=et(e,n),s=X(u),f=0,e=r||it,l=h?e(t,s):d||g?e(t,0):void 0;f<s;f++)if((b||f in u)&&(i=a(o=u[f],f,c),p))if(h)l[f]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return f;case 2:hn(l,o)}else switch(p){case 4:return!1;case 7:hn(l,o)}return m?-1:v||y?y:l}}var ct,ut,f,l,at,st,m=G("object"==typeof globalThis&&globalThis)||G("object"==typeof window&&window)||G("object"==typeof self&&self)||G("object"==typeof t&&t)||function(){return this}()||Function("return this")(),p=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),ft=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),lt=Function.prototype.call,g=ft?lt.bind(lt):function(){return lt.apply(lt,arguments)},t={}.propertyIsEnumerable,pt=Object.getOwnPropertyDescriptor,ht={f:pt&&!t.call({1:2},1)?function(t){t=pt(this,t);return!!t&&t.enumerable}:t},t=Function.prototype,dt=t.call,vt=ft&&t.bind.bind(dt,dt),yt=B({}.toString),mt=B("".slice),gt=Object,bt=e("".split),wt=n(function(){return!gt("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?bt(t,""):gt(t)}:gt,St=function(t){return null==t},jt=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},Et=t.all,h=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===Et}:function(t){return"function"==typeof t},Ot=t.all,d=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:h(t)||t===Ot}:function(t){return"object"==typeof t?null!==t:h(t)},Tt=e({}.isPrototypeOf),t=i("navigator","userAgent")||"",v=m.process,y=m.Deno,v=v&&v.versions||y&&y.version,y=v&&v.v8,b=P=!(P=y?0<(O=y.split("."))[0]&&O[0]<4?1:+(O[0]+O[1]):P)&&t&&(!(O=t.match(/Edge\/(\d+)/))||74<=O[1])&&(O=t.match(/Chrome\/(\d+)/))?+O[1]:P,Pt=!!Object.getOwnPropertySymbols&&!n(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&b&&b<41}),Ct=Pt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,xt=Object,Lt=Ct?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return h(e)&&Tt(e.prototype,xt(t))},Rt=String,At=function(t){try{return Rt(t)}catch(t){return"Object"}},It=TypeError,w=function(t){if(h(t))return t;throw It(At(t)+" is not a function")},Mt=function(t,e){t=t[e];return St(t)?void 0:w(t)},Dt=TypeError,Nt=function(t,e){var n,r;if("string"===e&&h(n=t.toString)&&!d(r=g(n,t)))return r;if(h(n=t.valueOf)&&!d(r=g(n,t)))return r;if("string"!==e&&h(n=t.toString)&&!d(r=g(n,t)))return r;throw Dt("Can't convert object to primitive value")},_t=Object.defineProperty,Ft=function(e,n){try{_t(m,e,{value:n,configurable:!0,writable:!0})}catch(t){m[e]=n}return n},v="__core-js_shared__",S=m[v]||Ft(v,{}),y=U(function(t){(t.exports=function(t,e){return S[t]||(S[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),kt=Object,Ut=e({}.hasOwnProperty),j=Object.hasOwn||function(t,e){return Ut($(t),e)},Gt=0,Vt=Math.random(),Bt=e(1..toString),Ht=y("wks"),E=m.Symbol,zt=E&&E.for,$t=Ct?E:E&&E.withoutSetter||W,Wt=TypeError,qt=c("toPrimitive"),Kt=m.document,Jt=d(Kt)&&d(Kt.createElement),Xt=!p&&!n(function(){return 7!=Object.defineProperty(K("div"),"a",{get:function(){return 7}}).a}),Yt=Object.getOwnPropertyDescriptor,Qt={f:p?Yt:function(t,e){if(t=z(t),e=q(e),Xt)try{return Yt(t,e)}catch(t){}if(j(t,e))return V(!g(ht.f,t,e),t[e])}},O=p&&n(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Zt=String,te=TypeError,T=function(t){if(d(t))return t;throw te(Zt(t)+" is not an object")},ee=TypeError,ne=Object.defineProperty,re=Object.getOwnPropertyDescriptor,oe="enumerable",ie="configurable",ce="writable",ue={f:p?O?function(t,e,n){var r;return T(t),e=q(e),T(n),"function"==typeof t&&"prototype"===e&&"value"in n&&ce in n&&!n[ce]&&((r=re(t,e))&&r[ce]&&(t[e]=n.value,n={configurable:(ie in n?n:r)[ie],enumerable:(oe in n?n:r)[oe],writable:!1})),ne(t,e,n)}:ne:function(t,e,n){if(T(t),e=q(e),T(n),Xt)try{return ne(t,e,n)}catch(t){}if("get"in n||"set"in n)throw ee("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ae=p?function(t,e,n){return ue.f(t,e,V(1,n))}:function(t,e,n){return t[e]=n,t},P=Function.prototype,v=p&&Object.getOwnPropertyDescriptor,O=j(P,"name"),se={EXISTS:O,PROPER:O&&"something"===function(){}.name,CONFIGURABLE:O&&(!p||v(P,"name").configurable)},fe=e(Function.toString),le=(h(S.inspectSource)||(S.inspectSource=function(t){return fe(t)}),S.inspectSource),O=m.WeakMap,v=h(O)&&/native code/.test(String(O)),P=y("keys"),pe={},he="Object already initialized",de=m.TypeError,O=m.WeakMap,ve=v||S.state?((f=S.state||(S.state=new O)).get=f.get,f.has=f.has,f.set=f.set,ct=function(t,e){if(f.has(t))throw de(he);return e.facade=t,f.set(t,e),e},ut=function(t){return f.get(t)||{}},function(t){return f.has(t)}):(l=P[y="state"]||(P[y]=W(y)),pe[l]=!0,ct=function(t,e){if(j(t,l))throw de(he);return e.facade=t,ae(t,l,e),e},ut=function(t){return j(t,l)?t[l]:{}},function(t){return j(t,l)}),ye={set:ct,get:ut,has:ve,enforce:function(t){return ve(t)?ut(t):ct(t,{})},getterFor:function(e){return function(t){if(d(t)&&(t=ut(t)).type===e)return t;throw de("Incompatible receiver, "+e+" required")}}},me=U(function(t){var r=se.CONFIGURABLE,o=ye.enforce,e=ye.get,i=Object.defineProperty,c=p&&!n(function(){return 8!==i(function(){},"length",{value:8}).length}),u=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!j(t,"name")||r&&t.name!==e)&&(p?i(t,"name",{value:e,configurable:!0}):t.name=e),c&&n&&j(n,"arity")&&t.length!==n.arity&&i(t,"length",{value:n.arity});try{n&&j(n,"constructor")&&n.constructor?p&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=o(t);return j(n,"source")||(n.source=u.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return h(this)&&e(this).source||le(this)},"toString")}),ge=Math.ceil,be=Math.floor,we=Math.trunc||function(t){t=+t;return(0<t?be:ge)(t)},Se=function(t){t=+t;return t!=t||0==t?0:we(t)},je=Math.max,Ee=Math.min,Oe=Math.min,Te=function(t){return 0<t?Oe(Se(t),9007199254740991):0},Pe={includes:Y(!0),indexOf:Y(!1)}.indexOf,Ce=e([].push),xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),Le={f:Object.getOwnPropertyNames||function(t){var e,n=xe,r=z(t),o=0,i=[];for(e in r)!j(pe,e)&&j(r,e)&&Ce(i,e);for(;n.length>o;)!j(r,e=n[o++])||~Pe(i,e)||Ce(i,e);return i}},Re={f:Object.getOwnPropertySymbols},Ae=e([].concat),Ie=i("Reflect","ownKeys")||function(t){var e=Le.f(T(t)),n=Re.f;return n?Ae(e,n(t)):e},Me=/#|\.prototype\./,De=Q.normalize=function(t){return String(t).replace(Me,".").toLowerCase()},Ne=Q.data={},_e=Q.NATIVE="N",Fe=Q.POLYFILL="P",ke=Q,Ue=Qt.f,v=Function.prototype,Ge=v.apply,Ve=v.call,Be="object"==typeof Reflect&&Reflect.apply||(ft?Ve.bind(Ge):function(){return Ve.apply(Ge,arguments)}),He=e([].slice),ze=TypeError,$e=/MSIE .\./.test(t),We=m.Function,O={setTimeout:tt(m.setTimeout),setInterval:tt(m.setInterval)},P=O.setInterval,y=(a({global:!0,bind:!0,forced:m.setInterval!==P},{setInterval:P}),O.setTimeout),qe=(a({global:!0,bind:!0,forced:m.setTimeout!==y},{setTimeout:y}),Function),Ke=e([].concat),Je=e([].join),Xe={},v=ft?qe.bind:function(c){var u=w(this),t=u.prototype,a=He(arguments,1),s=function(){var t=Ke(a,He(arguments));if(this instanceof s){var e=u,n=t.length,r=t;if(!j(Xe,n)){for(var o=[],i=0;i<n;i++)o[i]="a["+i+"]";Xe[n]=qe("C,a","return new C("+Je(o,",")+")")}return Xe[n](e,r)}return u.apply(c,t)};return d(t)&&(s.prototype=t),s},Ye=(a({target:"Function",proto:!0,forced:Function.bind!==v},{bind:v}),e(e.bind)),Qe=Array.isArray||function(t){return"Array"==o(t)},P={},O=(P[c("toStringTag")]="z","[object z]"===String(P)),Ze=c("toStringTag"),tn=Object,en="Arguments"==o(function(){return arguments}()),nn=O?o:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=tn(t),Ze))?e:en?o(t):"Object"==(e=o(t))&&h(t.callee)?"Arguments":e},rn=[],on=i("Reflect","construct"),cn=/^\s*(?:class|function)\b/,un=e(cn.exec),an=!cn.exec(nt),sn=(ot.sham=!0,!on||n(function(){var t;return rt(rt.call)||!rt(Object)||!rt(function(){t=!0})||t})?ot:rt),fn=c("species"),ln=Array,pn=function(t){var e;return Qe(t)&&(e=t.constructor,(sn(e)&&(e===ln||Qe(e.prototype))||d(e)&&null===(e=e[fn]))&&(e=void 0)),void 0===e?ln:e},hn=e([].push),dn={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}.forEach,vn=!!(st=[]["forEach"])&&n(function(){st.call(null,at||function(){return 1},1)})?[].forEach:function(t){return dn(this,t,1<arguments.length?arguments[1]:void 0)};a({target:"Array",proto:!0,forced:[].forEach!=vn},{forEach:vn});function yn(e){if(e&&e.forEach!==vn)try{ae(e,"forEach",vn)}catch(t){e.forEach=vn}}O||J(Object.prototype,"toString",O?{}.toString:function(){return"[object "+nn(this)+"]"},{unsafe:!0});var mn,gn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},y=K("span").classList,v=y&&y.constructor&&y.constructor.prototype,P=v===Object.prototype?void 0:v;for(mn in gn)gn[mn]&&yn(m[mn]&&m[mn].prototype);yn(P);function bn(t,e){var n,t=T(t).constructor;if(void 0===t||St(n=T(t)[Pn]))return e;if(sn(t=n))return t;throw Tn(At(t)+" is not a constructor")}var wn,Sn,C="process"==o(m.process),jn=String,En=TypeError,O=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return T(t),function(t){if("object"==typeof t||h(t))return;throw En("Can't set "+jn(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),y=ue.f,v=c("toStringTag"),P=c("species"),On=TypeError,Tn=TypeError,Pn=c("species"),Cn=i("document","documentElement"),x=/(?:ipad|iphone|ipod).*applewebkit/i.test(t),L=m.setImmediate,R=m.clearImmediate,xn=m.process,Ln=m.Dispatch,Rn=m.Function,A=m.MessageChannel,An=m.String,In=0,Mn={},Dn="onreadystatechange";try{wn=m.location}catch(t){}function Nn(t){return function(){Xn(t)}}function _n(t){Xn(t.data)}function Fn(t){m.postMessage(An(t),wn.protocol+"//"+wn.host)}function kn(){this.head=null,this.tail=null}function Un(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw ar("Bad Promise constructor");n=t,r=e}),this.resolve=w(n),this.reject=w(r)}function Gn(t,e){var n,r,o,i,c=e.value,u=e.state==Tr,a=u?t.ok:t.fail,s=t.resolve,f=t.reject,l=t.domain;try{a?(u||(e.rejection===xr&&(i=e,g(fr,m,function(){var t=i.facade;C?br.emit("rejectionHandled",t):Ar(Or,t,i.value)})),e.rejection=Cr),!0===a?n=c:(l&&l.enter(),n=a(c),l&&(l.exit(),o=!0)),n===t.promise?f(mr("Promise-chain cycle")):(r=Lr(n))?g(r,n,s,f):s(n)):f(c)}catch(t){l&&!o&&l.exit(),f(t)}}var Vn,I,Bn,Hn,zn,$n,Wn,qn,Kn,Jn,Xn=function(t){var e;j(Mn,t)&&(e=Mn[t],delete Mn[t],e())},A=(L&&R||(L=function(t){Z(arguments.length,1);var e=h(t)?t:Rn(t),n=He(arguments,1);return Mn[++In]=function(){Be(e,void 0,n)},Sn(In),In},R=function(t){delete Mn[t]},C?Sn=function(t){xn.nextTick(Nn(t))}:Ln&&Ln.now?Sn=function(t){Ln.now(Nn(t))}:A&&!x?(M=(A=new A).port2,A.port1.onmessage=_n,Sn=et(M.postMessage,M)):m.addEventListener&&h(m.postMessage)&&!m.importScripts&&wn&&"file:"!==wn.protocol&&!n(Fn)?(Sn=Fn,m.addEventListener("message",_n,!1)):Sn=Dn in K("script")?function(t){Cn.appendChild(K("script"))[Dn]=function(){Cn.removeChild(this),Xn(t)}}:function(t){setTimeout(Nn(t),0)}),{set:L,clear:R}),M=/ipad|iphone|ipod/i.test(t)&&void 0!==m.Pebble,L=/web0s(?!.*chrome)/i.test(t),R=Qt.f,Yn=A.set,t=m.MutationObserver||m.WebKitMutationObserver,Qn=m.document,Zn=m.process,D=m.Promise,R=R(m,"queueMicrotask"),R=R&&R.value,tr=(R||(Vn=function(){var t,e;for(C&&(t=Zn.domain)&&t.exit();I;){e=I.fn,I=I.next;try{e()}catch(t){throw I?Hn():Bn=void 0,t}}Bn=void 0,t&&t.enter()},Hn=x||C||L||!t||!Qn?!M&&D&&D.resolve?((x=D.resolve(void 0)).constructor=D,Wn=et(x.then,x),function(){Wn(Vn)}):C?function(){Zn.nextTick(Vn)}:(Yn=et(Yn,m),function(){Yn(Vn)}):(zn=!0,$n=Qn.createTextNode(""),new t(Vn).observe($n,{characterData:!0}),function(){$n.data=zn=!zn})),R||function(t){t={fn:t,next:void 0};Bn&&(Bn.next=t),I||(I=t,Hn()),Bn=t}),er=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},nr=(kn.prototype={add:function(t){t={item:t,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},kn),N=m.Promise,rr="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,or=!rr&&!C&&"object"==typeof window&&"object"==typeof document,ir=(N&&N.prototype,c("species")),cr=!1,ur=h(m.PromiseRejectionEvent),L={CONSTRUCTOR:ke("Promise",function(){var t=le(N),e=t!==String(N);if(!e&&66===b)return!0;if(!b||b<51||!/native code/.test(t)){var t=new N(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((t.constructor={})[ir]=n,!(cr=t.then(function(){})instanceof n))return!0}return!e&&(or||rr)&&!ur}),REJECTION_EVENT:ur,SUBCLASSING:cr},ar=TypeError,sr={f:function(t){return new Un(t)}},fr=A.set,lr="Promise",M=L.CONSTRUCTOR,pr=L.REJECTION_EVENT,D=L.SUBCLASSING,hr=ye.getterFor(lr),dr=ye.set,x=N&&N.prototype,vr=N,yr=x,mr=m.TypeError,gr=m.document,br=m.process,wr=sr.f,Sr=wr,jr=!!(gr&&gr.createEvent&&m.dispatchEvent),Er="unhandledrejection",Or="rejectionhandled",Tr=1,Pr=2,Cr=1,xr=2,Lr=function(t){var e;return!(!d(t)||!h(e=t.then))&&e},Rr=function(n,o){n.notified||(n.notified=!0,tr(function(){for(var t,r,e=n.reactions;t=e.get();)Gn(t,n);n.notified=!1,o&&!n.rejection&&(r=n,g(fr,m,function(){var t=r.facade,e=r.value,n=Ir(r);if(n&&(n=er(function(){C?br.emit("unhandledRejection",e,t):Ar(Er,t,e)}),r.rejection=C||Ir(r)?xr:Cr,n.error))throw n.value}))}))},Ar=function(t,e,n){var r;jr?((r=gr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),m.dispatchEvent(r)):r={promise:e,reason:n},!pr&&(e=m["on"+t])?e(r):t===Er&&function(t,e){var n=m.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Ir=function(t){return t.rejection!==Cr&&!t.parent},Mr=function(e,n,r){return function(t){e(n,t,r)}},Dr=function(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=Pr,Rr(t,!0))},Nr=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw mr("Promise can't be resolved itself");var r=Lr(t);r?tr(function(){var e={done:!1};try{g(r,t,Mr(Nr,e,n),Mr(Dr,e,n))}catch(t){Dr(e,t,n)}}):(n.value=t,n.state=Tr,Rr(n,!1))}catch(t){Dr({done:!1},t,n)}}};if(M&&(yr=(vr=function(t){!function(t,e){if(Tt(e,t))return;throw On("Incorrect invocation")}(this,yr),w(t),g(qn,this);var e=hr(this);try{t(Mr(Nr,e),Mr(Dr,e))}catch(t){Dr(e,t)}}).prototype,(qn=function(t){dr(this,{type:lr,done:!1,notified:!1,parent:!1,reactions:new nr,rejection:!1,state:0,value:void 0})}).prototype=J(yr,"then",function(t,e){var n=hr(this),r=wr(bn(this,vr));return n.parent=!0,r.ok=!h(t)||t,r.fail=h(e)&&e,r.domain=C?br.domain:void 0,0==n.state?n.reactions.add(r):tr(function(){Gn(r,n)}),r.promise}),Kn=function(){var t=new qn,e=hr(t);this.promise=t,this.resolve=Mr(Nr,e),this.reject=Mr(Dr,e)},sr.f=wr=function(t){return t===vr||void 0===t?new Kn:Sr(t)},h(N)&&x!==Object.prototype)){Jn=x.then,D||J(x,"then",function(t,e){var n=this;return new vr(function(t,e){g(Jn,n,t,e)}).then(t,e)},{unsafe:!0});try{delete x.constructor}catch(t){}O&&O(x,yr)}a({global:!0,constructor:!0,wrap:!0,forced:M},{Promise:vr}),t=!(Qn=lr),(R=(R=vr)&&!t?R.prototype:R)&&!j(R,v)&&y(R,v,{configurable:!0,value:Qn}),A=i(A=lr),D=ue.f,p&&A&&!A[P]&&D(A,P,{configurable:!0,get:function(){return this}});function _r(t,e,n){var r,o;T(t);try{if(!(r=Mt(t,"return"))){if("throw"===e)throw n;return}r=g(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;T(r)}function Fr(t,e){this.stopped=t,this.result=e}function kr(t,e,n){function r(t){return i&&_r(i,"normal",t),new Fr(!0,t)}function o(t){return p?(T(t),v?y(t[0],t[1],r):y(t[0],t[1])):v?y(t,r):y(t)}var i,c,u,a,s,f,l=n&&n.that,p=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),y=et(e,l);if(h)i=t.iterator;else if(d)i=t;else{if(!(n=Hr(t)))throw $r(At(t)+" is not iterable");if(void 0!==(e=n)&&(Ur.Array===e||Vr[Gr]===e)){for(c=0,u=X(t);c<u;c++)if((a=o(t[c]))&&Tt(Wr,a))return;return}i=function(t,e){e=arguments.length<2?Hr(t):e;if(w(e))return T(g(e,t));throw zr(At(t)+" is not iterable")}(t,n)}for(s=(h?t:i).next;!(f=g(s,i)).done;){try{a=o(f.value)}catch(t){_r(i,"throw",t)}if("object"==typeof a&&a&&Tt(Wr,a))return}}var Ur={},Gr=c("iterator"),Vr=Array.prototype,Br=c("iterator"),Hr=function(t){if(!St(t))return Mt(t,Br)||Mt(t,"@@iterator")||Ur[nn(t)]},zr=TypeError,$r=TypeError,Wr=Fr.prototype,qr=c("iterator"),Kr=!1;try{var Jr=0,Xr={next:function(){return{done:!!Jr++}},return:function(){Kr=!0}};Xr[qr]=function(){return this},Array.from(Xr,function(){throw 2})}catch(t){}O=L.CONSTRUCTOR||!function(t,e){if(!e&&!Kr)return!1;var n=!1;try{var r={};r[qr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){N.all(t).then(void 0,function(){})}),a({target:"Promise",stat:!0,forced:O},{all:function(t){var u=this,e=sr.f(u),a=e.resolve,s=e.reject,n=er(function(){var r=w(u.resolve),o=[],i=0,c=1;kr(t,function(t){var e=i++,n=!1;c++,g(r,u,t).then(function(t){n||(n=!0,o[e]=t,--c||a(o))},s)}),--c||a(o)});return n.error&&s(n.value),e.promise}}),x=L.CONSTRUCTOR,M=N&&N.prototype;a({target:"Promise",proto:!0,forced:x,real:!0},{catch:function(t){return this.then(void 0,t)}}),h(N)&&(t=i("Promise").prototype.catch,M.catch!==t&&J(M,"catch",t,{unsafe:!0})),a({target:"Promise",stat:!0,forced:O},{race:function(t){var n=this,r=sr.f(n),o=r.reject,e=er(function(){var e=w(n.resolve);kr(t,function(t){g(e,n,t).then(r.resolve,o)})});return e.error&&o(e.value),r.promise}});a({target:"Promise",stat:!0,forced:L.CONSTRUCTOR},{reject:function(t){var e=sr.f(this);return g(e.reject,void 0,t),e.promise}});function Yr(t){if("Symbol"===nn(t))throw TypeError("Cannot convert a Symbol value to a string");return no(t)}function Qr(t){if(9007199254740991<t)throw io("Maximum allowed index exceeded")}function Zr(t,e,n){(e=q(e))in t?ue.f(t,e,V(0,n)):t[e]=n}var to,eo,y=L.CONSTRUCTOR,no=(i("Promise"),a({target:"Promise",stat:!0,forced:y},{resolve:function(t){return t=t,T(e=this),d(t)&&t.constructor===e?t:((0,(e=sr.f(e)).resolve)(t),e.promise);var e}}),String),ro=/"/g,oo=e("".replace),io=(a({target:"String",proto:!0,forced:(to="anchor",n(function(){var t=""[to]('"');return t!==t.toLowerCase()||3<t.split('"').length}))},{anchor:function(t){return n="a",r="name",t=t,e=Yr(H(e=this)),o="<"+n,""!==r&&(o+=" "+r+'="'+oo(Yr(t),ro,"&quot;")+'"'),o+">"+e+"</"+n+">";var e,n,r,o}}),TypeError),co=c("species"),uo=c("isConcatSpreadable"),R=51<=b||!n(function(){var t=[];return t[uo]=!1,t.concat()[0]!==t}),v=(eo="concat",51<=b||!n(function(){var t=[];return(t.constructor={})[co]=function(){return{foo:1}},1!==t[eo](Boolean).foo})),Qn=(a({target:"Array",proto:!0,arity:1,forced:!R||!v},{concat:function(t){for(var e,n,r,o,i,c=$(this),u=it(c,0),a=0,s=-1,f=arguments.length;s<f;s++)if(i=void 0,!d(o=r=-1===s?c:arguments[s])||(void 0!==(i=o[uo])?!i:!Qe(o)))Qr(a+1),Zr(u,a++,r);else for(n=X(r),Qr(a+n),e=0;e<n;e++,a++)e in r&&Zr(u,a,r[e]);return u.length=a,u}}),u.mvc.View.extend({className:"context-toolbar",eventNamespace:"context-toolbar",events:{"click .tool":"onToolPointerdown"},options:{padding:20,autoClose:!0,vertical:!1,anchor:"top",position:"bottom",scale:1},documentEvents:{mousedown:"onDocumentPointerdown",touchstart:"onDocumentPointerdown"},init:function(){u.util.bindAll(this,"onDocumentPointerdown")},render:function(){var t=this.options,e=this.constructor;return e.opened&&e.close(),t.autoClose&&setTimeout(this.delegateAutoCloseEvents.bind(this),0),t.type&&this.$el.attr("data-type",t.type),this.beforeMount(),this.getRoot().append(this.$el),this.renderContent(),this.position(),this.scale(),e.opened=this},delegateAutoCloseEvents:function(){this.delegateDocumentEvents(),document.addEventListener("mousedown",this.onDocumentPointerdown,!0),document.addEventListener("touchstart",this.onDocumentPointerdown,!0)},undelegateAutoCloseEvents:function(){this.undelegateDocumentEvents(),document.removeEventListener("mousedown",this.onDocumentPointerdown,!0),document.removeEventListener("touchstart",this.onDocumentPointerdown,!0)},beforeMount:function(){this.$el.toggleClass("joint-vertical",!!this.options.vertical)},renderContent:function(){var n=r("<div/>",{class:"tools"});this.options.tools&&u.util.toArray(this.options.tools).forEach(function(t){var e=t.icon?r("<img/>",{src:t.icon}):t.content,e=r("<button/>",{class:"tool",html:e,"data-action":t.action});t.attrs&&e.attr(t.attrs),n.append(e)}),this.$el.append(n)},getRoot:function(){return r(this.options.root||document.documentElement)},position:function(){var t=this.options,e=t.target,n=t.padding,r=t.position,t=t.anchor,o=this.$el,i={x:0,y:0},r=(void 0!==u.V.toNode(e)?(c=u.util.getElementBBox(e),c=u.util.getRectPoint(c,r),i.x=c.x,i.y=c.y,c=u.util.getRectPoint((new u.g.Rect).inflate(n),r),i.x+=c.x,i.y+=c.y):(n=new u.g.Point(e),i.x=n.x,i.y=n.y),o.outerWidth()),c=o.outerHeight(),e=u.util.getRectPoint(new u.g.Rect(0,0,r,c),t),n=(i.x-=e.x,i.y-=e.y,u.util.getElementBBox(this.getRoot()));i.x-=n.x,i.y-=n.y,o.css({left:i.x,top:i.y})},scale:function(){var t=this.options,e=t.scale,t=t.anchor;e&&(this.el.style.transform="scale(".concat(e,", ").concat(e,")"),"corner"===(e=u.util.toKebabCase(t).split("-"))[0]&&(e[0]="bottom",e[1]="right"),"origin"===e[0]&&(e[0]="top",e[1]="left"),"middle"===e[1]&&(e[1]=null),this.el.style.transformOrigin="".concat(e[0]," ").concat(e[1]||""))},onRemove:function(){this.undelegateAutoCloseEvents(),this.constructor.opened=void 0},onToolPointerdown:function(t){var e=r(t.currentTarget).attr("data-action");e&&this.trigger("action:"+e,t)},onDocumentPointerdown:function(t){var e=this.el,n=this.options.target,t=t.target;if(void 0!==u.V.toNode(n)){n=F(r(n),1)[0];if(!n||n===t||n.contains(t))return}e.contains(t)||e===t||this.constructor.close()}},{opened:void 0,close:function(){this.opened&&(this.opened.trigger("close"),this.opened.remove(),this.opened=void 0)},update:function(){this.opened&&this.opened.position()}}));_.ContextToolbar=Qn}(this.joint.ui=this.joint.ui||{},$,joint);