/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(_,l,p){"use strict";l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function F(t,e){return t(e={exports:{}},e.exports),e.exports}function k(t){return t&&t.Math==Math&&t}function s(t){try{return!!t()}catch(t){return!0}}function H(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function $(t){return ct?lt(t):function(){return ft.apply(t,arguments)}}function e(t){if("Function"===f(t))return $(t)}function V(t){if(gt(t))throw bt("Can't call method on "+t);return t}function G(t){return yt(V(t))}function n(t,e){return arguments.length<2?(n=g[t],d(n)?n:void 0):g[t]&&g[t][e];var n}function U(t){return Nt(V(t))}function W(t){return"Symbol("+(void 0===t?"":t)+")_"+Ht(++Ft+kt,36)}function r(t){var e;return O($t,t)&&(jt||"string"==typeof $t[t])||(e="Symbol."+t,jt&&O(w,t)?$t[t]=w[t]:$t[t]=(Et&&Vt?Vt:Gt)(e)),$t[t]}function B(t){return t=function(t,e){if(!h(t)||Ct(t))return t;var n=Lt(t,Wt);if(n){if(n=b(n,t,e=void 0===e?"default":e),!h(n)||Ct(n))return n;throw Ut("Can't convert object to primitive value")}return It(t,e=void 0===e?"number":e)}(t,"string"),Ct(t)?t:t+""}function z(t){return ae[t]||(ae[t]=W(t))}function q(t,e,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:e;if(d(n)&&ve(n,i,r),r.global)o?t[e]=n:Dt(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:T.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t}function J(t){return je(t.length)}function K(u){return function(t,e,n){var r,o=G(t),i=J(o),c=function(t,e){t=me(t);return t<0?Se(t+e,0):Oe(t,e)}(n,i);if(u&&e!=e){for(;c<i;)if((r=o[c++])!=r)return!0}else for(;c<i;c++)if((u||c in o)&&o[c]===e)return u||c||0;return!u&&-1}}function X(t,e){var n,r=G(t),o=0,i=[];for(n in r)!O(fe,n)&&O(r,n)&&Te(i,n);for(;e.length>o;)!O(r,n=e[o++])||~Ee(i,n)||Te(i,n);return i}function Y(t,e){return(t=De[Me(t)])==_e||t!=Ne&&(d(e)?s(e):!!e)}function o(t,e){var n,r,o,i=t.target,c=t.global,u=t.stat,s=c?g:u?g[i]||Dt(i,{}):(g[i]||{}).prototype;if(s)for(n in e){if(r=e[n],o=t.dontCallGetSet?(o=ke(s,n))&&o.value:s[n],!Fe(c?n:i+(u?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;for(var a=r,f=o,l=y=v=h=d=p=void 0,p=Re(f),d=T.f,h=Xt.f,v=0;v<p.length;v++){var y=p[v];O(a,y)||l&&O(l,y)||d(a,y,h(f,y))}}(t.sham||o&&o.sham)&&ie(r,"sham",!0),q(s,n,r,t)}}function Q(t,e){return m(t),void 0===e?t:ct?He(t,e):function(){return t.apply(e,arguments)}}function Z(){}function tt(t){if(!d(t))return!1;try{return ze(Z,Be,t),!0}catch(t){return!1}}function et(t){if(!d(t))return!1;switch(We(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ke||!!Je(qe,se(t))}catch(t){return!0}}function nt(t,e){return new(Ze(t))(0===e?0:e)}function i(p){var d=1==p,h=2==p,v=3==p,y=4==p,g=6==p,b=7==p,m=5==p||g;return function(t,e,n,r){for(var o,i,c=U(t),u=yt(c),s=Q(e,n),a=J(u),f=0,e=r||nt,l=d?e(t,a):h||b?e(t,0):void 0;f<a;f++)if((m||f in u)&&(i=s(o=u[f],f,c),p))if(d)l[f]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return f;case 2:tn(l,o)}else switch(p){case 4:return!1;case 7:tn(l,o)}return g?-1:v||y?y:l}}function rt(e){return 51<=wt||!s(function(){var t=[];return(t.constructor={})[en]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var ot,it,c,u,g=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof t&&t)||function(){return this}()||Function("return this")(),a=!s(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),ct=!s(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),ut=Function.prototype.call,b=ct?ut.bind(ut):function(){return ut.apply(ut,arguments)},t={}.propertyIsEnumerable,st=Object.getOwnPropertyDescriptor,at={f:st&&!t.call({1:2},1)?function(t){t=st(this,t);return!!t&&t.enumerable}:t},t=Function.prototype,ft=t.call,lt=ct&&t.bind.bind(ft,ft),pt=$({}.toString),dt=$("".slice),f=function(t){return dt(pt(t),8,-1)},ht=Object,vt=e("".split),yt=s(function(){return!ht("z").propertyIsEnumerable(0)})?function(t){return"String"==f(t)?vt(t,""):ht(t)}:ht,gt=function(t){return null==t},bt=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},mt=t.all,d=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===mt}:function(t){return"function"==typeof t},St=t.all,h=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:d(t)||t===St}:function(t){return"object"==typeof t?null!==t:d(t)},Ot=e({}.isPrototypeOf),t=n("navigator","userAgent")||"",v=g.process,y=g.Deno,v=v&&v.versions||y&&y.version,y=v&&v.v8,wt=C=!(C=y?0<(j=y.split("."))[0]&&j[0]<4?1:+(j[0]+j[1]):C)&&t&&(!(j=t.match(/Edge\/(\d+)/))||74<=j[1])&&(j=t.match(/Chrome\/(\d+)/))?+j[1]:C,jt=!!Object.getOwnPropertySymbols&&!s(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&wt&&wt<41}),Et=jt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Tt=Object,Ct=Et?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return d(e)&&Ot(e.prototype,Tt(t))},Pt=String,At=function(t){try{return Pt(t)}catch(t){return"Object"}},xt=TypeError,m=function(t){if(d(t))return t;throw xt(At(t)+" is not a function")},Lt=function(t,e){t=t[e];return gt(t)?void 0:m(t)},Rt=TypeError,It=function(t,e){var n,r;if("string"===e&&d(n=t.toString)&&!h(r=b(n,t)))return r;if(d(n=t.valueOf)&&!h(r=b(n,t)))return r;if("string"!==e&&d(n=t.toString)&&!h(r=b(n,t)))return r;throw Rt("Can't convert object to primitive value")},Mt=Object.defineProperty,Dt=function(e,n){try{Mt(g,e,{value:n,configurable:!0,writable:!0})}catch(t){g[e]=n}return n},v="__core-js_shared__",S=g[v]||Dt(v,{}),y=F(function(t){(t.exports=function(t,e){return S[t]||(S[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),Nt=Object,_t=e({}.hasOwnProperty),O=Object.hasOwn||function(t,e){return _t(U(t),e)},Ft=0,kt=Math.random(),Ht=e(1..toString),$t=y("wks"),w=g.Symbol,Vt=w&&w.for,Gt=Et?w:w&&w.withoutSetter||W,Ut=TypeError,Wt=r("toPrimitive"),Bt=g.document,zt=h(Bt)&&h(Bt.createElement),qt=function(t){return zt?Bt.createElement(t):{}},Jt=!a&&!s(function(){return 7!=Object.defineProperty(qt("div"),"a",{get:function(){return 7}}).a}),Kt=Object.getOwnPropertyDescriptor,Xt={f:a?Kt:function(t,e){if(t=G(t),e=B(e),Jt)try{return Kt(t,e)}catch(t){}if(O(t,e))return H(!b(at.f,t,e),t[e])}},j=a&&s(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Yt=String,Qt=TypeError,E=function(t){if(h(t))return t;throw Qt(Yt(t)+" is not an object")},Zt=TypeError,te=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,ne="enumerable",re="configurable",oe="writable",T={f:a?j?function(t,e,n){var r;return E(t),e=B(e),E(n),"function"==typeof t&&"prototype"===e&&"value"in n&&oe in n&&!n[oe]&&((r=ee(t,e))&&r[oe]&&(t[e]=n.value,n={configurable:(re in n?n:r)[re],enumerable:(ne in n?n:r)[ne],writable:!1})),te(t,e,n)}:te:function(t,e,n){if(E(t),e=B(e),E(n),Jt)try{return te(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Zt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ie=a?function(t,e,n){return T.f(t,e,H(1,n))}:function(t,e,n){return t[e]=n,t},C=Function.prototype,v=a&&Object.getOwnPropertyDescriptor,P=O(C,"name"),ce={EXISTS:P,PROPER:P&&"something"===function(){}.name,CONFIGURABLE:P&&(!a||v(C,"name").configurable)},ue=e(Function.toString),se=(d(S.inspectSource)||(S.inspectSource=function(t){return ue(t)}),S.inspectSource),P=g.WeakMap,v=d(P)&&/native code/.test(String(P)),ae=y("keys"),fe={},le="Object already initialized",pe=g.TypeError,C=g.WeakMap,de=v||S.state?((c=S.state||(S.state=new C)).get=c.get,c.has=c.has,c.set=c.set,ot=function(t,e){if(c.has(t))throw pe(le);return e.facade=t,c.set(t,e),e},it=function(t){return c.get(t)||{}},function(t){return c.has(t)}):(u=z("state"),fe[u]=!0,ot=function(t,e){if(O(t,u))throw pe(le);return e.facade=t,ie(t,u,e),e},it=function(t){return O(t,u)?t[u]:{}},function(t){return O(t,u)}),he={set:ot,get:it,has:de,enforce:function(t){return de(t)?it(t):ot(t,{})},getterFor:function(e){return function(t){if(h(t)&&(t=it(t)).type===e)return t;throw pe("Incompatible receiver, "+e+" required")}}},ve=F(function(t){var r=ce.CONFIGURABLE,o=he.enforce,e=he.get,i=Object.defineProperty,c=a&&!s(function(){return 8!==i(function(){},"length",{value:8}).length}),u=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!O(t,"name")||r&&t.name!==e)&&(a?i(t,"name",{value:e,configurable:!0}):t.name=e),c&&n&&O(n,"arity")&&t.length!==n.arity&&i(t,"length",{value:n.arity});try{n&&O(n,"constructor")&&n.constructor?a&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=o(t);return O(n,"source")||(n.source=u.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return d(this)&&e(this).source||se(this)},"toString")}),ye=Math.ceil,ge=Math.floor,be=Math.trunc||function(t){t=+t;return(0<t?ge:ye)(t)},me=function(t){t=+t;return t!=t||0==t?0:be(t)},Se=Math.max,Oe=Math.min,we=Math.min,je=function(t){return 0<t?we(me(t),9007199254740991):0},P={includes:K(!0),indexOf:K(!1)},Ee=P.indexOf,Te=e([].push),Ce=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Pe=Ce.concat("length","prototype"),Ae={f:Object.getOwnPropertyNames||function(t){return X(t,Pe)}},xe={f:Object.getOwnPropertySymbols},Le=e([].concat),Re=n("Reflect","ownKeys")||function(t){var e=Ae.f(E(t)),n=xe.f;return n?Le(e,n(t)):e},Ie=/#|\.prototype\./,Me=Y.normalize=function(t){return String(t).replace(Ie,".").toLowerCase()},De=Y.data={},Ne=Y.NATIVE="N",_e=Y.POLYFILL="P",Fe=Y,ke=Xt.f,He=e(e.bind),$e=Array.isArray||function(t){return"Array"==f(t)},y={},v=(y[r("toStringTag")]="z","[object z]"===String(y)),Ve=r("toStringTag"),Ge=Object,Ue="Arguments"==f(function(){return arguments}()),We=v?f:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Ge(t),Ve))?e:Ue?f(t):"Object"==(e=f(t))&&d(t.callee)?"Arguments":e},Be=[],ze=n("Reflect","construct"),qe=/^\s*(?:class|function)\b/,Je=e(qe.exec),Ke=!qe.exec(Z),Xe=(et.sham=!0,!ze||s(function(){var t;return tt(tt.call)||!tt(Object)||!tt(function(){t=!0})||t})?et:tt),Ye=r("species"),Qe=Array,Ze=function(t){var e;return $e(t)&&(e=t.constructor,(Xe(e)&&(e===Qe||$e(e.prototype))||h(e)&&null===(e=e[Ye]))&&(e=void 0)),void 0===e?Qe:e},tn=e([].push),C={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6),filterReject:i(7)},en=r("species"),nn=C.filter;o({target:"Array",proto:!0,forced:!rt("filter")},{filter:function(t){return nn(this,t,1<arguments.length?arguments[1]:void 0)}});function rn(t,e){var n,t=E(t).constructor;if(void 0===t||gt(n=E(t)[dn]))return e;if(Xe(t=n))return t;throw pn(At(t)+" is not a constructor")}v||q(Object.prototype,"toString",v?{}.toString:function(){return"[object "+We(this)+"]"},{unsafe:!0});var on,cn,A="process"==f(g.process),un=String,sn=TypeError,y=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return E(t),function(t){if("object"==typeof t||d(t))return;throw sn("Can't set "+un(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),v=T.f,an=r("toStringTag"),fn=r("species"),ln=TypeError,pn=TypeError,dn=r("species"),x=Function.prototype,hn=x.apply,vn=x.call,yn="object"==typeof Reflect&&Reflect.apply||(ct?vn.bind(hn):function(){return vn.apply(hn,arguments)}),gn=n("document","documentElement"),bn=e([].slice),mn=TypeError,x=/(?:ipad|iphone|ipod).*applewebkit/i.test(t),L=g.setImmediate,R=g.clearImmediate,Sn=g.process,On=g.Dispatch,wn=g.Function,I=g.MessageChannel,jn=g.String,En=0,Tn={},Cn="onreadystatechange";try{on=g.location}catch(t){}function Pn(t){return function(){Un(t)}}function An(t){Un(t.data)}function xn(t){g.postMessage(jn(t),on.protocol+"//"+on.host)}function Ln(){this.head=null,this.tail=null}function Rn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw er("Bad Promise constructor");n=t,r=e}),this.resolve=m(n),this.reject=m(r)}function In(t,e){var n,r,o,i,c=e.value,u=e.state==br,s=u?t.ok:t.fail,a=t.resolve,f=t.reject,l=t.domain;try{s?(u||(e.rejection===Or&&(i=e,b(rr,g,function(){var t=i.facade;A?pr.emit("rejectionHandled",t):Er(gr,t,i.value)})),e.rejection=Sr),!0===s?n=c:(l&&l.enter(),n=s(c),l&&(l.exit(),o=!0)),n===t.promise?f(fr("Promise-chain cycle")):(r=wr(n))?b(r,n,a,f):a(n)):f(c)}catch(t){l&&!o&&l.exit(),f(t)}}var Mn,Dn,Nn,_n,Fn,kn,Hn,$n,Vn,Gn,Un=function(t){var e;O(Tn,t)&&(e=Tn[t],delete Tn[t],e())},I=(L&&R||(L=function(t){var e=arguments.length,n=1;if(e<n)throw mn("Not enough arguments");var r=d(t)?t:wn(t),o=bn(arguments,1);return Tn[++En]=function(){yn(r,void 0,o)},cn(En),En},R=function(t){delete Tn[t]},A?cn=function(t){Sn.nextTick(Pn(t))}:On&&On.now?cn=function(t){On.now(Pn(t))}:I&&!x?(M=(I=new I).port2,I.port1.onmessage=An,cn=Q(M.postMessage,M)):g.addEventListener&&d(g.postMessage)&&!g.importScripts&&on&&"file:"!==on.protocol&&!s(xn)?(cn=xn,g.addEventListener("message",An,!1)):cn=Cn in qt("script")?function(t){gn.appendChild(qt("script"))[Cn]=function(){gn.removeChild(this),Un(t)}}:function(t){setTimeout(Pn(t),0)}),{set:L,clear:R}),M=/ipad|iphone|ipod/i.test(t)&&void 0!==g.Pebble,L=/web0s(?!.*chrome)/i.test(t),R=Xt.f,Wn=I.set,t=g.MutationObserver||g.WebKitMutationObserver,Bn=g.document,zn=g.process,D=g.Promise,R=R(g,"queueMicrotask"),R=R&&R.value,qn=(R||(Mn=function(){var t,e;for(A&&(t=zn.domain)&&t.exit();Dn;){e=Dn.fn,Dn=Dn.next;try{e()}catch(t){throw Dn?_n():Nn=void 0,t}}Nn=void 0,t&&t.enter()},_n=x||A||L||!t||!Bn?!M&&D&&D.resolve?((x=D.resolve(void 0)).constructor=D,Hn=Q(x.then,x),function(){Hn(Mn)}):A?function(){zn.nextTick(Mn)}:(Wn=Q(Wn,g),function(){Wn(Mn)}):(Fn=!0,kn=Bn.createTextNode(""),new t(Mn).observe(kn,{characterData:!0}),function(){kn.data=Fn=!Fn})),R||function(t){t={fn:t,next:void 0};Nn&&(Nn.next=t),Dn||(Dn=t,_n()),Nn=t}),Jn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Kn=(Ln.prototype={add:function(t){t={item:t,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},Ln),N=g.Promise,Xn="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Yn=!Xn&&!A&&"object"==typeof window&&"object"==typeof document,Qn=(N&&N.prototype,r("species")),Zn=!1,tr=d(g.PromiseRejectionEvent),L={CONSTRUCTOR:Fe("Promise",function(){var t=se(N),e=t!==String(N);if(!e&&66===wt)return!0;if(!wt||wt<51||!/native code/.test(t)){var t=new N(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((t.constructor={})[Qn]=n,!(Zn=t.then(function(){})instanceof n))return!0}return!e&&(Yn||Xn)&&!tr}),REJECTION_EVENT:tr,SUBCLASSING:Zn},er=TypeError,nr={f:function(t){return new Rn(t)}},rr=I.set,or="Promise",M=L.CONSTRUCTOR,ir=L.REJECTION_EVENT,D=L.SUBCLASSING,cr=he.getterFor(or),ur=he.set,x=N&&N.prototype,sr=N,ar=x,fr=g.TypeError,lr=g.document,pr=g.process,dr=nr.f,hr=dr,vr=!!(lr&&lr.createEvent&&g.dispatchEvent),yr="unhandledrejection",gr="rejectionhandled",br=1,mr=2,Sr=1,Or=2,wr=function(t){var e;return!(!h(t)||!d(e=t.then))&&e},jr=function(n,o){n.notified||(n.notified=!0,qn(function(){for(var t,r,e=n.reactions;t=e.get();)In(t,n);n.notified=!1,o&&!n.rejection&&(r=n,b(rr,g,function(){var t=r.facade,e=r.value,n=Tr(r);if(n&&(n=Jn(function(){A?pr.emit("unhandledRejection",e,t):Er(yr,t,e)}),r.rejection=A||Tr(r)?Or:Sr,n.error))throw n.value}))}))},Er=function(t,e,n){var r;vr?((r=lr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),g.dispatchEvent(r)):r={promise:e,reason:n},!ir&&(e=g["on"+t])?e(r):t===yr&&function(t,e){var n=g.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Tr=function(t){return t.rejection!==Sr&&!t.parent},Cr=function(e,n,r){return function(t){e(n,t,r)}},Pr=function(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=mr,jr(t,!0))},Ar=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw fr("Promise can't be resolved itself");var r=wr(t);r?qn(function(){var e={done:!1};try{b(r,t,Cr(Ar,e,n),Cr(Pr,e,n))}catch(t){Pr(e,t,n)}}):(n.value=t,n.state=br,jr(n,!1))}catch(t){Pr({done:!1},t,n)}}};if(M&&(ar=(sr=function(t){!function(t,e){if(Ot(e,t))return;throw ln("Incorrect invocation")}(this,ar),m(t),b($n,this);var e=cr(this);try{t(Cr(Ar,e),Cr(Pr,e))}catch(t){Pr(e,t)}}).prototype,($n=function(t){ur(this,{type:or,done:!1,notified:!1,parent:!1,reactions:new Kn,rejection:!1,state:0,value:void 0})}).prototype=q(ar,"then",function(t,e){var n=cr(this),r=dr(rn(this,sr));return n.parent=!0,r.ok=!d(t)||t,r.fail=d(e)&&e,r.domain=A?pr.domain:void 0,0==n.state?n.reactions.add(r):qn(function(){In(r,n)}),r.promise}),Vn=function(){var t=new $n,e=cr(t);this.promise=t,this.resolve=Cr(Ar,e),this.reject=Cr(Pr,e)},nr.f=dr=function(t){return t===sr||void 0===t?new Vn:hr(t)},d(N)&&x!==Object.prototype)){Gn=x.then,D||q(x,"then",function(t,e){var n=this;return new sr(function(t,e){b(Gn,n,t,e)}).then(t,e)},{unsafe:!0});try{delete x.constructor}catch(t){}y&&y(x,ar)}o({global:!0,constructor:!0,wrap:!0,forced:M},{Promise:sr}),t=!(Bn=or),(R=(R=sr)&&!t?R.prototype:R)&&!O(R,an)&&v(R,an,{configurable:!0,value:Bn}),I=n(I=or),D=T.f,a&&I&&!I[fn]&&D(I,fn,{configurable:!0,get:function(){return this}});function xr(t,e,n){var r,o;E(t);try{if(!(r=Lt(t,"return"))){if("throw"===e)throw n;return}r=b(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;E(r)}function Lr(t,e){this.stopped=t,this.result=e}function Rr(t,e,n){function r(t){return i&&xr(i,"normal",t),new Lr(!0,t)}function o(t){return p?(E(t),v?y(t[0],t[1],r):y(t[0],t[1])):v?y(t,r):y(t)}var i,c,u,s,a,f,l=n&&n.that,p=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_RECORD),h=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),y=Q(e,l);if(d)i=t.iterator;else if(h)i=t;else{if(!(n=_r(t)))throw kr(At(t)+" is not iterable");if(void 0!==(e=n)&&(Ir.Array===e||Dr[Mr]===e)){for(c=0,u=J(t);c<u;c++)if((s=o(t[c]))&&Ot(Hr,s))return;return}i=function(t,e){e=arguments.length<2?_r(t):e;if(m(e))return E(b(e,t));throw Fr(At(t)+" is not iterable")}(t,n)}for(a=(d?t:i).next;!(f=b(a,i)).done;){try{s=o(f.value)}catch(t){xr(i,"throw",t)}if("object"==typeof s&&s&&Ot(Hr,s))return}}var Ir={},Mr=r("iterator"),Dr=Array.prototype,Nr=r("iterator"),_r=function(t){if(!gt(t))return Lt(t,Nr)||Lt(t,"@@iterator")||Ir[We(t)]},Fr=TypeError,kr=TypeError,Hr=Lr.prototype,$r=r("iterator"),Vr=!1;try{var Gr=0,Ur={next:function(){return{done:!!Gr++}},return:function(){Vr=!0}};Ur[$r]=function(){return this},Array.from(Ur,function(){throw 2})}catch(t){}y=L.CONSTRUCTOR||!function(t,e){if(!e&&!Vr)return!1;var n=!1;try{var r={};r[$r]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){N.all(t).then(void 0,function(){})}),o({target:"Promise",stat:!0,forced:y},{all:function(t){var u=this,e=nr.f(u),s=e.resolve,a=e.reject,n=Jn(function(){var r=m(u.resolve),o=[],i=0,c=1;Rr(t,function(t){var e=i++,n=!1;c++,b(r,u,t).then(function(t){n||(n=!0,o[e]=t,--c||s(o))},a)}),--c||s(o)});return n.error&&a(n.value),e.promise}}),x=L.CONSTRUCTOR,M=N&&N.prototype;o({target:"Promise",proto:!0,forced:x,real:!0},{catch:function(t){return this.then(void 0,t)}}),d(N)&&(t=n("Promise").prototype.catch,M.catch!==t&&q(M,"catch",t,{unsafe:!0})),o({target:"Promise",stat:!0,forced:y},{race:function(t){var n=this,r=nr.f(n),o=r.reject,e=Jn(function(){var e=m(n.resolve);Rr(t,function(t){b(e,n,t).then(r.resolve,o)})});return e.error&&o(e.value),r.promise}});o({target:"Promise",stat:!0,forced:L.CONSTRUCTOR},{reject:function(t){var e=nr.f(this);return b(e.reject,void 0,t),e.promise}});function Wr(){}function Br(t){t.write(oo("")),t.close();var e=t.parentWindow.Object;return t=null,e}function zr(t){uo[co][t]=!0}function qr(t){if(h(e=t)&&(void 0!==(n=e[ao])?!!n:"RegExp"==f(e)))throw fo("The method doesn't accept regular expressions");var e,n;return t}function Jr(t){if("Symbol"===We(t))throw TypeError("Cannot convert a Symbol value to a string");return lo(t)}function Kr(t,e){var n=[][t];return!!n&&s(function(){n.call(null,e||function(){return 1},1)})}function Xr(e){if(e&&e.forEach!==yo)try{ie(e,"forEach",yo)}catch(t){e.forEach=yo}}var Yr,Qr,v=L.CONSTRUCTOR,Zr=(n("Promise"),o({target:"Promise",stat:!0,forced:v},{resolve:function(t){return t=t,E(e=this),h(t)&&t.constructor===e?t:((0,(e=nr.f(e)).resolve)(t),e.promise);var e}}),o({target:"Array",stat:!0},{isArray:$e}),Object.keys||function(t){return X(t,Ce)}),to={f:a&&!j?Object.defineProperties:function(t,e){E(t);for(var n,r=G(e),o=Zr(e),i=o.length,c=0;c<i;)T.f(t,n=o[c++],r[n]);return t}},eo="prototype",no="script",ro=z("IE_PROTO"),oo=function(t){return"<"+no+">"+t+"</"+no+">"},io=function(){try{Yr=new ActiveXObject("htmlfile")}catch(t){}io="undefined"==typeof document||document.domain&&Yr?Br(Yr):(t=qt("iframe"),e="java"+no+":",t.style.display="none",gn.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(oo("document.F=Object")),e.close(),e.F);for(var t,e,n=Ce.length;n--;)delete io[eo][Ce[n]];return io()},R=(fe[ro]=!0,Object.create||function(t,e){var n;return null!==t?(Wr[eo]=E(t),n=new Wr,Wr[eo]=null,n[ro]=t):n=io(),void 0===e?n:to.f(n,e)}),an=T.f,co=r("unscopables"),uo=Array.prototype,so=(null==uo[co]&&an(uo,co,{configurable:!0,value:R(null)}),P.includes),ao=(o({target:"Array",proto:!0,forced:s(function(){return!Array(1).includes()})},{includes:function(t){return so(this,t,1<arguments.length?arguments[1]:void 0)}}),zr("includes"),r("match")),fo=TypeError,lo=String,po=r("match"),ho=e("".indexOf),vo=(o({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[po]=!1,"/./"[e](n)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~ho(Jr(V(this)),Jr(qr(t)),1<arguments.length?arguments[1]:void 0)}}),C.forEach),yo=Kr("forEach")?[].forEach:function(t){return vo(this,t,1<arguments.length?arguments[1]:void 0)},go=(o({target:"Array",proto:!0,forced:[].forEach!=yo},{forEach:yo}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Bn=qt("span").classList,D=Bn&&Bn.constructor&&Bn.constructor.prototype,I=D===Object.prototype?void 0:D;for(Qr in go)go[Qr]&&Xr(g[Qr]&&g[Qr].prototype);Xr(I);var bo=C.map,mo=(o({target:"Array",proto:!0,forced:!rt("map")},{map:function(t){return bo(this,t,1<arguments.length?arguments[1]:void 0)}}),P.indexOf),So=e([].indexOf),Oo=!!So&&1/So([1],1,-0)<0,fn=Kr("indexOf"),wo=(o({target:"Array",proto:!0,forced:Oo||!fn},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return Oo?So(this,t,e)||0:mo(this,t,e)}}),C.find),Ur="find",jo=!0,x=(Ur in[]&&Array(1)[Ur](function(){jo=!1}),o({target:"Array",proto:!0,forced:jo},{find:function(t){return wo(this,t,1<arguments.length?arguments[1]:void 0)}}),zr(Ur),p.mvc.View.extend({className:"select-button-group",events:{"click .select-button-group-button":"onSelect","mouseover .select-button-group-button":"onOptionHover",mouseleave:"onMouseOut","mousedown .select-button-group-button":"pointerdown","touchstart .select-button-group-button":"pointerdown","mouseup .select-button-group-button":"pointerup","touchend .select-button-group-button":"pointerup"},options:{options:[],disabled:!1,multi:!1,selected:void 0,singleDeselect:!1,noSelectionValue:void 0,width:void 0,buttonWidth:void 0,buttonHeight:void 0,iconWidth:void 0,iconHeight:void 0},init:function(){p.util.bindAll(this,"onSelect","pointerup"),this.$el.data("view",this);var t,e=this.options.options,n=this.options.multi,r=this.options.selected;void 0===r?(t=p.util.toArray(e).filter(function(t){return t&&!0===t.selected}),this.selection=n?t:t[0]):this.selection=n?Array.isArray(r)?e.filter(function(t,e){return r.includes(e)}):[e[r]]:e[r]},render:function(){return this.renderOptions(this.selection),this.options.width&&this.$el.css("width",this.options.width),this.options.disabled&&this.disable(),this.$el.append(this.$options),this},renderOptions:function(){this.removeOptions(),p.util.toArray(this.options.options).forEach(function(t,e){var n=this.options.multi?this.selection.includes(t):this.selection===t,t=this.renderOption(t,e,n);this.$el.append(t),n&&t.addClass("selected")},this)},removeOptions:function(){this.$el.empty()},renderOption:function(t,e,n){n=this.renderOptionContent(t,n),n.data("index",e),e=t.buttonWidth||this.options.buttonWidth,e&&n.css("width",e),e=t.buttonHeight||this.options.buttonHeight;return e&&n.css("height",e),n},renderOptionContent:function(t,e){var n,r=l("<div/>",{class:"select-button-group-button",html:t.content});return(t.icon||e&&t.iconSelected)&&(e=l("<img/>",{class:"select-button-group-button-icon",src:e&&t.iconSelected?t.iconSelected:t.icon}),(n=t.iconWidth||this.options.iconWidth)&&e.css("width",n),(n=t.iconHeight||this.options.iconHeight)&&e.css("height",n),r.prepend(e)),p.util.setAttributesBySelector(r,t.attrs),r},getOptionIndex:function(t){return l(t).closest(".select-button-group-button").data("index")},onSelect:function(t){this.isDisabled()||(t=this.getOptionIndex(t.target),this.select(t,{ui:!0}))},onOptionHover:function(t){this.isDisabled()||(t=this.getOptionIndex(t.target),this.trigger("option:hover",this.options.options[t],t))},onMouseOut:function(t){this.isDisabled()||this.trigger("mouseout",t)},getSelection:function(){return this.selection},getSelectionValue:function(t){t=t||this.selection;var e,n=this.options.noSelectionValue;return this.options.multi?0===(e=p.util.toArray(t)).length?void 0!==n?n:[]:e.map(function(t){var e=t.value;return void 0!==e?e:t.content}):t?void 0!==(e=t.value)?e:t.content:void 0!==n?n:void 0},select:function(t,e){var n,r,o=l(this.$(".select-button-group-button")[t]),i=this.options.options[t],c=null,u=null,s=null,a=null,f=(this.options.multi?(o.toggleClass("selected"),o.hasClass("selected")?(s=t,-1===this.selection.indexOf(a=i)&&this.selection.push(i),i.iconSelected&&o.find(".select-button-group-button-icon").attr("src",i.iconSelected)):(c=t,this.selection=p.util.without(this.selection,u=i),i.iconSelected&&o.find(".select-button-group-button-icon").attr("src",i.icon))):(f=(n=this.$(".selected")).index(),r=this.options.options[f],o.toggleClass("selected"),o.hasClass("selected")?(r&&(c=f,u=r,n.removeClass("selected"),r.iconSelected&&n.find(".select-button-group-button-icon").attr("src",r.icon)),s=t,(this.selection=a=i).iconSelected&&o.find(".select-button-group-button-icon").attr("src",i.iconSelected)):this.options.singleDeselect?(c=t,u=i,this.selection=void 0,i.iconSelected&&o.find(".select-button-group-button-icon").attr("src",i.icon)):o.addClass("selected")),p.util.assign({},e));f.deselectedIndex=c,f.deselectedOption=u,f.selectedIndex=s,f.selectedOption=a,this.trigger("option:select",this.selection,t,f)},selectByValue:function(t,e){Array.isArray(t)||(t=[t]);for(var n=this.options.options||[],r=0;r<n.length;r++){var o=n[r];(void 0===o.value&&t.includes(o.content)||void 0!==o.value&&t.find(function(t){return p.util.isEqual(t,o.value)}))&&this.select(r,e)}},deselect:function(){this.$(".selected").removeClass("selected"),this.options.multi?this.selection=[]:this.selection=void 0},isDisabled:function(){return this.$el.hasClass("disabled")},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.$el.addClass("disabled")},pointerdown:function(t){t=this.getOptionIndex(t.target);l(this.$(".select-button-group-button")[t]).addClass("is-in-action"),l(document).on("mouseup.select-button-group touchend.select-button-group",this.pointerup)},pointerup:function(){this.$(".is-in-action").removeClass("is-in-action"),l(document).off("mouseup.select-button-group touchend.select-button-group")}}));_.SelectButtonGroup=x}(this.joint.ui=this.joint.ui||{},$,joint);