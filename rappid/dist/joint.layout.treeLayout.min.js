/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(H,t,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function k(t,i){return t(i={exports:{}},i.exports),i.exports}function D(t){return t&&t.Math==Math&&t}function h(t){try{return!!t()}catch(t){return!0}}function X(t,i){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:i}}function I(t){return it?st(t):function(){return ot.apply(t,arguments)}}function s(t){return ht(at(t),8,-1)}function a(t){if("Function"===s(t))return I(t)}function F(t){if(ft(t))throw lt("Can't call method on "+t);return t}function u(t){return gt(F(t))}function e(t,i){return arguments.length<2?(e=y[t],v(e)?e:void 0):y[t]&&y[t][i];var e}function R(t){return Bt(F(t))}function V(t){return"Symbol("+(void 0===t?"":t)+")_"+jt(++Mt+Et,36)}function n(t){var i;return A(zt,t)&&(yt||"string"==typeof zt[t])||(i="Symbol."+t,yt&&A(C,t)?zt[t]=C[t]:zt[t]=(bt&&Ht?Ht:kt)(i)),zt[t]}function W(t){return t=function(t,i){if(!b(t)||xt(t))return t;var e=Ct(t,Xt);if(e){if(e=p(e,t,i=void 0===i?"default":i),!b(e)||xt(e))return e;throw Dt("Can't convert object to primitive value")}return Tt(t,i=void 0===i?"number":i)}(t,"string"),xt(t)?t:t+""}function Y(t){return ri[t]||(ri[t]=V(t))}function N(t,i,e,n){var r=(n=n||{}).enumerable,o=void 0!==n.name?n.name:i;if(v(e)&&ci(e,o,n),n.global)r?t[i]=e:Gt(i,e);else{try{n.unsafe?t[i]&&(r=!0):delete t[i]}catch(t){}r?t[i]=e:P.f(t,i,{value:e,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}}function _(a){return function(t,i,e){var n,r=u(t),o=O(r),s=yi(e,o);if(a&&i!=i){for(;s<o;)if((n=r[s++])!=n)return!0}else for(;s<o;s++)if((a||s in r)&&r[s]===i)return a||s||0;return!a&&-1}}function K(t,i){var e,n=u(t),r=0,o=[];for(e in n)!A(oi,e)&&A(n,e)&&Si(o,e);for(;i.length>r;)!A(n,e=i[r++])||~xi(o,e)||Si(o,e);return o}function o(t,i){return(t=Bi[Gi(t)])==Mi||t!=Oi&&(v(i)?h(i):!!i)}function c(t,i){var e,n,r,o=t.target,s=t.global,a=t.stat,h=s?y:a?y[o]||Gt(o,{}):(y[o]||{}).prototype;if(h)for(e in i){if(n=i[e],r=t.dontCallGetSet?(r=ji(h,e))&&r.value:h[e],!Ei(s?e:o+(a?".":"#")+e,t.forced)&&void 0!==r){if(typeof n==typeof r)continue;for(var u=n,c=r,g=v=p=d=l=f=void 0,f=Ti(c),l=P.f,d=Nt.f,p=0;p<f.length;p++){var v=f[p];A(u,v)||g&&A(g,v)||l(u,v,d(c,v))}}(t.sham||r&&r.sham)&&ti(n,"sham",!0),N(h,e,n,t)}}function U(){}function q(t){if(!v(t))return!1;try{return Vi(U,Fi,t),!0}catch(t){return!1}}function $(t){if(!v(t))return!1;switch(Ii(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ni||!!Yi(Wi,ni(t))}catch(t){return!0}}function J(t,i){return new(qi(t))(0===i?0:i)}function g(d){var p=1==d,v=2==d,y=3==d,b=4==d,m=6==d,x=7==d,S=5==d||m;return function(t,i,e,n){for(var r,o,s,a,h=R(t),u=gt(h),c=(o=e,At(r=i),void 0===o?r:it?zi(r,o):function(){return r.apply(o,arguments)}),g=O(u),f=0,e=n||J,l=p?e(t,g):v||x?e(t,0):void 0;f<g;f++)if((S||f in u)&&(a=c(s=u[f],f,h),d))if(p)l[f]=a;else if(a)switch(d){case 3:return!0;case 5:return s;case 6:return f;case 2:$i(l,s)}else switch(d){case 4:return!1;case 7:$i(l,s)}return m?-1:y||b?b:l}}function Q(t,i){var e=[][t];return!!e&&h(function(){e.call(null,i||function(){return 1},1)})}var Z,tt,f,l,y=D("object"==typeof globalThis&&globalThis)||D("object"==typeof window&&window)||D("object"==typeof self&&self)||D("object"==typeof i&&i)||function(){return this}()||Function("return this")(),d=!h(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),it=!h(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),et=Function.prototype.call,p=it?et.bind(et):function(){return et.apply(et,arguments)},i={}.propertyIsEnumerable,nt=Object.getOwnPropertyDescriptor,rt={f:nt&&!i.call({1:2},1)?function(t){t=nt(this,t);return!!t&&t.enumerable}:i},i=Function.prototype,ot=i.call,st=it&&i.bind.bind(ot,ot),at=I({}.toString),ht=I("".slice),ut=Object,ct=a("".split),gt=h(function(){return!ut("z").propertyIsEnumerable(0)})?function(t){return"String"==s(t)?ct(t,""):ut(t)}:ut,ft=function(t){return null==t},lt=TypeError,i="object"==typeof document&&document.all,i={all:i,IS_HTMLDDA:void 0===i&&void 0!==i},dt=i.all,v=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===dt}:function(t){return"function"==typeof t},pt=i.all,b=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:v(t)||t===pt}:function(t){return"object"==typeof t?null!==t:v(t)},vt=a({}.isPrototypeOf),i=e("navigator","userAgent")||"",m=y.process,x=y.Deno,m=m&&m.versions||x&&x.version,x=m&&m.v8,S=G=!(G=x?0<(L=x.split("."))[0]&&L[0]<4?1:+(L[0]+L[1]):G)&&i&&(!(L=i.match(/Edge\/(\d+)/))||74<=L[1])&&(L=i.match(/Chrome\/(\d+)/))?+L[1]:G,yt=!!Object.getOwnPropertySymbols&&!h(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&S&&S<41}),bt=yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,mt=Object,xt=bt?function(t){return"symbol"==typeof t}:function(t){var i=e("Symbol");return v(i)&&vt(i.prototype,mt(t))},St=String,Rt=function(t){try{return St(t)}catch(t){return"Object"}},wt=TypeError,At=function(t){if(v(t))return t;throw wt(Rt(t)+" is not a function")},Ct=function(t,i){t=t[i];return ft(t)?void 0:At(t)},Lt=TypeError,Tt=function(t,i){var e,n;if("string"===i&&v(e=t.toString)&&!b(n=p(e,t)))return n;if(v(e=t.valueOf)&&!b(n=p(e,t)))return n;if("string"!==i&&v(e=t.toString)&&!b(n=p(e,t)))return n;throw Lt("Can't convert object to primitive value")},Pt=Object.defineProperty,Gt=function(i,e){try{Pt(y,i,{value:e,configurable:!0,writable:!0})}catch(t){y[i]=e}return e},m="__core-js_shared__",w=y[m]||Gt(m,{}),x=k(function(t){(t.exports=function(t,i){return w[t]||(w[t]=void 0!==i?i:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),Bt=Object,Ot=a({}.hasOwnProperty),A=Object.hasOwn||function(t,i){return Ot(R(t),i)},Mt=0,Et=Math.random(),jt=a(1..toString),zt=x("wks"),C=y.Symbol,Ht=C&&C.for,kt=bt?C:C&&C.withoutSetter||V,Dt=TypeError,Xt=n("toPrimitive"),It=y.document,Ft=b(It)&&b(It.createElement),Vt=function(t){return Ft?It.createElement(t):{}},Wt=!d&&!h(function(){return 7!=Object.defineProperty(Vt("div"),"a",{get:function(){return 7}}).a}),Yt=Object.getOwnPropertyDescriptor,Nt={f:d?Yt:function(t,i){if(t=u(t),i=W(i),Wt)try{return Yt(t,i)}catch(t){}if(A(t,i))return X(!p(rt.f,t,i),t[i])}},L=d&&h(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),_t=String,Kt=TypeError,T=function(t){if(b(t))return t;throw Kt(_t(t)+" is not an object")},Ut=TypeError,qt=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,Jt="enumerable",Qt="configurable",Zt="writable",P={f:d?L?function(t,i,e){var n;return T(t),i=W(i),T(e),"function"==typeof t&&"prototype"===i&&"value"in e&&Zt in e&&!e[Zt]&&((n=$t(t,i))&&n[Zt]&&(t[i]=e.value,e={configurable:(Qt in e?e:n)[Qt],enumerable:(Jt in e?e:n)[Jt],writable:!1})),qt(t,i,e)}:qt:function(t,i,e){if(T(t),i=W(i),T(e),Wt)try{return qt(t,i,e)}catch(t){}if("get"in e||"set"in e)throw Ut("Accessors not supported");return"value"in e&&(t[i]=e.value),t}},ti=d?function(t,i,e){return P.f(t,i,X(1,e))}:function(t,i,e){return t[i]=e,t},G=Function.prototype,m=d&&Object.getOwnPropertyDescriptor,B=A(G,"name"),ii={EXISTS:B,PROPER:B&&"something"===function(){}.name,CONFIGURABLE:B&&(!d||m(G,"name").configurable)},ei=a(Function.toString),ni=(v(w.inspectSource)||(w.inspectSource=function(t){return ei(t)}),w.inspectSource),B=y.WeakMap,m=v(B)&&/native code/.test(String(B)),ri=x("keys"),oi={},si="Object already initialized",ai=y.TypeError,G=y.WeakMap,hi=m||w.state?((f=w.state||(w.state=new G)).get=f.get,f.has=f.has,f.set=f.set,Z=function(t,i){if(f.has(t))throw ai(si);return i.facade=t,f.set(t,i),i},tt=function(t){return f.get(t)||{}},function(t){return f.has(t)}):(l=Y("state"),oi[l]=!0,Z=function(t,i){if(A(t,l))throw ai(si);return i.facade=t,ti(t,l,i),i},tt=function(t){return A(t,l)?t[l]:{}},function(t){return A(t,l)}),ui={set:Z,get:tt,has:hi,enforce:function(t){return hi(t)?tt(t):Z(t,{})},getterFor:function(i){return function(t){if(b(t)&&(t=tt(t)).type===i)return t;throw ai("Incompatible receiver, "+i+" required")}}},ci=k(function(t){var n=ii.CONFIGURABLE,r=ui.enforce,i=ui.get,o=Object.defineProperty,s=d&&!h(function(){return 8!==o(function(){},"length",{value:8}).length}),a=String(String).split("String"),t=t.exports=function(t,i,e){"Symbol("===String(i).slice(0,7)&&(i="["+String(i).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(i="get "+i),e&&e.setter&&(i="set "+i),(!A(t,"name")||n&&t.name!==i)&&(d?o(t,"name",{value:i,configurable:!0}):t.name=i),s&&e&&A(e,"arity")&&t.length!==e.arity&&o(t,"length",{value:e.arity});try{e&&A(e,"constructor")&&e.constructor?d&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}e=r(t);return A(e,"source")||(e.source=a.join("string"==typeof i?i:"")),t};Function.prototype.toString=t(function(){return v(this)&&i(this).source||ni(this)},"toString")}),gi=Math.ceil,fi=Math.floor,li=Math.trunc||function(t){t=+t;return(0<t?fi:gi)(t)},di=function(t){t=+t;return t!=t||0==t?0:li(t)},pi=Math.max,vi=Math.min,yi=function(t,i){t=di(t);return t<0?pi(t+i,0):vi(t,i)},bi=Math.min,mi=function(t){return 0<t?bi(di(t),9007199254740991):0},O=function(t){return mi(t.length)},xi={includes:_(!0),indexOf:_(!1)}.indexOf,Si=a([].push),Ri=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wi=Ri.concat("length","prototype"),Ai={f:Object.getOwnPropertyNames||function(t){return K(t,wi)}},Ci={f:Object.getOwnPropertySymbols},Li=a([].concat),Ti=e("Reflect","ownKeys")||function(t){var i=Ai.f(T(t)),e=Ci.f;return e?Li(i,e(t)):i},Pi=/#|\.prototype\./,Gi=o.normalize=function(t){return String(t).replace(Pi,".").toLowerCase()},Bi=o.data={},Oi=o.NATIVE="N",Mi=o.POLYFILL="P",Ei=o,ji=Nt.f,zi=a(a.bind),Hi=Array.isArray||function(t){return"Array"==s(t)},B={},m=(B[n("toStringTag")]="z","[object z]"===String(B)),ki=n("toStringTag"),Di=Object,Xi="Arguments"==s(function(){return arguments}()),Ii=m?s:function(t){var i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,i){try{return t[i]}catch(t){}}(t=Di(t),ki))?i:Xi?s(t):"Object"==(i=s(t))&&v(t.callee)?"Arguments":i},Fi=[],Vi=e("Reflect","construct"),Wi=/^\s*(?:class|function)\b/,Yi=a(Wi.exec),Ni=!Wi.exec(U),_i=($.sham=!0,!Vi||h(function(){var t;return q(q.call)||!q(Object)||!q(function(){t=!0})||t})?$:q),Ki=n("species"),Ui=Array,qi=function(t){var i;return Hi(t)&&(i=t.constructor,(_i(i)&&(i===Ui||Hi(i.prototype))||b(i)&&null===(i=i[Ki]))&&(i=void 0)),void 0===i?Ui:i},$i=a([].push),G={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6),filterReject:g(7)},Ji=G.forEach,Qi=Q("forEach")?[].forEach:function(t){return Ji(this,t,1<arguments.length?arguments[1]:void 0)};c({target:"Array",proto:!0,forced:[].forEach!=Qi},{forEach:Qi});function Zi(i){if(i&&i.forEach!==Qi)try{ti(i,"forEach",Qi)}catch(t){i.forEach=Qi}}m||N(Object.prototype,"toString",m?{}.toString:function(){return"[object "+Ii(this)+"]"},{unsafe:!0});var te,ie={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},B=Vt("span").classList,m=B&&B.constructor&&B.constructor.prototype,B=m===Object.prototype?void 0:m;for(te in ie)ie[te]&&Zi(y[te]&&y[te].prototype);Zi(B);function ee(i){return 51<=S||!h(function(){var t=[];return(t.constructor={})[ce]=function(){return{foo:1}},1!==t[i](Boolean).foo})}function ne(){}function re(t){t.write(Se("")),t.close();var i=t.parentWindow.Object;return t=null,i}function oe(u){return function(t,i,e,n){At(i);var r=R(t),o=gt(r),s=O(r),a=u?s-1:0,h=u?-1:1;if(e<2)for(;;){if(a in o){n=o[a],a+=h;break}if(a+=h,u?a<0:s<=a)throw Le("Reduce of empty array with no initial value")}for(;u?0<=a:a<s;a+=h)a in o&&(n=i(n,o[a],a,r));return n}}function M(t){if("Symbol"===Ii(t))throw TypeError("Cannot convert a Symbol value to a string");return ze(t)}function se(t,i,e){for(var n=O(t),r=yi(i,n),o=yi(void 0===e?n:e,n),s=He(ke(o-r,0)),a=0;r<o;r++,a++)ue(s,a,t[r]);return s.length=a,s}function ae(t,i){var e=t.length,n=De(e/2);if(e<8){for(var r,o,s=t,a=i,h=s.length,u=1;u<h;){for(r=s[o=u];o&&0<a(s[o-1],r);)s[o]=s[--o];o!==u++&&(s[o]=r)}return s}for(var c=t,g=ae(se(t,0,n),i),f=ae(se(t,n),i),l=i,d=g.length,p=f.length,v=0,y=0;v<d||y<p;)c[v+y]=v<d&&y<p?l(g[v],f[y])<=0?g[v++]:f[y++]:v<d?g[v++]:f[y++];return c}var he,ue=function(t,i,e){i=W(i);i in t?P.f(t,i,X(0,e)):t[i]=e},ce=n("species"),ge=a([].slice),m=ee("slice"),fe=n("species"),le=Array,de=Math.max,pe=(c({target:"Array",proto:!0,forced:!m},{slice:function(t,i){var e,n,r,o=u(this),s=O(o),a=yi(t,s),h=yi(void 0===i?s:i,s);if(Hi(o)&&(e=o.constructor,(e=_i(e)&&(e===le||Hi(e.prototype))||b(e)&&null===(e=e[fe])?void 0:e)===le||void 0===e))return ge(o,a,h);for(n=new(void 0===e?le:e)(de(h-a,0)),r=0;a<h;a++,r++)a in o&&ue(n,r,o[a]);return n.length=r,n}}),Object.keys||function(t){return K(t,Ri)}),ve={f:d&&!L?Object.defineProperties:function(t,i){T(t);for(var e,n=u(i),r=pe(i),o=r.length,s=0;s<o;)P.f(t,e=r[s++],n[e]);return t}},ye=e("document","documentElement"),be="prototype",me="script",xe=Y("IE_PROTO"),Se=function(t){return"<"+me+">"+t+"</"+me+">"},Re=function(){try{he=new ActiveXObject("htmlfile")}catch(t){}Re="undefined"==typeof document||document.domain&&he?re(he):(t=Vt("iframe"),i="java"+me+":",t.style.display="none",ye.appendChild(t),t.src=String(i),(i=t.contentWindow.document).open(),i.write(Se("document.F=Object")),i.close(),i.F);for(var t,i,e=Ri.length;e--;)delete Re[be][Ri[e]];return Re()},we=(oi[xe]=!0,Object.create||function(t,i){var e;return null!==t?(ne[be]=T(t),e=new ne,ne[be]=null,e[xe]=t):e=Re(),void 0===i?e:ve.f(e,i)}),B=P.f,m=n("unscopables"),L=Array.prototype,Ae=(null==L[m]&&B(L,m,{configurable:!0,value:we(null)}),G.find),B="find",Ce=!0,Le=(B in[]&&Array(1)[B](function(){Ce=!1}),c({target:"Array",proto:!0,forced:Ce},{find:function(t){return Ae(this,t,1<arguments.length?arguments[1]:void 0)}}),L[m][B]=!0,TypeError),m={left:oe(!1),right:oe(!0)},B="process"==s(y.process),Te=m.left,Pe=(c({target:"Array",proto:!0,forced:!Q("reduce")||!B&&79<S&&S<83},{reduce:function(t){var i=arguments.length;return Te(this,t,i,1<i?arguments[1]:void 0)}}),Function),Ge=a([].concat),Be=a([].join),Oe={},m=it?Pe.bind:function(s){var a=At(this),t=a.prototype,h=ge(arguments,1),u=function(){var t=Ge(h,ge(arguments));if(this instanceof u){var i=a,e=t.length,n=t;if(!A(Oe,e)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";Oe[e]=Pe("C,a","return new C("+Be(r,",")+")")}return Oe[e](i,n)}return a.apply(s,t)};return b(t)&&(u.prototype=t),u},Me=(c({target:"Function",proto:!0,forced:Function.bind!==m},{bind:m}),G.some),Ee=(c({target:"Array",proto:!0,forced:!Q("some")},{some:function(t){return Me(this,t,1<arguments.length?arguments[1]:void 0)}}),a([].join)),B=gt!=Object,m=Q("join",","),je=(c({target:"Array",proto:!0,forced:B||!m},{join:function(t){return Ee(u(this),void 0===t?",":t)}}),TypeError),ze=String,He=Array,ke=Math.max,De=Math.floor,Xe=ae,B=i.match(/firefox\/(\d+)/i),Ie=!!B&&+B[1],Fe=/MSIE|Trident/.test(i),m=i.match(/AppleWebKit\/(\d+)\./),Ve=!!m&&+m[1],E=[],We=a(E.sort),Ye=a(E.push),B=h(function(){E.sort(void 0)}),i=h(function(){E.sort(null)}),m=Q("sort"),Ne=!h(function(){if(S)return S<70;if(!(Ie&&3<Ie)){if(Fe)return 1;if(Ve)return Ve<603;for(var t,i,e,n="",r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(e=0;e<47;e++)E.push({k:t+e,v:i})}for(E.sort(function(t,i){return i.v-t.v}),e=0;e<E.length;e++)t=E[e].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}});c({target:"Array",proto:!0,forced:B||!i||!m||!Ne},{sort:function(t){void 0!==t&&At(t);var i=R(this);if(Ne)return void 0===t?We(i):We(i,t);for(var e,n,r=[],o=O(i),s=0;s<o;s++)s in i&&Ye(r,i[s]);for(Xe(r,(n=t,function(t,i){return void 0===i?-1:void 0===t?1:void 0!==n?+n(t,i)||0:M(t)>M(i)?1:-1})),e=O(r),s=0;s<e;)i[s]=r[s++];for(;s<o;){var a=i;var h=s++;if(!delete a[h])throw je("Cannot delete property "+Rt(h)+" of "+Rt(a))}return i}});function _e(t){if(9007199254740991<t)throw Qe("Maximum allowed index exceeded")}function Ke(){var t=T(this),i="";return t.hasIndices&&(i+="d"),t.global&&(i+="g"),t.ignoreCase&&(i+="i"),t.multiline&&(i+="m"),t.dotAll&&(i+="s"),t.unicode&&(i+="u"),t.unicodeSets&&(i+="v"),t.sticky&&(i+="y"),i}c({target:"Object",stat:!0,forced:h(function(){pe(1)})},{keys:function(t){return pe(R(t))}});var Ue,qe,$e,j,Je,Qe=TypeError,Ze=n("isConcatSpreadable"),B=51<=S||!h(function(){var t=[];return t[Ze]=!1,t.concat()[0]!==t}),i=ee("concat"),tn=(c({target:"Array",proto:!0,arity:1,forced:!B||!i},{concat:function(t){for(var i,e,n,r,o,s=R(this),a=J(s,0),h=0,u=-1,c=arguments.length;u<c;u++)if(o=void 0,!b(r=n=-1===u?s:arguments[u])||(void 0!==(o=r[Ze])?!o:!Hi(r)))_e(h+1),ue(a,h++,n);else for(e=O(n),_e(h+e),i=0;i<e;i++,h++)i in n&&ue(a,h,n[i]);return a.length=h,a}}),G.map),en=(c({target:"Array",proto:!0,forced:!ee("map")},{map:function(t){return tn(this,t,1<arguments.length?arguments[1]:void 0)}}),G.filter),nn=(c({target:"Array",proto:!0,forced:!ee("filter")},{filter:function(t){return en(this,t,1<arguments.length?arguments[1]:void 0)}}),/"/g),rn=a("".replace),on=(c({target:"String",proto:!0,forced:(Ue="link",h(function(){var t=""[Ue]('"');return t!==t.toLowerCase()||3<t.split('"').length}))},{link:function(t){return e="a",n="href",t=t,i=M(F(i=this)),r="<"+e,""!==n&&(r+=" "+n+'="'+rn(M(t),nn,"&quot;")+'"'),r+">"+i+"</"+e+">";var i,e,n,r}}),y.RegExp),m=h(function(){var t=on("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),B=m||h(function(){return!on("a","y").sticky}),i={BROKEN_CARET:m||h(function(){var t=on("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:B,UNSUPPORTED_Y:m},sn=y.RegExp,G=h(function(){var t=sn(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),an=y.RegExp,B=h(function(){var t=an("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),hn=ui.get,un=x("native-string-replace",String.prototype.replace),cn=RegExp.prototype.exec,gn=cn,fn=a("".charAt),ln=a("".indexOf),dn=a("".replace),pn=a("".slice),vn=(m=/b*/g,p(cn,x=/a/,"a"),p(cn,m,"a"),0!==x.lastIndex||0!==m.lastIndex),yn=i.BROKEN_CARET,bn=void 0!==/()??/.exec("")[1],mn=gn=vn||bn||yn||G||B?function(t){var i,e,n,r,o,s,a=this,h=hn(a),t=M(t),u=h.raw;if(u)return u.lastIndex=a.lastIndex,g=p(gn,u,t),a.lastIndex=u.lastIndex,g;var c=h.groups,u=yn&&a.sticky,g=p(Ke,a),h=a.source,f=0,l=t;if(u&&(g=dn(g,"y",""),-1===ln(g,"g")&&(g+="g"),l=pn(t,a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==fn(t,a.lastIndex-1))&&(h="(?: "+h+")",l=" "+l,f++),i=new RegExp("^(?:"+h+")",g)),bn&&(i=new RegExp("^"+h+"$(?!\\s)",g)),vn&&(e=a.lastIndex),n=p(cn,u?i:a,l),u?n?(n.input=pn(n.input,f),n[0]=pn(n[0],f),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:vn&&n&&(a.lastIndex=a.global?n.index+n[0].length:e),bn&&n&&1<n.length&&p(un,n[0],i,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)}),n&&c)for(n.groups=o=we(null),r=0;r<c.length;r++)o[(s=c[r])[0]]=n[s[1]];return n}:gn,xn=(c({target:"RegExp",proto:!0,forced:/./.exec!==mn},{exec:mn}),n("species")),Sn=RegExp.prototype,Rn=Object.is||function(t,i){return t===i?0!==t||1/t==1/i:t!=t&&i!=i},wn=TypeError;function An(t,i,e){e=r.util.defaults(e||{},{siblingGap:0}),this.width=0,this.height=0,this.layoutAreas=this.sortLayoutAreas(t),this.parentArea=i,this.siblingGap=e.siblingGap,this.exists()&&this.computeSize(e)}x=function(n,r,o){return[function(t){var i=F(this),e=ft(t)?void 0:Ct(t,n);return e?p(e,t,i):new RegExp(t)[n](M(i))},function(t){var i=T(this),t=M(t),e=o(r,i,t);return e.done?e.value:(e=i.lastIndex,Rn(e,0)||(i.lastIndex=0),t=function(t,i){var e=t.exec;if(v(e))return null!==(e=p(e,t,i))&&T(e),e;if("RegExp"===s(t))return p(mn,t,i);throw wn("RegExp#exec called on incompatible receiver")}(i,t),Rn(i.lastIndex,e)||(i.lastIndex=e),null===t?-1:t.index)}]},j=n(qe="search"),Je=!h(function(){var t={};return t[j]=function(){return 7},7!=""[qe](t)}),m=Je&&!h(function(){var t=!1,i=/a/;return"split"===qe&&((i={constructor:{}}).constructor[xn]=function(){return i},i.flags="",i[j]=/./[j]),i.exec=function(){return t=!0,null},i[j](""),!t}),Je&&m&&!Tn||($e=a(/./[j]),m=x(j,""[qe],function(t,i,e,n,r){var t=a(t),o=i.exec;return o===mn||o===Sn.exec?Je&&!r?{done:!0,value:$e(i,e,n)}:{done:!0,value:t(e,i,n)}:{done:!1}}),N(String.prototype,qe,m[0]),N(Sn,j,m[1])),Vn&&ti(Sn[j],"sham",!0),r.util.assign(An.prototype,{sortLayoutAreas:function(t){t=r.util.sortBy(t,"siblingRank");return t.forEach(function(t,i){t.siblingRank=i}),t},move:function(t,i){for(var e=0,n=this.layoutAreas.length;e<n;e++)this.layoutAreas[e].dx+=t,this.layoutAreas[e].dy+=i},exists:function(){return 0<this.layoutAreas.length},sumGaps:function(t){return Math.max(this.layoutAreas.length-1,0)*t},getSiblingRankByPoint:function(t){return this.exists()?(t=this.findAreaByPoint(t))?t.siblingRank-1:this.layoutAreas.length-1:-1},getFirstChildConnectionPoints:function(){return[]},getConnectionPoints:function(t,i){var e;return this.exists()?(e={dx:t.x-this.parentArea.rootCX,dy:t.y-this.parentArea.rootCY},this.layoutAreas[0].getRootVertices(e,i)):this.getFirstChildConnectionPoints(t)},getParentConnectionPoint:function(){var t=this.parentArea,i=this.proxyLayoutArea("getConnectionPoint",t.rootSize);return r.g.point(t.rootCX,t.rootCY).offset(i.x,i.y)},getChildConnectionPoint:function(t,i){i=this.proxyLayoutArea("getConnectionPoint",i);return r.g.point(t).difference(i)},proxyLayoutArea:function(t){var i=Array.prototype.slice.call(arguments,1);return z.fromDirection(this.direction).prototype[t].apply(this.parentArea,i)}}),An.extend=t.Model.extend;var i=An.extend({getTopDY:function(){return-this.height/2},findAreaByPoint:function(i){return this.layoutAreas.find(function(t){return t.rootCY>i.y})},computeSize:function(e){this.height=this.sumGaps(e.siblingGap);var t=this.layoutAreas;this.height+=t.reduce(function(t,i){return t+i.height+i.prevSiblingGap+i.nextSiblingGap},0),t.reduce(function(t,i){return this.width=Math.max(this.width,i.getExtendedWidth()),i.dy+=t+i.getCY(),t+i.prevSiblingGap+i.height+i.nextSiblingGap+e.siblingGap}.bind(this),this.getTopDY())},getYTowardsParent:function(){return this.parentArea.rootCY},getXTowardsParent:function(){var t=this.parentArea;return t.rootCX+this.LRSign*(t.rootSize.width/2+t.gap)},getNeighborPointFromRank:function(t){var i,e=this.siblingGap;return i=this.exists()?(i=this.layoutAreas[t],t=this.layoutAreas[t+1],i?t?(i.y+i.height+t.y)/2:i.y+i.height+e/2:t.y-e/2):this.getYTowardsParent(),{x:this.getXTowardsParent(),y:i}}}),Cn=i.extend({direction:"L",LRSign:-1}),Ln=i.extend({direction:"R",LRSign:1}),G={getXTowardsParent:function(){var t=this.parentArea;return t.rootCX+this.LRSign*t.gap},getYTowardsParent:function(){var t=this.parentArea,i=t.getLRHeight(t.siblings)/2;return i+=Math.min(t.firstChildGap,this.siblingGap/2),t.rootCY+this.TBSign*i},getFirstChildConnectionPoints:function(t){return[r.g.point(this.parentArea.rootCX,t.y)]},getChildConnectionPoint:function(t,i){return r.g.point(t).offset(-this.LRSign*i.width/2,0)},getParentConnectionPoint:function(){var t=this.parentArea;return r.g.point(t.rootCX,t.rootCY).offset(0,this.TBSign*(t.rootSize.height-t.rootMargin)/2)}},B={getTopDY:function(){return 0}},Tn={getTopDY:function(){return-this.height}},Pn=i.extend({direction:"BR",LRSign:1,TBSign:1}),Gn=(r.util.assign(Pn.prototype,G,B),i.extend({direction:"BL",LRSign:-1,TBSign:1})),Bn=(r.util.assign(Gn.prototype,G,B),i.extend({direction:"TR",LRSign:1,TBSign:-1})),On=(r.util.assign(Bn.prototype,G,Tn),i.extend({direction:"TL",LRSign:-1,TBSign:-1})),x=(r.util.assign(On.prototype,G,Tn),An.extend({getLeftDX:function(){return-this.width/2},findAreaByPoint:function(i){return this.layoutAreas.find(function(t){return t.rootCX>i.x})},computeSize:function(e){this.width=this.sumGaps(e.siblingGap);var t=this.layoutAreas;this.width+=t.reduce(function(t,i){return t+i.width+i.prevSiblingGap+i.nextSiblingGap},0),t.reduce(function(t,i){return this.height=Math.max(this.height,i.getExtendedHeight()),i.dx+=t+i.getCX(),t+i.prevSiblingGap+i.width+i.nextSiblingGap+e.siblingGap}.bind(this),this.getLeftDX())},getNeighborPointFromRank:function(t){var i;return{x:this.exists()?(i=this.layoutAreas[t],t=this.layoutAreas[t+1],i?t?(i.x+i.width+t.x)/2:i.x+i.width+this.siblingGap/2:t.x-this.siblingGap/2):this.parentArea.rootCX,y:this.getYTowardsParent()}}})),Mn=x.extend({direction:"T",getYTowardsParent:function(){var t=this.parentArea;return t.rootCY-t.getLRHeight()/2-t.gap}}),En=x.extend({direction:"B",getYTowardsParent:function(){var t=this.parentArea;return t.rootCY+t.getLRHeight()/2+t.gap}});function z(t,i){this.root=t;t=r.util.assign({},i,this.getRootAttributes(t,i.attributeNames)),i=i.gap||0;r.util.defaults(t,{parentGap:i,siblingGap:i,firstChildGap:i}),this.siblingRank=t.siblingRank,this.rootOffset=t.rootOffset,this.rootMargin=t.rootMargin,this.siblingGap=t.siblingGap,this.gap=this.parentGap=t.parentGap,this.nextSiblingGap=t.nextSiblingGap,this.prevSiblingGap=t.prevSiblingGap,this.firstChildGap=t.firstChildGap,this.dx=0,this.dy=0,this.width=0,this.height=0}r.util.assign(z,{create:function(t,i,e){return new(z.fromDirection(t,e))(i,e)},fromDirection:function(t,i){var e;switch(t){case"L":e=zn;break;case"T":e=Hn;break;case"R":e=jn;break;case"B":e=kn;break;case"BR":e=Dn;break;case"BL":e=Xn;break;case"TR":e=In;break;case"TL":e=Fn;break;default:e=z}return e}}),r.util.assign(z.prototype,{direction:null,compute:function(t){this.childAreas=t,this.computeRelativePosition(this.root,t)},getHeight:function(t,i){return this.getTHeight(t)+this.getBHeight(t)+this.getLRHeight()},getWidth:function(t,i){var e=Math.max(t.T.width,t.B.width)/2;return Math.max(this.getLWidth(t,i)+i.width/2,e)+Math.max(this.getRWidth(t,i)+i.width/2,e)},getLRHeight:function(){return Math.max(this.rootSize.height,this.siblings.L.height,this.siblings.R.height)},getTHeight:function(t){return t.T.height+this.getTXHeight(t)},getBHeight:function(t){return t.B.height+this.getBXHeight(t)},getXLRWidth:function(t,i){return this.getLWidth(t,i)+i.width+this.getRWidth(t,i)},getXRWidth:function(t,i){t=Math.max(t.BR.width,t.TR.width);return 0<t&&(t-=i.width/2),t},getTXHeight:function(t){t=Math.max(t.TR.height,t.TL.height);return 0<t&&(t+=this.firstChildGap),t},getBXHeight:function(t){t=Math.max(t.BR.height,t.BL.height);return 0<t&&(t+=this.firstChildGap),t},getXLWidth:function(t,i){t=Math.max(t.BL.width,t.TL.width);return 0<t&&(t-=i.width/2),t},getRWidth:function(t,i){return Math.max(t.R.width,this.getXRWidth(t,i))},getLWidth:function(t,i){return Math.max(t.L.width,this.getXLWidth(t,i))},getTBOverlap:function(t,i){t=Math.max(t.T.width,t.B.width);return t=0<t?(t-i.width)/2:t},getRootDX:function(t,i){var e=this.getTBOverlap(t,i),n=Math.max(this.getLWidth(t,i),e);return(n-=Math.max(this.getRWidth(t,i),e))/2},getMinimalGap:function(t){return Math.min(t.siblingGap,this.firstChildGap,this.parentGap)},getBBox:function(t){var i=r.g.rect(this),t=t&&t.expandBy;return t&&i.moveAndExpand({x:-t,y:-t,width:2*t,height:2*t}),i},containsPoint:function(t,i){return this.getBBox(i).containsPoint(t)},getLayoutSiblings:function(t){return this.siblings[t]},getExtendedWidth:function(){return this.width+this.gap+this.rootOffset},getExtendedHeight:function(){return this.height+this.gap+this.rootOffset},findMinimalAreaByPoint:function(i,e){var n;return this.containsPoint(i,e)?(this.childAreas.some(function(t){return!!(n=t.findMinimalAreaByPoint(i,e))}),n||this):null},getType:function(){return Object.keys(this.siblings).reduce(function(t,i){return this.siblings[i].exists()?t.concat(i):t}.bind(this),[]).sort().join("-")},getRootAttributes:function(t,i){var e={rootOffset:t.get(i.offset||"offset")||0,rootMargin:t.get(i.margin||"margin")||0,prevSiblingGap:t.get(i.prevSiblingGap||"prevSiblingGap")||0,nextSiblingGap:t.get(i.nextSiblingGap||"nextSiblingGap")||0},n=t.get(i.siblingRank||"siblingRank"),n=(r.util.isNumber(n)&&(e.siblingRank=n),t.get(i.firstChildGap||"firstChildGap"));return r.util.isNumber(n)&&(e.firstChildGap=n),e},getRootSize:function(t,i){t=t.size();return t[this.marginDimension]+=i,t},createSiblings:function(t,i){t=r.util.groupBy(t,"direction");return{L:new Cn(t.L,this,i),T:new Mn(t.T,this,i),R:new Ln(t.R,this,i),B:new En(t.B,this,i),BR:new Pn(t.BR,this,i),BL:new Gn(t.BL,this,i),TR:new Bn(t.TR,this,i),TL:new On(t.TL,this,i)}},computeSize:function(t,i){return{width:this.getWidth(t,i),height:this.getHeight(t,i)}},computeOrigin:function(){var t=this.siblings,i=this.rootSize,i=Math.max(this.getLWidth(t,i)+i.width/2,this.getXLWidth(t,i)+i.width/2,t.T.width/2,t.B.width/2);return{x:this.rootCX-i,y:this.rootCY-this.getTHeight(t)-this.getLRHeight()/2}},moveSiblings:function(t,i){this.hasHorizontalSiblings(t)&&(i=i.width/2,t.L.move(-i,0),t.R.move(i,0)),this.hasVerticalSiblings(t)&&(i=this.getLRHeight()/2,t.T.move(0,-i),t.B.move(0,i),t.BR.move(0,i),t.BL.move(0,i),t.B.move(0,this.getBXHeight(t)),t.TR.move(0,-i),t.TL.move(0,-i),t.T.move(0,-this.getTXHeight(t)))},moveRootToConnectionPoint:function(t){t=this.getConnectionPoint(t);this.dx+=t.x,this.dy+=t.y},computeRelativePosition:function(t,i){i=this.siblings=this.createSiblings(i,{siblingGap:this.siblingGap}),t=this.rootSize=this.getRootSize(t,this.rootMargin);r.util.assign(this,this.computeSize(i,t)),this.moveSiblings(i,t),this.moveRootToConnectionPoint(t),this.moveRootBehindSiblings(i,t),this.moveRootFromParent()},computeAbsolutePosition:function(){var t;this.parentArea?(this.rootCX=this.parentArea.rootCX+this.dx,this.rootCY=this.parentArea.rootCY+this.dy,this.level=this.parentArea.level+1):(t=this.root.getBBox().center(),this.rootCX=t.x,this.rootCY=t.y,this.level=0),r.util.assign(this,this.computeOrigin())},hasVerticalSiblings:function(t){return t.T.exists()||t.B.exists()||t.BR.exists()||t.BL.exists()||t.TR.exists()||t.TL.exists()},hasHorizontalSiblings:function(t){return t.L.exists()||t.R.exists()},isSourceArea:function(){return!this.parentArea},isSinkArea:function(){return 0===this.childAreas.length},getRootPosition:function(){var t=this.root.get("size");return{x:this.rootCX-t.width/2,y:this.rootCY-t.height/2}},getRootVertices:function(t,i){var e;return i=i||{},0!==(t=t||this)[this.deltaCoordinate]&&this.parentArea?(e=this.parentArea.getInnerSize(),i=!i.ignoreSiblings&&this.hasSiblingsBetweenParent()?(i=this.siblings[this.oppositeDirection],this.getRelativeVerticesAvoidingSiblings(e,t,i)):this.getRelativeVertices(e,t),r.util.invoke(i,"offset",this.parentArea.rootCX,this.parentArea.rootCY)):[]},getInnerSize:function(){return{width:this.rootSize.width,height:this.getLRHeight()}},getConnectionPoint:function(){return null},getRelativeVertices:function(){return null},moveRootFromParent:function(){},moveRootBehindSiblings:function(){},hasSiblingsBetweenParent:function(){return!this.isSourceArea()&&this.siblings[this.oppositeDirection].exists()},getCY:function(){return this.height/2+this.prevSiblingGap},getCX:function(){return this.width/2+this.prevSiblingGap}}),z.extend=t.Model.extend;var jn=z.extend({direction:"R",oppositeDirection:"L",deltaCoordinate:"dx",marginDimension:"height",getConnectionPoint:function(t){return r.g.point(t.width/2,0)},moveRootBehindSiblings:function(t,i){this.dx+=Math.max(this.getLWidth(t,i),this.getTBOverlap(t,i)),this.dy+=(this.getTHeight(t)-this.getBHeight(t))/2},moveRootFromParent:function(){this.dx+=this.parentGap+this.rootOffset},getRelativeVertices:function(t,i){var t=this.getConnectionPoint(t),e=this.parentGap/2;return[t.clone().offset(e,0),t.clone().offset(e,i.dy)]},getRelativeVerticesAvoidingSiblings:function(t,i,e){var t=this.getConnectionPoint(t),n=e.siblingGap/2,r=0<this.dx?-1:1,e=i.dy+r*(e.height+n)/2,n=i.dy+r*this.rootSize.height/4,i=this.gap/2,r=1.5*i+Math.max(this.getLWidth(this.siblings,this.rootSize),this.getTBOverlap(this.siblings,this.rootSize));return[t.clone().offset(i,0),t.clone().offset(i,e),t.clone().offset(r,e),t.clone().offset(r,n)]}}),zn=z.extend({direction:"L",oppositeDirection:"R",deltaCoordinate:"dx",marginDimension:"height",getConnectionPoint:function(t){return r.g.point(-t.width/2,0)},moveRootBehindSiblings:function(t,i){this.dx-=Math.max(this.getRWidth(t,i),this.getTBOverlap(t,i)),this.dy+=(this.getTHeight(t)-this.getBHeight(t))/2},moveRootFromParent:function(){this.dx-=this.parentGap+this.rootOffset},getRelativeVertices:function(t,i){var t=this.getConnectionPoint(t),e=-this.parentGap/2;return[t.clone().offset(e,0),t.clone().offset(e,i.dy)]},getRelativeVerticesAvoidingSiblings:function(t,i,e){var t=this.getConnectionPoint(t),n=0<this.dx?-1:1,e=i.dy+n*(e.height+e.siblingGap/2)/2,i=i.dy+n*this.rootSize.height/4,n=this.gap/2,r=1.5*n+Math.max(this.getRWidth(this.siblings,this.rootSize),this.getTBOverlap(this.siblings,this.rootSize));return[t.clone().offset(-n,0),t.clone().offset(-n,e),t.clone().offset(-r,e),t.clone().offset(-r,i)]}}),Hn=z.extend({direction:"T",oppositeDirection:"B",deltaCoordinate:"dy",marginDimension:"width",getConnectionPoint:function(t){return r.g.point(0,-t.height/2)},moveRootBehindSiblings:function(t,i){this.dx+=this.getRootDX(t,i),this.hasHorizontalSiblings(t)&&(this.dy-=(this.getLRHeight()-i.height)/2),this.dy-=this.getBHeight(t)},moveRootFromParent:function(){this.dy-=this.parentGap+this.rootOffset},getRelativeVertices:function(t,i){var t=this.getConnectionPoint(t),e=-this.getTXHeight(this.parentArea.siblings)-this.parentGap/2;return[t.clone().offset(0,e),t.clone().offset(i.dx,e)]},getRelativeVerticesAvoidingSiblings:function(t,i){var t=this.getConnectionPoint(t),e=this.siblings,n=e.B,r=this.getTXHeight(this.parentArea.siblings)+this.parentGap/2,o=r+n.height,s=(o+=this.getBXHeight(this.siblings)+this.parentGap/4,this.dy<0?-1:1),e=e[0<s?"BR":"BL"].width,a=i.dx,e=(a+=s*(Math.max(e,n.width/2)+n.siblingGap/4),i.dx+s*this.rootSize.width/4);return[t.clone().offset(0,-r),t.clone().offset(a,-r),t.clone().offset(a,-o),t.clone().offset(e,-o)]}}),kn=z.extend({direction:"B",oppositeDirection:"T",deltaCoordinate:"dy",marginDimension:"width",getConnectionPoint:function(t){return r.g.point(0,t.height/2)},moveRootBehindSiblings:function(t,i){this.dx+=this.getRootDX(t,i),this.dy+=this.getTHeight(t),this.hasHorizontalSiblings(t)&&(this.dy+=(this.getLRHeight()-i.height)/2)},moveRootFromParent:function(){this.dy+=this.parentGap+this.rootOffset},getRelativeVertices:function(t,i){var t=this.getConnectionPoint(t),e=this.getBXHeight(this.parentArea.siblings)+this.parentGap/2;return[t.clone().offset(0,e),t.clone().offset(i.dx,e)]},getRelativeVerticesAvoidingSiblings:function(t,i){var t=this.getConnectionPoint(t),e=this.siblings,n=e.T,r=this.getBXHeight(this.parentArea.siblings)+this.parentGap/2,o=r+n.height,s=(o+=this.getTXHeight(e)+this.parentGap/4,this.dy<0?-1:1),e=e[0<s?"TR":"TL"].width,a=i.dx,e=(a+=s*(Math.max(e,n.width/2)+n.siblingGap/4),i.dx+s*this.rootSize.width/4);return[t.clone().offset(0,r),t.clone().offset(a,r),t.clone().offset(a,o),t.clone().offset(e,o)]}}),Dn=z.extend({direction:"BR",oppositeDirection:"L",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return r.g.point(0,t.height/2)},getCY:function(){return this.prevSiblingGap},moveRootBehindSiblings:function(t,i){var e=Math.max(t.T.width,t.B.width);this.dx+=Math.max(this.getLWidth(t,i),(e-i.width)/2),this.dy+=this.getTHeight(t),this.hasHorizontalSiblings(t)&&(this.dy+=(this.getLRHeight()-i.height)/2)},moveRootFromParent:function(){var t=this.parentArea;t&&(this.dy+=t.firstChildGap),this.dx+=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,i){var e=this.getConnectionPoint(t),n=i.dx,i=i.dy,r=t.width,t=t.height,r=i-t/2<0?(r/2+(n-this.rootSize.width/2))/2:0;return[e.clone().offset(r,i-t/2)]},getRelativeVerticesAvoidingSiblings:function(t,i,e){var n=i.dx-this.rootSize.width/4,i=i.dy,i=(i+=Math.max(e.height,this.rootSize.height)/2)+this.getMinimalGap(e)/2;return[r.g.point(0,i),r.g.point(n,i)]}}),Xn=z.extend({direction:"BL",oppositeDirection:"R",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return r.g.point(0,t.height/2)},getCY:function(){return this.prevSiblingGap},moveRootBehindSiblings:function(t,i){var e=Math.max(t.T.width,t.B.width);this.dx-=Math.max(this.getRWidth(t,i),(e-i.width)/2),this.dy+=this.getTHeight(t),this.hasHorizontalSiblings(t)&&(this.dy+=(this.getLRHeight()-i.height)/2)},moveRootFromParent:function(){var t=this.parentArea;t&&(this.dy+=t.firstChildGap),this.dx-=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,i){var e=this.getConnectionPoint(t),n=i.dx,i=i.dy,r=t.width,t=t.height,r=i-t/2<0?(-r/2+(n+this.rootSize.width/2))/2:0;return[e.clone().offset(r,i-t/2)]},getRelativeVerticesAvoidingSiblings:function(t,i,e){var n=i.dx+this.rootSize.width/4,i=i.dy,i=(i+=Math.max(e.height,this.rootSize.height)/2)+this.getMinimalGap(e)/2;return[r.g.point(0,i),r.g.point(n,i)]}}),In=z.extend({direction:"TR",oppositeDirection:"L",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return r.g.point(0,t.height/2)},getCY:function(){return this.height-this.rootSize.height+this.prevSiblingGap},moveRootBehindSiblings:function(t,i){this.dx+=Math.max(this.getLWidth(t,i),this.getTBOverlap(t,i)),this.dy-=this.getBHeight(t),this.hasHorizontalSiblings(t)&&(this.dy-=(this.getLRHeight()-i.height)/2)},moveRootFromParent:function(){var t=this.parentArea;t&&(this.dy-=t.firstChildGap),this.dx+=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,i){var e=this.getConnectionPoint(t),n=i.dx,i=i.dy,r=t.width,t=t.height,r=0<i+t/2?(r/2+(n-this.rootSize.width/2))/2:0;return[e.clone().offset(r,i-t/2)]},getRelativeVerticesAvoidingSiblings:function(t,i,e){var n=i.dx-this.rootSize.width/4,i=i.dy,i=(i-=Math.max(e.height,this.rootSize.height)/2)-this.getMinimalGap(e)/2;return[r.g.point(0,i),r.g.point(n,i)]}}),Fn=z.extend({direction:"TL",oppositeDirection:"R",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return r.g.point(0,t.height/2)},getCY:function(){return this.height-this.rootSize.height+this.prevSiblingGap},moveRootBehindSiblings:function(t,i){this.dx-=Math.max(this.getRWidth(t,i),this.getTBOverlap(t,i)),this.dy-=this.getBHeight(t),this.hasHorizontalSiblings(t)&&(this.dy-=(this.getLRHeight()-i.height)/2)},moveRootFromParent:function(){var t=this.parentArea;t&&(this.dy-=t.firstChildGap),this.dx-=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,i){var e=this.getConnectionPoint(t),n=i.dx,i=i.dy,r=t.width,t=t.height,r=0<i+t/2?(-r/2+(n+this.rootSize.width/2))/2:0;return[e.clone().offset(r,i-t/2)]},getRelativeVerticesAvoidingSiblings:function(t,i,e){var n=i.dx+this.rootSize.width/4,i=i.dy,i=(i-=Math.max(e.height,this.rootSize.height)/2)-this.getMinimalGap(e)/2;return[r.g.point(0,i),r.g.point(n,i)]}}),m={rotate:function(t){var e="LRBT",n=e.indexOf(t[0])-e.indexOf(t[1]);return function(t){var i=e.indexOf(t);return 0<=i?e[(4+i-n)%4]:t}},flip:function(t){var i=t[0],e=t[1];return function(t){return t===i?e:t===e?i:t}},straighten:function(t){return function(){return t[1]}}},Vn=t.Model.extend({defaults:{graph:void 0,gap:20,parentGap:20,siblingGap:20,firstChildGap:20,direction:"R",directionRule:m.straighten,updatePosition:function(t,i,e){t.set("position",i,e)},updateVertices:function(t,i,e){t.set("vertices",i,e)},updateAttributes:null,filter:null,attributeNames:{}},initialize:function(){this._cacheOptions(this.attributes),this.layoutAreas={}},layout:function(t){this.layoutAreas={};for(var i=this.getGraphSources(t),e=0,n=i.length;e<n;e++)this.layoutTree(i[e],t);return this.trigger("layout:done",t),this},layoutTree:function(t,i){(i=i||{}).treeLayout=!0;t=this._computeLayoutAreas(t,null,i);return this._computeAbsolutePositions(t),this._updateCells(t,i),this},getLayoutBBox:function(){return this.getRootLayoutAreas().reduce(function(t,i){i=i.getBBox();return t?t.union(i):i},null)},getLayoutArea:function(t){return this.layoutAreas[t.id||t]||null},getRootLayoutAreas:function(){return this.getGraphSources().map(this.getLayoutArea,this)},getGraphSources:function(t){var i=this.graph.getSources();return i=this.filter&&0<i.length?this.filter(i,null,t)||i:i},getMinimalRootAreaByPoint:function(i){var t=this.getRootLayoutAreas().filter(function(t){return t.containsPoint(i)});return r.util.isEmpty(t)?null:t.reduce(function(t,i){return i.width*i.height<t.min&&(t.min=i.width*i.height,t.item=i),t},{min:1/0,item:void 0}).item},_computeLayoutAreas:function(t,i,e){for(var n=i?i.direction:this.get("direction"),n=t.get(this.getAttributeName("direction"))||n,r=z.create(n,t,this.attributes),o=(r.parentArea=i,r.link=this.graph.getConnectedLinks(t,{inbound:!0})[0],this._getChildren(t,e)),s=(this.layoutAreas[t.id]=r,[]),a=0,h=o.length;a<h;a++)s.push(this._computeLayoutAreas(o[a],r,e));return r.compute(s),r},_cacheOptions:function(i){["updateAttributes","updateVertices","updatePosition","filter"].forEach(function(t){this[t]=r.util.isFunction(i[t])?i[t]:null},this),this.graph=i.graph},_getChildren:function(t,i){var e;return this.layoutAreas[t.id]?[]:(e=this.graph.getNeighbors(t,{outbound:!0}),this.filter&&0<e.length&&this.filter(e,t,i)||e)},_computeAbsolutePositions:function(t){t.computeAbsolutePosition(t);for(var i=0,e=t.childAreas.length;i<e;i++)this._computeAbsolutePositions(t.childAreas[i])},_updateCells:function(t,i){var e=t.root,n=t.link||null;n&&(this.updatePosition&&this.updatePosition(e,t.getRootPosition(),i),this.updateVertices&&this.updateVertices(n,t.getRootVertices(),i)),this.changeSiblingRank(e,t.siblingRank,i),this.updateAttributes&&this.updateAttributes(t,e,n,i);for(var r=0,o=t.childAreas.length;r<o;r++)this._updateCells(t.childAreas[r],i)},updateDirections:function(t,i,e){e=e||{};var n=this.getAttributeName("direction"),r=this.get("directionRule")(i);this.graph.search(t,function(t,i){0!==i&&(i=r(t.get(n)),this.changeDirection(t,i,e))}.bind(this),{outbound:!0})},reconnectElement:function(t,i,e){e=e||{};var n=this.getLayoutArea(t),r=n.link;return!!r&&(r.set("source",{id:i.id||i},e),r=n.direction,i=e.direction||r,n=e.siblingRank||void 0,this.changeSiblingRank(t,n,e),this.changeDirection(t,i,e),r!==i&&this.updateDirections(t,[r,e.direction],e),!0)},changeSiblingRank:function(t,i,e){t.set(this.getAttributeName("siblingRank"),i,e)},changeDirection:function(t,i,e){t.set(this.getAttributeName("direction"),i,e)},getAttributeName:function(t){return this.get("attributeNames")[t]||t},getAttribute:function(t,i){return t.get(this.getAttributeName(i))},prepare:function(){return this}},{directionRules:m});H.TreeLayout=Vn}(this.joint.layout=this.joint.layout||{},Backbone,joint);