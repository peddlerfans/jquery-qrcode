/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(M,p,h){"use strict";h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function L(t,e){return t(e={exports:{}},e.exports),e.exports}function B(t){return t&&t.Math==Math&&t}function V(e,n){try{lt(b,e,{value:n,configurable:!0,writable:!0})}catch(t){b[e]=n}return n}function c(t){try{return!!t()}catch(t){return!0}}function z(t){return ht?ft(t):function(){return dt.apply(t,arguments)}}function e(t){if("Function"===u(t))return z(t)}function _(t){if(bt(t))throw mt("Can't call method on "+t);return t}function F(t){return yt(_(t))}function H(t){return"Symbol("+(void 0===t?"":t)+")_"+Ot(++xt+$t,36)}function n(t,e){return arguments.length<2?(n=b[t],a(n)?n:void 0):b[t]&&b[t][e];var n}function i(t){var e;return m(jt,t)&&(Ct||"string"==typeof jt[t])||(e="Symbol."+t,Ct&&m(At,t)?jt[t]=At[t]:jt[t]=(Tt&&kt?kt:Rt)(e)),jt[t]}function W(t){return t=function(t,e){if(!v(t)||Ft(t))return t;var n=Ut(t,Yt);if(n){if(n=x(n,t,e=void 0===e?"default":e),!v(n)||Ft(n))return n;throw Xt("Can't convert object to primitive value")}return qt(t,e=void 0===e?"number":e)}(t,"string"),Ft(t)?t:t+""}function G(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function U(t){return ue[t]||(ue[t]=H(t))}function K(t,e,n,i){var o=(i=i||{}).enumerable,r=void 0!==i.name?i.name:e;if(a(n)&&de(n,r,i),i.global)o?t[e]=n:V(e,n);else{try{i.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:O.f(t,e,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return t}function q(t){return $e(_(t))}function X(t,e){return(t=je(t))<0?Ae(t+e,0):ke(t,e)}function Y(t){return Ie(t.length)}function J(u){return function(t,e,n){var i,o=q(t),r=Y(o),s=X(n,r);if(u&&e!=e){for(;s<r;)if((i=o[s++])!=i)return!0}else for(;s<r;s++)if((u||s in o)&&o[s]===e)return u||s||0;return!u&&-1}}function Q(t,e){var n,i=q(t),o=0,r=[];for(n in i)!m(ce,n)&&m(i,n)&&De(r,n);for(;e.length>o;)!m(i,n=e[o++])||~Pe(r,n)||De(r,n);return r}function Z(t,e){return(t=He[Fe(t)])==Ge||t!=We&&(a(e)?c(e):!!e)}function o(t,e){var n,i,o,r=t.target,s=t.global,u=t.stat,c=s?b:u?b[r]||V(r,{}):(b[r]||{}).prototype;if(c)for(n in e){if(i=e[n],o=t.dontCallGetSet?(o=Ke(c,n))&&o.value:c[n],!Ue(s?n:r+(u?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;for(var a=i,l=o,p=v=g=f=d=h=void 0,h=ze(l),d=O.f,f=Se.f,g=0;g<h.length;g++){var v=h[g];m(a,v)||p&&m(p,v)||d(a,v,f(l,v))}}(t.sham||o&&o.sham)&&se(i,"sham",!0),K(c,n,i,t)}}function tt(){}function et(t){if(!a(t))return!1;try{return Ze(tt,Qe,t),!0}catch(t){return!1}}function nt(t){if(!a(t))return!1;switch(be(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return nn||!!en(tn,re(t))}catch(t){return!0}}function it(t,e){var n,t=w(t).constructor;if(void 0===t||bt(n=w(t)[sn]))return e;if(on(t=n))return t;throw rn(Wt(t)+" is not a constructor")}function ot(t,e){return $(t),void 0===e?t:ht?ln(t,e):function(){return t.apply(e,arguments)}}var rt,st,r,ut,ct,at,b=B("object"==typeof globalThis&&globalThis)||B("object"==typeof window&&window)||B("object"==typeof self&&self)||B("object"==typeof t&&t)||function(){return this}()||Function("return this")(),lt=Object.defineProperty,t="__core-js_shared__",pt=b[t]||V(t,{}),t=L(function(t){(t.exports=function(t,e){return pt[t]||(pt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),ht=!c(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),s=Function.prototype,dt=s.call,ft=ht&&s.bind.bind(dt,dt),gt=z({}.toString),vt=z("".slice),u=function(t){return vt(gt(t),8,-1)},bt=function(t){return null==t},mt=TypeError,yt=Object,wt=e({}.hasOwnProperty),m=Object.hasOwn||function(t,e){return wt(F(t),e)},xt=0,$t=Math.random(),Ot=e(1..toString),s="object"==typeof document&&document.all,s={all:s,IS_HTMLDDA:void 0===s&&void 0!==s},St=s.all,a=s.IS_HTMLDDA?function(t){return"function"==typeof t||t===St}:function(t){return"function"==typeof t},l=n("navigator","userAgent")||"",d=b.process,f=b.Deno,d=d&&d.versions||f&&f.version,f=d&&d.v8,Et=S=!(S=f?0<(y=f.split("."))[0]&&y[0]<4?1:+(y[0]+y[1]):S)&&l&&(!(y=l.match(/Edge\/(\d+)/))||74<=y[1])&&(y=l.match(/Chrome\/(\d+)/))?+y[1]:S,Ct=!!Object.getOwnPropertySymbols&&!c(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Et&&Et<41}),Tt=Ct&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,jt=t("wks"),At=b.Symbol,kt=At&&At.for,Rt=Tt?At:At&&At.withoutSetter||H,d={},f=(d[i("toStringTag")]="z","[object z]"===String(d)),g=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),It=s.all,v=s.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:a(t)||t===It}:function(t){return"object"==typeof t?null!==t:a(t)},Pt=b.document,Dt=v(Pt)&&v(Pt.createElement),Nt=function(t){return Dt?Pt.createElement(t):{}},Mt=!g&&!c(function(){return 7!=Object.defineProperty(Nt("div"),"a",{get:function(){return 7}}).a}),y=g&&c(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Lt=String,Bt=TypeError,w=function(t){if(v(t))return t;throw Bt(Lt(t)+" is not an object")},Vt=Function.prototype.call,x=ht?Vt.bind(Vt):function(){return Vt.apply(Vt,arguments)},zt=e({}.isPrototypeOf),_t=Object,Ft=Tt?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return a(e)&&zt(e.prototype,_t(t))},Ht=String,Wt=function(t){try{return Ht(t)}catch(t){return"Object"}},Gt=TypeError,$=function(t){if(a(t))return t;throw Gt(Wt(t)+" is not a function")},Ut=function(t,e){t=t[e];return bt(t)?void 0:$(t)},Kt=TypeError,qt=function(t,e){var n,i;if("string"===e&&a(n=t.toString)&&!v(i=x(n,t)))return i;if(a(n=t.valueOf)&&!v(i=x(n,t)))return i;if("string"!==e&&a(n=t.toString)&&!v(i=x(n,t)))return i;throw Kt("Can't convert object to primitive value")},Xt=TypeError,Yt=i("toPrimitive"),Jt=TypeError,Qt=Object.defineProperty,Zt=Object.getOwnPropertyDescriptor,te="enumerable",ee="configurable",ne="writable",O={f:g?y?function(t,e,n){var i;return w(t),e=W(e),w(n),"function"==typeof t&&"prototype"===e&&"value"in n&&ne in n&&!n[ne]&&((i=Zt(t,e))&&i[ne]&&(t[e]=n.value,n={configurable:(ee in n?n:i)[ee],enumerable:(te in n?n:i)[te],writable:!1})),Qt(t,e,n)}:Qt:function(t,e,n){if(w(t),e=W(e),w(n),Mt)try{return Qt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Jt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},S=Function.prototype,d=g&&Object.getOwnPropertyDescriptor,s=m(S,"name"),ie={EXISTS:s,PROPER:s&&"something"===function(){}.name,CONFIGURABLE:s&&(!g||d(S,"name").configurable)},oe=e(Function.toString),re=(a(pt.inspectSource)||(pt.inspectSource=function(t){return oe(t)}),pt.inspectSource),s=b.WeakMap,d=a(s)&&/native code/.test(String(s)),se=g?function(t,e,n){return O.f(t,e,G(1,n))}:function(t,e,n){return t[e]=n,t},ue=t("keys"),ce={},ae="Object already initialized",le=b.TypeError,S=b.WeakMap,pe=d||pt.state?((r=pt.state||(pt.state=new S)).get=r.get,r.has=r.has,r.set=r.set,rt=function(t,e){if(r.has(t))throw le(ae);return e.facade=t,r.set(t,e),e},st=function(t){return r.get(t)||{}},function(t){return r.has(t)}):(ut=U("state"),ce[ut]=!0,rt=function(t,e){if(m(t,ut))throw le(ae);return e.facade=t,se(t,ut,e),e},st=function(t){return m(t,ut)?t[ut]:{}},function(t){return m(t,ut)}),he={set:rt,get:st,has:pe,enforce:function(t){return pe(t)?st(t):rt(t,{})},getterFor:function(e){return function(t){if(v(t)&&(t=st(t)).type===e)return t;throw le("Incompatible receiver, "+e+" required")}}},de=L(function(t){var i=ie.CONFIGURABLE,o=he.enforce,e=he.get,r=Object.defineProperty,s=g&&!c(function(){return 8!==r(function(){},"length",{value:8}).length}),u=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!m(t,"name")||i&&t.name!==e)&&(g?r(t,"name",{value:e,configurable:!0}):t.name=e),s&&n&&m(n,"arity")&&t.length!==n.arity&&r(t,"length",{value:n.arity});try{n&&m(n,"constructor")&&n.constructor?g&&r(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=o(t);return m(n,"source")||(n.source=u.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return a(this)&&e(this).source||re(this)},"toString")}),fe=i("toStringTag"),ge=Object,ve="Arguments"==u(function(){return arguments}()),be=f?u:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=ge(t),fe))?e:ve?u(t):"Object"==(e=u(t))&&a(t.callee)?"Arguments":e},s=(f||K(Object.prototype,"toString",f?{}.toString:function(){return"[object "+be(this)+"]"},{unsafe:!0}),{}.propertyIsEnumerable),me=Object.getOwnPropertyDescriptor,ye={f:me&&!s.call({1:2},1)?function(t){t=me(this,t);return!!t&&t.enumerable}:s},we=Object,xe=e("".split),$e=c(function(){return!we("z").propertyIsEnumerable(0)})?function(t){return"String"==u(t)?xe(t,""):we(t)}:we,Oe=Object.getOwnPropertyDescriptor,Se={f:g?Oe:function(t,e){if(t=q(t),e=W(e),Mt)try{return Oe(t,e)}catch(t){}if(m(t,e))return G(!x(ye.f,t,e),t[e])}},Ee=Math.ceil,Ce=Math.floor,Te=Math.trunc||function(t){t=+t;return(0<t?Ce:Ee)(t)},je=function(t){t=+t;return t!=t||0==t?0:Te(t)},Ae=Math.max,ke=Math.min,Re=Math.min,Ie=function(t){return 0<t?Re(je(t),9007199254740991):0},d={includes:J(!0),indexOf:J(!1)},Pe=d.indexOf,De=e([].push),Ne=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Me=Ne.concat("length","prototype"),Le={f:Object.getOwnPropertyNames||function(t){return Q(t,Me)}},Be={f:Object.getOwnPropertySymbols},Ve=e([].concat),ze=n("Reflect","ownKeys")||function(t){var e=Le.f(w(t)),n=Be.f;return n?Ve(e,n(t)):e},_e=/#|\.prototype\./,Fe=Z.normalize=function(t){return String(t).replace(_e,".").toLowerCase()},He=Z.data={},We=Z.NATIVE="N",Ge=Z.POLYFILL="P",Ue=Z,Ke=Se.f,E="process"==u(b.process),qe=String,Xe=TypeError,S=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,t={};try{(n=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),i=t instanceof Array}catch(t){}return function(t,e){return w(t),function(t){if("object"==typeof t||a(t))return;throw Xe("Can't set "+qe(t)+" as a prototype")}(e),i?n(t,e):t.__proto__=e,t}}():void 0),f=O.f,s=i("toStringTag"),Ye=i("species"),Je=TypeError,Qe=[],Ze=n("Reflect","construct"),tn=/^\s*(?:class|function)\b/,en=e(tn.exec),nn=!tn.exec(tt),on=(nt.sham=!0,!Ze||c(function(){var t;return et(et.call)||!et(Object)||!et(function(){t=!0})||t})?nt:et),rn=TypeError,sn=i("species"),C=Function.prototype,un=C.apply,cn=C.call,an="object"==typeof Reflect&&Reflect.apply||(ht?cn.bind(un):function(){return cn.apply(un,arguments)}),ln=e(e.bind),pn=n("document","documentElement"),hn=e([].slice),dn=TypeError,C=/(?:ipad|iphone|ipod).*applewebkit/i.test(l),T=b.setImmediate,j=b.clearImmediate,fn=b.process,gn=b.Dispatch,vn=b.Function,A=b.MessageChannel,bn=b.String,mn=0,yn={},wn="onreadystatechange";try{ct=b.location}catch(t){}function xn(t){return function(){Ln(t)}}function $n(t){Ln(t.data)}function On(t){b.postMessage(bn(t),ct.protocol+"//"+ct.host)}function Sn(){this.head=null,this.tail=null}function En(t){var n,i;this.promise=new t(function(t,e){if(void 0!==n||void 0!==i)throw qn("Bad Promise constructor");n=t,i=e}),this.resolve=$(n),this.reject=$(i)}function Cn(t,e){var n,i,o,r,s=e.value,u=e.state==pi,c=u?t.ok:t.fail,a=t.resolve,l=t.reject,p=t.domain;try{c?(u||(e.rejection===fi&&(r=e,x(Yn,b,function(){var t=r.facade;E?ri.emit("rejectionHandled",t):bi(li,t,r.value)})),e.rejection=di),!0===c?n=s:(p&&p.enter(),n=c(s),p&&(p.exit(),o=!0)),n===t.promise?l(ii("Promise-chain cycle")):(i=gi(n))?x(i,n,a,l):a(n)):l(s)}catch(t){p&&!o&&p.exit(),l(t)}}var Tn,jn,An,kn,Rn,In,Pn,Dn,Nn,Mn,Ln=function(t){var e;m(yn,t)&&(e=yn[t],delete yn[t],e())},A=(T&&j||(T=function(t){var e=arguments.length,n=1;if(e<n)throw dn("Not enough arguments");var i=a(t)?t:vn(t),o=hn(arguments,1);return yn[++mn]=function(){an(i,void 0,o)},at(mn),mn},j=function(t){delete yn[t]},E?at=function(t){fn.nextTick(xn(t))}:gn&&gn.now?at=function(t){gn.now(xn(t))}:A&&!C?(k=(A=new A).port2,A.port1.onmessage=$n,at=ot(k.postMessage,k)):b.addEventListener&&a(b.postMessage)&&!b.importScripts&&ct&&"file:"!==ct.protocol&&!c(On)?(at=On,b.addEventListener("message",$n,!1)):at=wn in Nt("script")?function(t){pn.appendChild(Nt("script"))[wn]=function(){pn.removeChild(this),Ln(t)}}:function(t){setTimeout(xn(t),0)}),{set:T,clear:j}),k=/ipad|iphone|ipod/i.test(l)&&void 0!==b.Pebble,T=/web0s(?!.*chrome)/i.test(l),j=Se.f,Bn=A.set,l=b.MutationObserver||b.WebKitMutationObserver,R=b.document,Vn=b.process,I=b.Promise,j=j(b,"queueMicrotask"),j=j&&j.value,zn=(j||(Tn=function(){var t,e;for(E&&(t=Vn.domain)&&t.exit();jn;){e=jn.fn,jn=jn.next;try{e()}catch(t){throw jn?kn():An=void 0,t}}An=void 0,t&&t.enter()},kn=C||E||T||!l||!R?!k&&I&&I.resolve?((C=I.resolve(void 0)).constructor=I,Pn=ot(C.then,C),function(){Pn(Tn)}):E?function(){Vn.nextTick(Tn)}:(Bn=ot(Bn,b),function(){Bn(Tn)}):(Rn=!0,In=R.createTextNode(""),new l(Tn).observe(In,{characterData:!0}),function(){In.data=Rn=!Rn})),j||function(t){t={fn:t,next:void 0};An&&(An.next=t),jn||(jn=t,kn()),An=t}),_n=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Fn=(Sn.prototype={add:function(t){t={item:t,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},Sn),P=b.Promise,Hn="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Wn=!Hn&&!E&&"object"==typeof window&&"object"==typeof document,Gn=(P&&P.prototype,i("species")),Un=!1,Kn=a(b.PromiseRejectionEvent),T={CONSTRUCTOR:Ue("Promise",function(){var t=re(P),e=t!==String(P);if(!e&&66===Et)return!0;if(!Et||Et<51||!/native code/.test(t)){var t=new P(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((t.constructor={})[Gn]=n,!(Un=t.then(function(){})instanceof n))return!0}return!e&&(Wn||Hn)&&!Kn}),REJECTION_EVENT:Kn,SUBCLASSING:Un},qn=TypeError,Xn={f:function(t){return new En(t)}},Yn=A.set,Jn="Promise",k=T.CONSTRUCTOR,Qn=T.REJECTION_EVENT,I=T.SUBCLASSING,Zn=he.getterFor(Jn),ti=he.set,C=P&&P.prototype,ei=P,ni=C,ii=b.TypeError,oi=b.document,ri=b.process,si=Xn.f,ui=si,ci=!!(oi&&oi.createEvent&&b.dispatchEvent),ai="unhandledrejection",li="rejectionhandled",pi=1,hi=2,di=1,fi=2,gi=function(t){var e;return!(!v(t)||!a(e=t.then))&&e},vi=function(n,o){n.notified||(n.notified=!0,zn(function(){for(var t,i,e=n.reactions;t=e.get();)Cn(t,n);n.notified=!1,o&&!n.rejection&&(i=n,x(Yn,b,function(){var t=i.facade,e=i.value,n=mi(i);if(n&&(n=_n(function(){E?ri.emit("unhandledRejection",e,t):bi(ai,t,e)}),i.rejection=E||mi(i)?fi:di,n.error))throw n.value}))}))},bi=function(t,e,n){var i;ci?((i=oi.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),b.dispatchEvent(i)):i={promise:e,reason:n},!Qn&&(e=b["on"+t])?e(i):t===ai&&function(t,e){var n=b.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},mi=function(t){return t.rejection!==di&&!t.parent},yi=function(e,n,i){return function(t){e(n,t,i)}},wi=function(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=hi,vi(t,!0))},xi=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw ii("Promise can't be resolved itself");var i=gi(t);i?zn(function(){var e={done:!1};try{x(i,t,yi(xi,e,n),yi(wi,e,n))}catch(t){wi(e,t,n)}}):(n.value=t,n.state=pi,vi(n,!1))}catch(t){wi({done:!1},t,n)}}};if(k&&(ni=(ei=function(t){!function(t,e){if(zt(e,t))return;throw Je("Incorrect invocation")}(this,ni),$(t),x(Dn,this);var e=Zn(this);try{t(yi(xi,e),yi(wi,e))}catch(t){wi(e,t)}}).prototype,(Dn=function(t){ti(this,{type:Jn,done:!1,notified:!1,parent:!1,reactions:new Fn,rejection:!1,state:0,value:void 0})}).prototype=K(ni,"then",function(t,e){var n=Zn(this),i=si(it(this,ei));return n.parent=!0,i.ok=!a(t)||t,i.fail=a(e)&&e,i.domain=E?ri.domain:void 0,0==n.state?n.reactions.add(i):zn(function(){Cn(i,n)}),i.promise}),Nn=function(){var t=new Dn,e=Zn(t);this.promise=t,this.resolve=yi(xi,e),this.reject=yi(wi,e)},Xn.f=si=function(t){return t===ei||void 0===t?new Nn:ui(t)},a(P)&&C!==Object.prototype)){Mn=C.then,I||K(C,"then",function(t,e){var n=this;return new ei(function(t,e){x(Mn,n,t,e)}).then(t,e)},{unsafe:!0});try{delete C.constructor}catch(t){}S&&S(C,ni)}o({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:ei}),l=!(R=Jn),(j=(j=ei)&&!l?j.prototype:j)&&!m(j,s)&&f(j,s,{configurable:!0,value:R}),A=n(A=Jn),I=O.f,g&&A&&!A[Ye]&&I(A,Ye,{configurable:!0,get:function(){return this}});function $i(t,e,n){var i,o;w(t);try{if(!(i=Ut(t,"return"))){if("throw"===e)throw n;return}i=x(i,t)}catch(t){o=!0,i=t}if("throw"===e)throw n;if(o)throw i;w(i)}function Oi(t,e){this.stopped=t,this.result=e}function Si(t,e,n){function i(t){return r&&$i(r,"normal",t),new Oi(!0,t)}function o(t){return h?(w(t),g?v(t[0],t[1],i):v(t[0],t[1])):g?v(t,i):v(t)}var r,s,u,c,a,l,p=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),g=!(!n||!n.INTERRUPTED),v=ot(e,p);if(d)r=t.iterator;else if(f)r=t;else{if(!(n=Ai(t)))throw Ri(Wt(t)+" is not iterable");if(void 0!==(e=n)&&(Ei.Array===e||Ti[Ci]===e)){for(s=0,u=Y(t);s<u;s++)if((c=o(t[s]))&&zt(Ii,c))return;return}r=function(t,e){e=arguments.length<2?Ai(t):e;if($(e))return w(x(e,t));throw ki(Wt(t)+" is not iterable")}(t,n)}for(a=(d?t:r).next;!(l=x(a,r)).done;){try{c=o(l.value)}catch(t){$i(r,"throw",t)}if("object"==typeof c&&c&&zt(Ii,c))return}}var Ei={},Ci=i("iterator"),Ti=Array.prototype,ji=i("iterator"),Ai=function(t){if(!bt(t))return Ut(t,ji)||Ut(t,"@@iterator")||Ei[be(t)]},ki=TypeError,Ri=TypeError,Ii=Oi.prototype,Pi=i("iterator"),Di=!1;try{var Ni=0,Mi={next:function(){return{done:!!Ni++}},return:function(){Di=!0}};Mi[Pi]=function(){return this},Array.from(Mi,function(){throw 2})}catch(t){}S=T.CONSTRUCTOR||!function(t,e){if(!e&&!Di)return!1;var n=!1;try{var i={};i[Pi]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}(function(t){P.all(t).then(void 0,function(){})}),o({target:"Promise",stat:!0,forced:S},{all:function(t){var u=this,e=Xn.f(u),c=e.resolve,a=e.reject,n=_n(function(){var i=$(u.resolve),o=[],r=0,s=1;Si(t,function(t){var e=r++,n=!1;s++,x(i,u,t).then(function(t){n||(n=!0,o[e]=t,--s||c(o))},a)}),--s||c(o)});return n.error&&a(n.value),e.promise}}),C=T.CONSTRUCTOR,k=P&&P.prototype;o({target:"Promise",proto:!0,forced:C,real:!0},{catch:function(t){return this.then(void 0,t)}}),a(P)&&(l=n("Promise").prototype.catch,k.catch!==l&&K(k,"catch",l,{unsafe:!0})),o({target:"Promise",stat:!0,forced:S},{race:function(t){var n=this,i=Xn.f(n),o=i.reject,e=_n(function(){var e=$(n.resolve);Si(t,function(t){x(e,n,t).then(i.resolve,o)})});return e.error&&o(e.value),i.promise}});o({target:"Promise",stat:!0,forced:T.CONSTRUCTOR},{reject:function(t){var e=Xn.f(this);return x(e.reject,void 0,t),e.promise}});function Li(t,e){return new(Xi(t))(0===e?0:e)}function Bi(h){var d=1==h,f=2==h,g=3==h,v=4==h,b=6==h,m=7==h,y=5==h||b;return function(t,e,n,i){for(var o,r,s=F(t),u=$e(s),c=ot(e,n),a=Y(u),l=0,e=i||Li,p=d?e(t,a):f||m?e(t,0):void 0;l<a;l++)if((y||l in u)&&(r=c(o=u[l],l,s),h))if(d)p[l]=r;else if(r)switch(h){case 3:return!0;case 5:return o;case 6:return l;case 2:Yi(p,o)}else switch(h){case 4:return!1;case 7:Yi(p,o)}return b?-1:g||v?v:p}}function Vi(){}function zi(t){t.write(no("")),t.close();var e=t.parentWindow.Object;return t=null,e}function _i(t){so[ro][t]=!0}function Fi(t,e){var n=[][t];return!!n&&c(function(){n.call(null,e||function(){return 1},1)})}function Hi(e){if(e&&e.forEach!==fo)try{se(e,"forEach",fo)}catch(t){e.forEach=fo}}var Wi,Gi,f=T.CONSTRUCTOR,Ui=(n("Promise"),o({target:"Promise",stat:!0,forced:f},{resolve:function(t){return t=t,w(e=this),v(t)&&t.constructor===e?t:((0,(e=Xn.f(e)).resolve)(t),e.promise);var e}}),Array.isArray||function(t){return"Array"==u(t)}),Ki=i("species"),qi=Array,Xi=function(t){var e;return Ui(t)&&(e=t.constructor,(on(e)&&(e===qi||Ui(e.prototype))||v(e)&&null===(e=e[Ki]))&&(e=void 0)),void 0===e?qi:e},Yi=e([].push),j={forEach:Bi(0),map:Bi(1),filter:Bi(2),some:Bi(3),every:Bi(4),find:Bi(5),findIndex:Bi(6),filterReject:Bi(7)},Ji=Object.keys||function(t){return Q(t,Ne)},Qi={f:g&&!y?Object.defineProperties:function(t,e){w(t);for(var n,i=q(e),o=Ji(e),r=o.length,s=0;s<r;)O.f(t,n=o[s++],i[n]);return t}},Zi="prototype",to="script",eo=U("IE_PROTO"),no=function(t){return"<"+to+">"+t+"</"+to+">"},io=function(){try{Wi=new ActiveXObject("htmlfile")}catch(t){}io="undefined"==typeof document||document.domain&&Wi?zi(Wi):(t=Nt("iframe"),e="java"+to+":",t.style.display="none",pn.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(no("document.F=Object")),e.close(),e.F);for(var t,e,n=Ne.length;n--;)delete io[Zi][Ne[n]];return io()},oo=(ce[eo]=!0,Object.create||function(t,e){var n;return null!==t?(Vi[Zi]=w(t),n=new Vi,Vi[Zi]=null,n[eo]=t):n=io(),void 0===e?n:Qi.f(n,e)}),s=O.f,ro=i("unscopables"),so=Array.prototype,uo=(null==so[ro]&&s(so,ro,{configurable:!0,value:oo(null)}),j.find),R="find",co=!0,I=(R in[]&&Array(1)[R](function(){co=!1}),o({target:"Array",proto:!0,forced:co},{find:function(t){return uo(this,t,1<arguments.length?arguments[1]:void 0)}}),_i(R),ie.EXISTS),A=O.f,Ye=Function.prototype,ao=e(Ye.toString),lo=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,po=e(lo.exec),ho=(g&&!I&&A(Ye,"name",{configurable:!0,get:function(){try{return po(lo,ao(this))[1]}catch(t){return""}}}),j.forEach),fo=Fi("forEach")?[].forEach:function(t){return ho(this,t,1<arguments.length?arguments[1]:void 0)},go=(o({target:"Array",proto:!0,forced:[].forEach!=fo},{forEach:fo}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Mi=Nt("span").classList,C=Mi&&Mi.constructor&&Mi.constructor.prototype,k=C===Object.prototype?void 0:C;for(Gi in go)go[Gi]&&Hi(b[Gi]&&b[Gi].prototype);Hi(k);function vo(t){if(9007199254740991<t)throw To("Maximum allowed index exceeded")}function bo(t,e,n){(e=W(e))in t?O.f(t,e,G(0,n)):t[e]=n}function mo(e){return 51<=Et||!c(function(){var t=[];return(t.constructor={})[jo]=function(){return{foo:1}},1!==t[e](Boolean).foo})}function yo(t){if("Symbol"===be(t))throw TypeError("Cannot convert a Symbol value to a string");return Po(t)}function wo(e){return function(t){t=yo(_(t));return 1&e&&(t=Do(t,No,"")),t=2&e?Do(t,Mo,""):t}}function xo(){var t=w(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}function $o(t){if(v(e=t)&&(void 0!==(n=e[cr])?!!n:"RegExp"==u(e)))throw ar("The method doesn't accept regular expressions");var e,n;return t}o({target:"Object",stat:!0,forced:c(function(){Ji(1)})},{keys:function(t){return Ji(F(t))}});var Oo=Function,So=e([].concat),Eo=e([].join),Co={},l=ht?Oo.bind:function(s){var u=$(this),t=u.prototype,c=hn(arguments,1),a=function(){var t=So(c,hn(arguments));if(this instanceof a){var e=u,n=t.length,i=t;if(!m(Co,n)){for(var o=[],r=0;r<n;r++)o[r]="a["+r+"]";Co[n]=Oo("C,a","return new C("+Eo(o,",")+")")}return Co[n](e,i)}return u.apply(s,t)};return v(t)&&(a.prototype=t),a},To=(o({target:"Function",proto:!0,forced:Function.bind!==l},{bind:l}),TypeError),jo=i("species"),Ao=i("isConcatSpreadable"),S=51<=Et||!c(function(){var t=[];return t[Ao]=!1,t.concat()[0]!==t}),T=mo("concat"),f=(o({target:"Array",proto:!0,arity:1,forced:!S||!T},{concat:function(t){for(var e,n,i,o,r,s=F(this),u=Li(s,0),c=0,a=-1,l=arguments.length;a<l;a++)if(r=void 0,!v(o=i=-1===a?s:arguments[a])||(void 0!==(r=o[Ao])?!r:!Ui(o)))vo(c+1),bo(u,c++,i);else for(n=Y(i),vo(c+n),e=0;e<n;e++,c++)e in i&&bo(u,c,i[e]);return u.length=c,u}}),mo("slice")),ko=i("species"),Ro=Array,Io=Math.max,Po=(o({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var n,i,o,r=q(this),s=Y(r),u=X(t,s),c=X(void 0===e?s:e,s);if(Ui(r)&&(n=r.constructor,(n=on(n)&&(n===Ro||Ui(n.prototype))||v(n)&&null===(n=n[ko])?void 0:n)===Ro||void 0===n))return hn(r,u,c);for(i=new(void 0===n?Ro:n)(Io(c-u,0)),o=0;u<c;u++,o++)u in r&&bo(i,o,r[u]);return i.length=o,i}}),String),y="\t\n\v\f\r                　\u2028\u2029\ufeff",Do=e("".replace),s="["+y+"]",No=RegExp("^"+s+s+"*"),Mo=RegExp(s+s+"*$"),Lo={start:wo(1),end:wo(2),trim:wo(3)}.trim,Bo=b.parseInt,R=b.Symbol,Vo=R&&R.iterator,zo=/^[+-]?0x/i,_o=e(zo.exec),I=8!==Bo(y+"08")||22!==Bo(y+"0x16")||Vo&&!c(function(){Bo(Object(Vo))})?function(t,e){t=Lo(yo(t));return Bo(t,e>>>0||(_o(zo,t)?16:10))}:Bo,Fo=(o({global:!0,forced:parseInt!=I},{parseInt:I}),b.RegExp),A=c(function(){var t=Fo("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),Ye=A||c(function(){return!Fo("a","y").sticky}),Mi={BROKEN_CARET:A||c(function(){var t=Fo("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:Ye,UNSUPPORTED_Y:A},Ho=b.RegExp,C=c(function(){var t=Ho(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),Wo=b.RegExp,k=c(function(){var t=Wo("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),Go=he.get,Uo=t("native-string-replace",String.prototype.replace),Ko=RegExp.prototype.exec,qo=Ko,Xo=e("".charAt),Yo=e("".indexOf),Jo=e("".replace),Qo=e("".slice),Zo=(l=/b*/g,x(Ko,S=/a/,"a"),x(Ko,l,"a"),0!==S.lastIndex||0!==l.lastIndex),tr=Mi.BROKEN_CARET,er=void 0!==/()??/.exec("")[1],T=qo=Zo||er||tr||C||k?function(t){var e,n,i,o,r,s,u=this,c=Go(u),t=yo(t),a=c.raw;if(a)return a.lastIndex=u.lastIndex,p=x(qo,a,t),u.lastIndex=a.lastIndex,p;var l=c.groups,a=tr&&u.sticky,p=x(xo,u),c=u.source,h=0,d=t;if(a&&(p=Jo(p,"y",""),-1===Yo(p,"g")&&(p+="g"),d=Qo(t,u.lastIndex),0<u.lastIndex&&(!u.multiline||u.multiline&&"\n"!==Xo(t,u.lastIndex-1))&&(c="(?: "+c+")",d=" "+d,h++),e=new RegExp("^(?:"+c+")",p)),er&&(e=new RegExp("^"+c+"$(?!\\s)",p)),Zo&&(n=u.lastIndex),i=x(Ko,a?e:u,d),a?i?(i.input=Qo(i.input,h),i[0]=Qo(i[0],h),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:Zo&&i&&(u.lastIndex=u.global?i.index+i[0].length:n),er&&i&&1<i.length&&x(Uo,i[0],e,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)}),i&&l)for(i.groups=r=oo(null),o=0;o<l.length;o++)r[(s=l[o])[0]]=i[s[1]];return i}:qo,nr=(o({target:"RegExp",proto:!0,forced:/./.exec!==T},{exec:T}),e([].join)),f=$e!=Object,s=Fi("join",","),D=(o({target:"Array",proto:!0,forced:f||!s},{join:function(t){return nr(q(this),void 0===t?",":t)}}),p.mvc.View.extend({className:"widget",references:[],constructor:function(t,e){this.availableReferences=e||{},p.mvc.View.prototype.constructor.call(this,t)},updateAttrs:function(t){p.util.setAttributesBySelector(this.$el,t)},bindEvents:function(){},validateReferences:function(){var t=this.references||[],e=[];return t.forEach(function(t){void 0===this.availableReferences[t]&&e.push(t)},this),e},getReference:function(t){return this.availableReferences[t]},getReferences:function(){return this.availableReferences},enable:function(){},disable:function(){},isDisabled:function(){return!1}},{create:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=p.util.camelCase(p.util.isString(t)?t:t.type);if(!p.util.isFunction(n[i]))throw new Error('Widget: unable to find widget: "'+i+'"');n=new n[i](t,e),e=n.validateReferences(e);if(0<e.length)throw new Error('Widget: "'+i+'" missing dependency: '+e.join(", "));return n.render(),n.updateAttrs(t.attrs),n.bindEvents(),n.$el.attr("data-type",i),t.name&&n.$el.attr("data-name",t.name),n}})),ir=j.findIndex,R="findIndex",or=!0,rr=(R in[]&&Array(1)[R](function(){or=!1}),o({target:"Array",proto:!0,forced:or},{findIndex:function(t){return ir(this,t,1<arguments.length?arguments[1]:void 0)}}),_i(R),p.mvc.View.extend({className:"select-box",events:{"click .select-box-selection":"onToggle"},options:{options:[],width:void 0,openPolicy:"auto",target:null,keyboardNavigation:!0,selected:void 0,selectBoxOptionsClass:void 0,disabled:!1},init:function(){this.options.target=this.options.target||document.body,p.util.bindAll(this,"onOutsideClick","onOptionSelect"),h(document).on("click.selectBox",this.onOutsideClick),this.$el.data("view",this),void 0===this.options.selected?this.selection=p.util.toArray(this.options.options).find(function(t){return!0===t.selected})||this.options.options[0]:this.selection=this.options.options[this.options.selected]},render:function(){return this.$el.empty(),this.$selection=null,this.renderSelection(this.selection),this.options.width&&this.$el.css("width",this.options.width),this.options.disabled&&this.disable(),this.$el.append(this.$options),this},renderOptions:function(){this.removeOptions();var t=this.options,e={selectBoxView:this,parentClassName:p.util.result(this,"className")||null,extraClassName:p.util.result(t,"selectBoxOptionsClass")||null,options:t.options},e=(t.width&&(e.width=t.width),t.theme&&(e.theme=t.theme),this.optionsView=new this.constructor.OptionsView(e));e.render(),this.listenTo(e,"option:select",this.onOptionSelect),this.listenTo(e,"option:hover",this.onOptionHover),this.listenTo(e,"options:mouseout",this.onOptionsMouseOut),this.$options=e.$el,this.$optionsArrow=e.$arrow,this.$target=h(t.target)},onOptionHover:function(t,e){this.trigger("option:hover",t,e)},onOptionsMouseOut:function(t){this.trigger("options:mouseout",t)},onOptionSelect:function(t,e){this.select(t,e)},removeOptions:function(){this.optionsView&&(this.stopListening(this.optionsView),this.optionsView.remove(),this.optionsView=null)},renderSelection:function(t){this.$selection||(this.$selection=h("<div/>",{class:"select-box-selection"}),this.$el.append(this.$selection)),this.$selection.empty(),t?(t=this.constructor.OptionsView.prototype.renderOptionContent.call(void 0,t),this.$selection.append(t)):this.options.placeholder&&(t=h("<div/>",{class:"select-box-placeholder",html:this.options.placeholder}),this.$selection.append(t))},onToggle:function(t){this.toggle()},onOutsideClick:function(t){!this.el.contains(t.target)&&this.$el.hasClass("opened")&&this.close()},getSelection:function(){return this.selection},getSelectionValue:function(t){return(t=t||this.selection)&&(void 0===t.value?t.content:t.value)},getSelectionIndex:function(){return p.util.toArray(this.options.options).findIndex(function(t){return t===this.selection}.bind(this))},select:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.selection=this.options.options[t],this.renderSelection(this.selection),this.trigger("option:select",this.selection,t,e),this.close()},selectByValue:function(t,e){for(var n=this.options.options||[],i=0;i<n.length;i++){var o=n[i];if(void 0===o.value&&o.content===t)return this.select(i,e);if(void 0!==o.value&&p.util.isEqual(o.value,t))return this.select(i,e)}},isOpen:function(){return this.$el.hasClass("opened")},toggle:function(){this.isOpen()?this.close():this.open()},position:function(){var t=this.$(".select-box-selection"),e=t.outerHeight(),t=t.offset(),n=t.left,i=t.top,o=this.$options.outerHeight(),r={left:0,top:0},t=(this.options.target!==document.body?((r=this.$target.offset()).width=this.$target.outerWidth(),r.height=this.$target.outerHeight(),r.left-=this.$target.scrollLeft(),r.top-=this.$target.scrollTop()):(r.width=h(window).width(),r.height=h(window).height()),n),s="auto",n=this.options.openPolicy;switch(n="selected"!==n||this.selection?n:"auto"){case"above":s=i-o;break;case"coverAbove":s=i-o+e;break;case"below":s=i+e;break;case"coverBelow":s=i;break;case"selected":s=i-this.$options.find(".selected").position().top;break;default:s=i-this.$target.scrollTop()+o>r.top+r.height?i-o+e:i}t-=r.left,s-=r.top,this.$options.css({left:t,top:s})},open:function(){this.isDisabled()||(this.renderOptions(),this.$options.appendTo(this.options.target),this.$options.addClass("rendered"),this.position(),this.$el.addClass("opened"),this.respectWindowBoundaries(),this.alignOptionsArrow())},respectWindowBoundaries:function(){var t=this.calculateElOverflow(this.$options,this.$target),e={left:0,top:0};this.$options.outerWidth()<=this.$target.innerWidth()&&(t.left&&t.right||(t.left?e.left=t.left:t.right&&(e.left=-t.right))),this.$options.outerHeight()<=this.$target.innerHeight()&&(t.top&&t.bottom||(t.top?e.top=t.top:t.bottom&&(e.top=-t.bottom))),this.$options.css({left:"+="+e.left,top:"+="+e.top})},alignOptionsArrow:function(){var t=this.$el[0].getBoundingClientRect(),e=this.$options[0].getBoundingClientRect(),t=t.left+t.width/2,t=(t-=e.left)-this.$optionsArrow.outerWidth()/2;this.$optionsArrow.css({left:t})},close:function(){this.removeOptions(),this.$el.removeClass("opened"),this.trigger("close")},onRemove:function(){this.removeOptions(),h(document).off(".selectBox",this.onOutsideClick)},isDisabled:function(){return this.$el.hasClass("disabled")},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.close(),this.$el.addClass("disabled")},onSetTheme:function(t,e){this.$options&&(t&&this.$options.removeClass(this.themeClassNamePrefix+t),this.$options.addClass(this.themeClassNamePrefix+e))},calculateElOverflow:function(t,e){e=e||window,t instanceof h&&(t=t[0]),e instanceof h&&(e=e[0]);var n,i,o={},r=t.getBoundingClientRect();return i=e===window?{width:t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,left:0,top:0,right:t,bottom:n}:e.getBoundingClientRect(),["left","top"].forEach(function(t){o[t]=Math.min(0,r[t]-i[t])}),["right","bottom"].forEach(function(t){o[t]=Math.min(0,i[t]-r[t])}),p.util.forIn(o,function(t,e){o[e]=Math.abs(Math.round(t))}),o}},{OptionsView:p.mvc.View.extend({events:{"mouseover .select-box-option":"onOptionHover","click .select-box-option":"onOptionClick"},className:function(){var t=["select-box-options"],e=this.options.parentClassName;return e&&t.push(e),t.join(" ")},init:function(){p.util.bindAll(this,"onMouseout","onKeydown"),h(document).on({"keydown.selectBoxOptions":this.onKeydown,"mouseleave.selectBoxOptions mouseout.selectBoxOptions":this.onMouseout})},render:function(){var t=this.options.extraClassName;return t&&this.$el.addClass(t),this.options.width&&this.$el.css("width",this.options.width),p.util.toArray(this.options.options).forEach(function(t,e){e=this.renderOption(t,e);this.options.selectBoxView.selection===t&&e.addClass("selected hover"),this.$el.append(e)},this),this.$arrow=h("<div/>").addClass("select-box-options-arrow").appendTo(this.$el),this},renderOption:function(t,e){t=this.renderOptionContent(t);return t.addClass("select-box-option"),t.data("index",e),t},renderOptionContent:function(t){var e=h("<div/>",{class:"select-box-option-content",html:t.content});return t.icon&&e.prepend(h("<img/>",{class:"select-box-option-icon",src:t.icon})),e},select:function(t){this.trigger("option:select",t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})},hover:function(t){var e=this.options.options[t];this.markOptionHover(t),this.trigger("option:hover",e,t)},onOptionClick:function(t){t=this.getOptionIndex(t.target);this.select(t,{ui:!0})},onOptionHover:function(t){t=this.getOptionIndex(t.target);this.hover(t)},onMouseout:function(t){this.trigger("options:mouseout",t)},onKeydown:function(t){var e,n=this.options.selectBoxView;if(n.options.keyboardNavigation&&n.isOpen()){switch(t.which){case 39:case 40:e=1;break;case 38:case 37:e=-1;break;case 13:var i=this.getOptionHoverIndex();return void(0<=i&&this.select(i));case 27:return n.close();default:return}t.preventDefault();var t=this.getOptionHoverIndex()+e,o=this.options.options;(t=t<0?o.length-1:t)>=o.length&&(t=0),this.hover(t)}},onRemove:function(){h(document).off(".selectBoxOptions")},markOptionHover:function(t){this.$el.find(".hover").removeClass("hover"),h(this.$el.find(".select-box-option")[t]).addClass("hover")},getOptionHoverIndex:function(){return this.$el.find(".select-box-option.hover").index()},getOptionIndex:function(t){return h(t).closest(".select-box-option").data("index")}})})),sr=j.filter,ur=(o({target:"Array",proto:!0,forced:!mo("filter")},{filter:function(t){return sr(this,t,1<arguments.length?arguments[1]:void 0)}}),o({target:"Array",stat:!0},{isArray:Ui}),d.includes),cr=(o({target:"Array",proto:!0,forced:c(function(){return!Array(1).includes()})},{includes:function(t){return ur(this,t,1<arguments.length?arguments[1]:void 0)}}),_i("includes"),i("match")),ar=TypeError,lr=i("match"),pr=e("".indexOf),hr=(o({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[lr]=!1,"/./"[e](n)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~pr(yo(_(this)),yo($o(t)),1<arguments.length?arguments[1]:void 0)}}),j.map),dr=(o({target:"Array",proto:!0,forced:!mo("map")},{map:function(t){return hr(this,t,1<arguments.length?arguments[1]:void 0)}}),d.indexOf),fr=e([].indexOf),gr=!!fr&&1/fr([1],1,-0)<0,y=Fi("indexOf"),vr=(o({target:"Array",proto:!0,forced:gr||!y},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return gr?fr(this,t,e)||0:dr(this,t,e)}}),p.mvc.View.extend({className:"select-button-group",events:{"click .select-button-group-button":"onSelect","mouseover .select-button-group-button":"onOptionHover",mouseleave:"onMouseOut","mousedown .select-button-group-button":"pointerdown","touchstart .select-button-group-button":"pointerdown","mouseup .select-button-group-button":"pointerup","touchend .select-button-group-button":"pointerup"},options:{options:[],disabled:!1,multi:!1,selected:void 0,singleDeselect:!1,noSelectionValue:void 0,width:void 0,buttonWidth:void 0,buttonHeight:void 0,iconWidth:void 0,iconHeight:void 0},init:function(){p.util.bindAll(this,"onSelect","pointerup"),this.$el.data("view",this);var t,e=this.options.options,n=this.options.multi,i=this.options.selected;void 0===i?(t=p.util.toArray(e).filter(function(t){return t&&!0===t.selected}),this.selection=n?t:t[0]):this.selection=n?Array.isArray(i)?e.filter(function(t,e){return i.includes(e)}):[e[i]]:e[i]},render:function(){return this.renderOptions(this.selection),this.options.width&&this.$el.css("width",this.options.width),this.options.disabled&&this.disable(),this.$el.append(this.$options),this},renderOptions:function(){this.removeOptions(),p.util.toArray(this.options.options).forEach(function(t,e){var n=this.options.multi?this.selection.includes(t):this.selection===t,t=this.renderOption(t,e,n);this.$el.append(t),n&&t.addClass("selected")},this)},removeOptions:function(){this.$el.empty()},renderOption:function(t,e,n){n=this.renderOptionContent(t,n),n.data("index",e),e=t.buttonWidth||this.options.buttonWidth,e&&n.css("width",e),e=t.buttonHeight||this.options.buttonHeight;return e&&n.css("height",e),n},renderOptionContent:function(t,e){var n,i=h("<div/>",{class:"select-button-group-button",html:t.content});return(t.icon||e&&t.iconSelected)&&(e=h("<img/>",{class:"select-button-group-button-icon",src:e&&t.iconSelected?t.iconSelected:t.icon}),(n=t.iconWidth||this.options.iconWidth)&&e.css("width",n),(n=t.iconHeight||this.options.iconHeight)&&e.css("height",n),i.prepend(e)),p.util.setAttributesBySelector(i,t.attrs),i},getOptionIndex:function(t){return h(t).closest(".select-button-group-button").data("index")},onSelect:function(t){this.isDisabled()||(t=this.getOptionIndex(t.target),this.select(t,{ui:!0}))},onOptionHover:function(t){this.isDisabled()||(t=this.getOptionIndex(t.target),this.trigger("option:hover",this.options.options[t],t))},onMouseOut:function(t){this.isDisabled()||this.trigger("mouseout",t)},getSelection:function(){return this.selection},getSelectionValue:function(t){t=t||this.selection;var e,n=this.options.noSelectionValue;return this.options.multi?0===(e=p.util.toArray(t)).length?void 0!==n?n:[]:e.map(function(t){var e=t.value;return void 0!==e?e:t.content}):t?void 0!==(e=t.value)?e:t.content:void 0!==n?n:void 0},select:function(t,e){var n,i,o=h(this.$(".select-button-group-button")[t]),r=this.options.options[t],s=null,u=null,c=null,a=null,l=(this.options.multi?(o.toggleClass("selected"),o.hasClass("selected")?(c=t,-1===this.selection.indexOf(a=r)&&this.selection.push(r),r.iconSelected&&o.find(".select-button-group-button-icon").attr("src",r.iconSelected)):(s=t,this.selection=p.util.without(this.selection,u=r),r.iconSelected&&o.find(".select-button-group-button-icon").attr("src",r.icon))):(l=(n=this.$(".selected")).index(),i=this.options.options[l],o.toggleClass("selected"),o.hasClass("selected")?(i&&(s=l,u=i,n.removeClass("selected"),i.iconSelected&&n.find(".select-button-group-button-icon").attr("src",i.icon)),c=t,(this.selection=a=r).iconSelected&&o.find(".select-button-group-button-icon").attr("src",r.iconSelected)):this.options.singleDeselect?(s=t,u=r,this.selection=void 0,r.iconSelected&&o.find(".select-button-group-button-icon").attr("src",r.icon)):o.addClass("selected")),p.util.assign({},e));l.deselectedIndex=s,l.deselectedOption=u,l.selectedIndex=c,l.selectedOption=a,this.trigger("option:select",this.selection,t,l)},selectByValue:function(t,e){Array.isArray(t)||(t=[t]);for(var n=this.options.options||[],i=0;i<n.length;i++){var o=n[i];(void 0===o.value&&t.includes(o.content)||void 0!==o.value&&t.find(function(t){return p.util.isEqual(t,o.value)}))&&this.select(i,e)}},deselect:function(){this.$(".selected").removeClass("selected"),this.options.multi?this.selection=[]:this.selection=void 0},isDisabled:function(){return this.$el.hasClass("disabled")},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.$el.addClass("disabled")},pointerdown:function(t){t=this.getOptionIndex(t.target);h(this.$(".select-button-group-button")[t]).addClass("is-in-action"),h(document).on("mouseup.select-button-group touchend.select-button-group",this.pointerup)},pointerup:function(){this.$(".is-in-action").removeClass("is-in-action"),h(document).off("mouseup.select-button-group touchend.select-button-group")}})),I=D.extend({tagName:"label",events:{"change .input":"onChange",mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",click:"pointerclick"},documentEvents:{mouseup:"pointerup",touchend:"pointerup"},init:function(){p.util.bindAll(this,"pointerup")},render:function(){var t=this.options,e=h("<span/>").text(t.label||"");return this.$input=h("<input/>",{type:"checkbox",class:"input"}).prop("checked",!!t.value),this.$span=h("<span/>"),this.$el.append([e,this.$input,this.$span]),this},onChange:function(t){this.trigger("change",!!t.target.checked,t)},pointerdown:function(t){t=p.util.normalizeEvent(t),this.$el.addClass("is-in-action"),this.trigger("pointerdown",t),this.delegateDocumentEvents()},pointerclick:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerclick",t)},pointerup:function(t){t=p.util.normalizeEvent(t),this.undelegateDocumentEvents(),this.trigger("pointerup",t),this.$el.removeClass("is-in-action"),"touchend"===t.type&&(this.$input.trigger("click"),t.preventDefault())},isDisabled:function(){return this.$input.prop("disabled")},enable:function(){this.$el.removeClass("disabled"),this.$input.prop("disabled",!1)},disable:function(){this.$el.addClass("disabled"),this.$input.prop("disabled",!0)}}),Ye=D.extend({tagName:"label",events:{"change input.toggle":"onChange","click input.toggle":"pointerclick",mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup"},documentEvents:{mouseup:"pointerup",touchend:"pointerup"},init:function(){p.util.bindAll(this,"pointerup")},render:function(){var t=this.options,e=h("<span/>").text(t.label||""),n=h("<span><i/></span>"),t=(this.$input=h("<input/>",{type:"checkbox",class:"toggle"}).prop("checked",!!t.value),h("<div/>").addClass(t.type));return this.$el.append([e,t.append(this.$input,n)]),this},onChange:function(t){this.trigger("change",!!t.target.checked,t)},pointerclick:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerclick",t)},pointerdown:function(t){t=p.util.normalizeEvent(t),this.$el.addClass("is-in-action"),this.trigger("pointerdown",t),this.delegateDocumentEvents()},pointerup:function(t){t=p.util.normalizeEvent(t),this.undelegateDocumentEvents(),this.$el.removeClass("is-in-action"),this.trigger("pointerup",t),"touchend"===t.type&&(this.$input.trigger("click"),t.preventDefault())},isDisabled:function(){return this.$input.prop("disabled")},enable:function(){this.$el.removeClass("disabled"),this.$input.prop("disabled",!1)},disable:function(){this.$el.addClass("disabled"),this.$input.prop("disabled",!0)}}),A=D.extend({render:function(){return this.options.width&&this.$el.css({width:this.options.width}),this}}),t=D.extend({tagName:"label",render:function(){return this.$el.text(this.options.text),this}}),S=D.extend({events:{"change .input":"onChange","input .input":"onChange"},render:function(){var t,e=this.options;return this.$output=h("<output/>").text(e.value),t=h("<span/>").addClass("units").text(e.unit),this.$input=h("<input/>",{type:"range",name:e.type,min:e.min,max:e.max,step:e.step,class:"input"}).val(e.value),this.$el.append([this.$input,this.$output,t]),this},onChange:function(t){var e=this.getValue();e!==this.currentValue&&(this.currentValue=e,this.$output.text(e),this.trigger("change",e,t))},getValue:function(){return parseInt(this.$input.val(),10)},setValue:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.$input.val(t),e.silent?(t=this.getValue(),this.currentValue=t,this.$output.text(t)):this.$input.trigger("change")},isDisabled:function(){return this.$input.prop("disabled")},enable:function(){this.$input.prop("disabled",!1)},disable:function(){this.$input.prop("disabled",!0)}}),l=D.extend({render:function(){var t=p.util.omit(this.options,"type","group","index");return this.selectBox=new rr(t),this.selectBox.render().$el.appendTo(this.el),this},bindEvents:function(){this.selectBox.on("all",this.trigger,this)},isDisabled:function(){return this.selectBox.isDisabled()},enable:function(){this.selectBox.enable()},disable:function(){this.selectBox.disable()}}),N=D.extend({events:{mousedown:"pointerdown",mouseup:"pointerup",touchend:"pointerup",touchstart:"pointerdown",click:"pointerclick"},tagName:"button",render:function(){var t=this.options;return this.$el.text(t.text),this},pointerclick:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerclick",t)},pointerdown:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerdown",t)},pointerup:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerup",t),"touchend"===t.type&&(this.$el.trigger("click"),t.preventDefault())},isDisabled:function(){return this.$el.prop("disabled")},enable:function(){this.$el.prop("disabled",!1)},disable:function(){this.$el.prop("disabled",!0)}}),Mi=D.extend({events:{mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",click:"pointerclick",focusin:"pointerfocusin",focusout:"pointerfocusout"},tagName:"div",render:function(){var t=this.options;return this.$label=h("<label/>").text(t.label),this.$text=h("<input/>",{type:"text",class:"input"}).val(t.value),this.$input=h("<div/>").addClass("input-wrapper").append(this.$text),this.$el.append([this.$label,this.$input]),this},pointerclick:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerclick",t)},pointerdown:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerdown",t),"touchstart"===t.type&&this.$text.trigger("focus")},pointerup:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerup",t),"touchend"===t.type&&(this.$text.trigger("click"),t.preventDefault())},pointerfocusin:function(t){t=p.util.normalizeEvent(t),this.$el.addClass("is-focused"),this.trigger("pointerfocusin",t)},pointerfocusout:function(t){t=p.util.normalizeEvent(t),this.$el.removeClass("is-focused"),this.trigger("pointerfocusout",t)},isDisabled:function(){return this.$text.prop("disabled")},enable:function(){this.$text.prop("disabled",!1)},disable:function(){this.$text.prop("disabled",!0)}}),C=D.extend({events:{mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",click:"pointerclick",focusin:"pointerfocusin",focusout:"pointerfocusout"},tagName:"div",render:function(){var t=this.options;return this.$label=h("<label/>").text(t.label),this.$number=h("<input/>",{type:"number",class:"number",max:t.max,min:t.min}).val(t.value),this.$input=h("<div/>").addClass("input-wrapper").append(this.$number),this.$el.append([this.$label,this.$input]),this},pointerclick:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerclick",t)},pointerdown:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerdown",t),"touchstart"===t.type&&this.$number.trigger("focus")},pointerup:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerup",t),"touchend"===t.type&&(this.$number.trigger("click"),t.preventDefault())},pointerfocusin:function(t){t=p.util.normalizeEvent(t),this.$el.addClass("is-focused"),this.trigger("pointerfocusin",t)},pointerfocusout:function(t){t=p.util.normalizeEvent(t),this.$el.removeClass("is-focused"),this.trigger("pointerfocusout",t)},isDisabled:function(){return this.$number.prop("disabled")},enable:function(){this.$number.prop("disabled",!1)},disable:function(){this.$number.prop("disabled",!0)}}),k=D.extend({events:{mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",click:"pointerclick",focusin:"pointerfocusin",focusout:"pointerfocusout"},tagName:"div",render:function(){var t=this.options;return this.$label=h("<label/>").text(t.label),this.$textarea=h("<textarea/>",{class:"textarea"}).text(t.value),this.$input=h("<div/>").addClass("input-wrapper").append(this.$textarea),this.$el.append([this.$label,this.$input]),this},pointerclick:function(t){t.preventDefault(),t=p.util.normalizeEvent(t),this.trigger("pointerclick",t)},pointerdown:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerdown",t),"touchstart"===t.type&&this.$textarea.focus()},pointerup:function(t){t=p.util.normalizeEvent(t),this.trigger("pointerup",t),"touchend"===t.type&&(this.$textarea.trigger("click"),t.preventDefault())},pointerfocusin:function(t){t=p.util.normalizeEvent(t),this.$el.addClass("is-focused"),this.trigger("pointerfocusin",t)},pointerfocusout:function(t){t=p.util.normalizeEvent(t),this.$el.removeClass("is-focused"),this.trigger("pointerfocusout",t)},isDisabled:function(){return this.$textarea.prop("disabled")},enable:function(){this.$textarea.prop("disabled",!1)},disable:function(){this.$textarea.prop("disabled",!0)}}),T=D.extend({render:function(){var t=p.util.omit(this.options,"type","group","index");return this.selectButtonGroup=new vr(t),this.selectButtonGroup.render().$el.appendTo(this.el),this},bindEvents:function(){this.selectButtonGroup.on("all",this.trigger,this)},isDisabled:function(){return this.selectButtonGroup.isDisabled()},enable:function(){this.selectButtonGroup.enable()},disable:function(){this.selectButtonGroup.disable()}}),f=N.extend({references:["paperScroller"],options:{min:.2,max:5,step:.2},bindEvents:function(){var t,e=this;this.options.autoToggle&&(t=this.getReferences().paperScroller,this.updateAvailability(t),this.listenTo(t.options.paper,"scale",function(){return e.updateAvailability(t)}))},pointerdown:function(t){var e=this.options;this.getReferences().paperScroller.zoom(e.step,{max:e.max,grid:e.step}),N.prototype.pointerdown.call(this,t)},updateAvailability:function(t){t.zoom()<this.options.max?this.enable():this.disable()}}),s=N.extend({references:["paperScroller"],options:{min:.2,max:5,step:.2},bindEvents:function(){var t,e=this;this.options.autoToggle&&(t=this.getReferences().paperScroller,this.updateAvailability(t),this.listenTo(t.options.paper,"scale",function(){return e.updateAvailability(t)}))},pointerdown:function(t){var e=this.options;this.getReferences().paperScroller.zoom(-e.step,{min:e.min,grid:e.step}),N.prototype.pointerdown.call(this,t)},updateAvailability:function(t){t.zoom()>this.options.min?this.enable():this.disable()}}),R=N.extend({references:["paperScroller"],options:{min:.2,max:5,step:.2,useModelGeometry:!1,padding:20},pointerdown:function(t){var e=this.options;this.getReferences().paperScroller.zoomToFit({padding:e.padding,scaleGrid:e.step,minScale:e.min,maxScale:e.max,useModelGeometry:e.useModelGeometry}),N.prototype.pointerdown.call(this,t)}}),j=S.extend({references:["paperScroller"],options:{min:20,max:500,step:20,value:100,unit:" %"},bindEvents:function(){var e=this,n=this.getReferences().paperScroller;this.on("change",function(t){n.zoom(t/100,{absolute:!0,grid:this.options.step/100})},this),this.listenTo(n.options.paper,"scale",function(t){e.setValue(Math.floor(100*t),{silent:!0})})}}),d=N.extend({references:["commandManager"],bindEvents:function(){var t,e=this;this.options.autoToggle&&(t=this.getReferences().commandManager,this.updateAvailability(t),this.listenTo(t,"stack",function(){return e.updateAvailability(t)}))},pointerclick:function(){this.getReferences().commandManager.undo()},updateAvailability:function(t){t.hasUndo()?this.enable():this.disable()}}),y=N.extend({references:["commandManager"],bindEvents:function(){var t,e=this;this.options.autoToggle&&(t=this.getReferences().commandManager,this.updateAvailability(t),this.listenTo(t,"stack",function(){return e.updateAvailability(t)}))},pointerclick:function(){this.getReferences().commandManager.redo()},updateAvailability:function(t){t.hasRedo()?this.enable():this.disable()}}),br=N.extend({onRender:function(){var t=this.target=h(this.options.target)[0];t&&!h.contains(window.top.document,t)&&this.$el.hide()},pointerclick:function(){p.util.toggleFullScreen(this.target)}}),mr=D.extend({events:{"change .input ":"change","input .input ":"input"},render:function(){var t=this.options;return this.inputEl=document.createElement("input"),this.inputEl.classList.add("input"),this.inputEl.setAttribute("type","color"),t.value?this.setValue(t.value):this.inputEl.value="#FFFFFF",this.el.appendChild(this.inputEl),this},_validateHexCode:function(t){return/^#(?:[0-9a-fA-F]{6})$/.test(t)},change:function(t){t=p.util.normalizeEvent(t),this.trigger("change",t.target.value,t)},input:function(t){t=p.util.normalizeEvent(t),this.trigger("input",t.target.value,t)},disable:function(){this.el.classList.add("disabled"),this.inputEl.disabled=!0},enable:function(){this.el.classList.remove("disabled"),this.inputEl.disabled=!1},setValue:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._validateHexCode(t)&&(this.inputEl.value=t,e.silent||this.trigger("change"))}}),yr=Object.freeze({__proto__:null,checkbox:I,toggle:Ye,separator:A,label:t,range:S,selectBox:l,button:N,inputText:Mi,inputNumber:C,textarea:k,selectButtonGroup:T,zoomIn:f,zoomOut:s,zoomToFit:R,zoomSlider:j,undo:d,redo:y,fullscreen:br,colorPicker:mr}),I=p.mvc.View.extend({options:{autoToggle:!1,widgetNamespace:null},align:["left","right"],className:"toolbar",defaultGroup:"default",widgets:[],groupViews:[],init:function(){this.tools=p.util.toArray(this.options.tools),this.groups=this.options.groups||{}},getWidgetByName:function(e){return this.widgets.find(function(t){return t.options.name===e})},getWidgets:function(){return this.widgets},groupsWithItemsPairs:function(){for(var n={},t=(this.tools.forEach(function(t){var e=t.group||this.defaultGroup;n[e]=n[e]||{items:[],group:{}},n[e].items.push(t),n[e].group=this.groups[e]||{}},this),Object.keys(n)),e=[],i=0,o=t.length;i<o;i++){var r=t[i];e.push([r,n[r]])}var s=p.util.sortBy(e,function(t){return t[1].group.index});return p.util.sortBy(s,function(t){return t[1].group.align||"left"})},render:function(){var t=this.groupsWithItemsPairs(),n=!1;return t.forEach(function(t){var e=t[0],t=t[1],e=this.renderGroup(e,t);!n&&t.group.align&&"right"===t.group.align&&(n=!0,e.addClass("group-first")),e.appendTo(this.el)},this),this},renderGroup:function(t,e){var n=this.options,i=n.references,o=n.autoToggle,n=n.widgetNamespace,t=new wr({name:t,align:e.group.align,items:e.items,references:i,autoToggle:o,widgetNamespace:n});return this.groupViews.push(t),t.on("all",function(){this.trigger.apply(this,arguments)}.bind(this)),t.render(),this.widgets=this.widgets.concat(t.widgets),t.$el},onRemove:function(){p.util.invoke(this.groupViews,"off"),p.util.invoke(this.groupViews,"remove")}},{Align:{Left:"left",Right:"right"}}),wr=p.mvc.View.extend({className:"toolbar-group",init:function(){this.widgets=[]},onRender:function(){this.$el.attr("data-group",this.options.name),this.$el.addClass(this.options.align),this.renderItems()},renderItems:function(){p.util.toArray(this.options.items).forEach(function(t){t=this.createWidget(t);this.$el.append(t.$el)},this)},createWidget:function(n){var t=this.options,e=t.references,i=t.autoToggle,t=t.widgetNamespace,i=p.util.isString(n)?{autoToggle:i,type:n}:p.util.assign({autoToggle:i},n),i=D.create(i,e,t||yr);return i.on("all",function(t){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[n.name+":"+t].concat(e))}.bind(this)),this.widgets.push(i),i},onRemove:function(){p.util.invoke(this.widgets,"off"),p.util.invoke(this.widgets,"remove")}});M.Toolbar=I}(this.joint.ui=this.joint.ui||{},joint,$);