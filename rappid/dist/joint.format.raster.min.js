/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(F,v,m){"use strict";m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function D(t,e){return t(e={exports:{}},e.exports),e.exports}function k(t){return t&&t.Math==Math&&t}function c(t){try{return!!t()}catch(t){return!0}}function G(t){return tt?at(t):function(){return it.apply(t,arguments)}}function f(t){if("Function"===p(t))return G(t)}function U(t){if(pt(t))throw ht("Can't call method on "+t);return t}function V(t){return lt(U(t))}function z(t,e){return arguments.length<2?(r=w[t],E(r)?r:void 0):w[t]&&w[t][e];var r}function x(t){return Ct(U(t))}function $(t){return"Symbol("+(void 0===t?"":t)+")_"+_t(++Nt+Mt,36)}function s(t){var e;return S(Ft,t)&&(mt||"string"==typeof Ft[t])||(e="Symbol."+t,mt&&S(Dt,t)?Ft[t]=Dt[t]:Ft[t]=(bt&&kt?kt:Gt)(e)),Ft[t]}function B(t){return t=zt(t,"string"),St(t)?t:t+""}function Y(t){return ue[t]||(ue[t]=$(t))}function b(t,e,r,n){var o=(n=n||{}).enumerable,i=void 0!==n.name?n.name:e;if(E(r)&&he(r,i,n),n.global)o?t[e]=r:Rt(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:A.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}}function q(t,e){return(t=ve(t))<0?me(t+e,0):be(t,e)}function H(t){return Se(t.length)}function X(u){return function(t,e,r){var n,o=V(t),i=H(o),a=q(r,i);if(u&&e!=e){for(;a<i;)if((n=o[a++])!=n)return!0}else for(;a<i;a++)if((u||a in o)&&o[a]===e)return u||a||0;return!u&&-1}}function K(t,e){var r,n=V(t),o=0,i=[];for(r in n)!S(ce,r)&&S(n,r)&&Ee(i,r);for(;e.length>o;)!S(n,r=e[o++])||~xe(i,r)||Ee(i,r);return i}function W(t,e){return(t=Le[Ce(t)])==Me||t!=Ne&&(E(e)?c(e):!!e)}function e(t,e){var r,n,o,i=t.target,a=t.global,u=t.stat,c=a?w:u?w[i]||Rt(i,{}):(w[i]||{}).prototype;if(c)for(r in e){if(n=e[r],o=t.dontCallGetSet?(o=Fe(c,r))&&o.value:c[r],!_e(a?r:i+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof n==typeof o)continue;for(var f=n,s=o,l=y=g=d=h=p=void 0,p=Te(s),h=A.f,d=Xt.f,g=0;g<p.length;g++){var y=p[g];S(f,y)||l&&S(l,y)||h(f,y,d(s,y))}}(t.sham||o&&o.sham)&&ne(n,"sham",!0),b(c,r,n,t)}}function J(i){return ze?function(t,e){var r=2<function(t,e){if(t<e)throw Ve("Not enough arguments");return t}(arguments.length,1),n=E(t)?t:$e(t),o=r?Ue(arguments,2):void 0;return i(r?function(){Ge(n,this,o)}:n,e)}:i}var Q,Z,r,n,w=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof t&&t)||function(){return this}()||Function("return this")(),l=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),tt=!c(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),et=Function.prototype.call,d=tt?et.bind(et):function(){return et.apply(et,arguments)},t={}.propertyIsEnumerable,rt=Object.getOwnPropertyDescriptor,nt={f:rt&&!t.call({1:2},1)?function(t){t=rt(this,t);return!!t&&t.enumerable}:t},ot=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},t=Function.prototype,it=t.call,at=tt&&t.bind.bind(it,it),ut=G({}.toString),ct=G("".slice),p=function(t){return ct(ut(t),8,-1)},ft=Object,st=f("".split),lt=c(function(){return!ft("z").propertyIsEnumerable(0)})?function(t){return"String"==p(t)?st(t,""):ft(t)}:ft,pt=function(t){return null==t},ht=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},dt=t.all,E=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===dt}:function(t){return"function"==typeof t},gt=t.all,h=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:E(t)||t===gt}:function(t){return"object"==typeof t?null!==t:E(t)},yt=f({}.isPrototypeOf),t=z("navigator","userAgent")||"",o=w.process,i=w.Deno,o=o&&o.versions||i&&i.version,i=o&&o.v8,vt=g=!(g=i?0<(u=i.split("."))[0]&&u[0]<4?1:+(u[0]+u[1]):g)&&t&&(!(u=t.match(/Edge\/(\d+)/))||74<=u[1])&&(u=t.match(/Chrome\/(\d+)/))?+u[1]:g,mt=!!Object.getOwnPropertySymbols&&!c(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&vt&&vt<41}),bt=mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,wt=Object,St=bt?function(t){return"symbol"==typeof t}:function(t){var e=z("Symbol");return E(e)&&yt(e.prototype,wt(t))},xt=String,Et=function(t){try{return xt(t)}catch(t){return"Object"}},Ot=TypeError,At=function(t){if(E(t))return t;throw Ot(Et(t)+" is not a function")},It=function(t,e){t=t[e];return pt(t)?void 0:At(t)},jt=TypeError,Pt=function(t,e){var r,n;if("string"===e&&E(r=t.toString)&&!h(n=d(r,t)))return n;if(E(r=t.valueOf)&&!h(n=d(r,t)))return n;if("string"!==e&&E(r=t.toString)&&!h(n=d(r,t)))return n;throw jt("Can't convert object to primitive value")},Tt=Object.defineProperty,Rt=function(e,r){try{Tt(w,e,{value:r,configurable:!0,writable:!0})}catch(t){w[e]=r}return r},o="__core-js_shared__",a=w[o]||Rt(o,{}),i=D(function(t){(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),Ct=Object,Lt=f({}.hasOwnProperty),S=Object.hasOwn||function(t,e){return Lt(x(t),e)},Nt=0,Mt=Math.random(),_t=f(1..toString),Ft=i("wks"),Dt=w.Symbol,kt=Dt&&Dt.for,Gt=bt?Dt:Dt&&Dt.withoutSetter||$,Ut=TypeError,Vt=s("toPrimitive"),zt=function(t,e){if(!h(t)||St(t))return t;var r=It(t,Vt);if(r){if(r=d(r,t,e=void 0===e?"default":e),!h(r)||St(r))return r;throw Ut("Can't convert object to primitive value")}return Pt(t,e=void 0===e?"number":e)},$t=w.document,Bt=h($t)&&h($t.createElement),Yt=function(t){return Bt?$t.createElement(t):{}},qt=!l&&!c(function(){return 7!=Object.defineProperty(Yt("div"),"a",{get:function(){return 7}}).a}),Ht=Object.getOwnPropertyDescriptor,Xt={f:l?Ht:function(t,e){if(t=V(t),e=B(e),qt)try{return Ht(t,e)}catch(t){}if(S(t,e))return ot(!d(nt.f,t,e),t[e])}},u=l&&c(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Kt=String,Wt=TypeError,O=function(t){if(h(t))return t;throw Wt(Kt(t)+" is not an object")},Jt=TypeError,Qt=Object.defineProperty,Zt=Object.getOwnPropertyDescriptor,te="enumerable",ee="configurable",re="writable",A={f:l?u?function(t,e,r){var n;return O(t),e=B(e),O(r),"function"==typeof t&&"prototype"===e&&"value"in r&&re in r&&!r[re]&&((n=Zt(t,e))&&n[re]&&(t[e]=r.value,r={configurable:(ee in r?r:n)[ee],enumerable:(te in r?r:n)[te],writable:!1})),Qt(t,e,r)}:Qt:function(t,e,r){if(O(t),e=B(e),O(r),qt)try{return Qt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Jt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},ne=l?function(t,e,r){return A.f(t,e,ot(1,r))}:function(t,e,r){return t[e]=r,t},g=Function.prototype,o=l&&Object.getOwnPropertyDescriptor,y=S(g,"name"),oe={EXISTS:y,PROPER:y&&"something"===function(){}.name,CONFIGURABLE:y&&(!l||o(g,"name").configurable)},ie=f(Function.toString),ae=(E(a.inspectSource)||(a.inspectSource=function(t){return ie(t)}),a.inspectSource),y=w.WeakMap,o=E(y)&&/native code/.test(String(y)),ue=i("keys"),ce={},fe="Object already initialized",se=w.TypeError,g=w.WeakMap,le=o||a.state?((r=a.state||(a.state=new g)).get=r.get,r.has=r.has,r.set=r.set,Q=function(t,e){if(r.has(t))throw se(fe);return e.facade=t,r.set(t,e),e},Z=function(t){return r.get(t)||{}},function(t){return r.has(t)}):(n=Y("state"),ce[n]=!0,Q=function(t,e){if(S(t,n))throw se(fe);return e.facade=t,ne(t,n,e),e},Z=function(t){return S(t,n)?t[n]:{}},function(t){return S(t,n)}),pe={set:Q,get:Z,has:le,enforce:function(t){return le(t)?Z(t):Q(t,{})},getterFor:function(e){return function(t){if(h(t)&&(t=Z(t)).type===e)return t;throw se("Incompatible receiver, "+e+" required")}}},he=D(function(t){var n=oe.CONFIGURABLE,o=pe.enforce,e=pe.get,i=Object.defineProperty,a=l&&!c(function(){return 8!==i(function(){},"length",{value:8}).length}),u=String(String).split("String"),t=t.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!S(t,"name")||n&&t.name!==e)&&(l?i(t,"name",{value:e,configurable:!0}):t.name=e),a&&r&&S(r,"arity")&&t.length!==r.arity&&i(t,"length",{value:r.arity});try{r&&S(r,"constructor")&&r.constructor?l&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}r=o(t);return S(r,"source")||(r.source=u.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return E(this)&&e(this).source||ae(this)},"toString")}),de=Math.ceil,ge=Math.floor,ye=Math.trunc||function(t){t=+t;return(0<t?ge:de)(t)},ve=function(t){t=+t;return t!=t||0==t?0:ye(t)},me=Math.max,be=Math.min,we=Math.min,Se=function(t){return 0<t?we(ve(t),9007199254740991):0},y={includes:X(!0),indexOf:X(!1)},xe=y.indexOf,Ee=f([].push),Oe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ae=Oe.concat("length","prototype"),Ie={f:Object.getOwnPropertyNames||function(t){return K(t,Ae)}},je={f:Object.getOwnPropertySymbols},Pe=f([].concat),Te=z("Reflect","ownKeys")||function(t){var e=Ie.f(O(t)),r=je.f;return r?Pe(e,r(t)):e},Re=/#|\.prototype\./,Ce=W.normalize=function(t){return String(t).replace(Re,".").toLowerCase()},Le=W.data={},Ne=W.NATIVE="N",Me=W.POLYFILL="P",_e=W,Fe=Xt.f,o=Function.prototype,De=o.apply,ke=o.call,Ge="object"==typeof Reflect&&Reflect.apply||(tt?ke.bind(De):function(){return ke.apply(De,arguments)}),Ue=f([].slice),Ve=TypeError,ze=/MSIE .\./.test(t),$e=w.Function,g={setTimeout:J(w.setTimeout),setInterval:J(w.setInterval)},o=g.setInterval,t=(e({global:!0,bind:!0,forced:w.setInterval!==o},{setInterval:o}),g.setTimeout),Be=(e({global:!0,bind:!0,forced:w.setTimeout!==t},{setTimeout:t}),Function),Ye=f([].concat),qe=f([].join),He={},o=tt?Be.bind:function(a){var u=At(this),t=u.prototype,c=Ue(arguments,1),f=function(){var t=Ye(c,Ue(arguments));if(this instanceof f){var e=u,r=t.length,n=t;if(!S(He,r)){for(var o=[],i=0;i<r;i++)o[i]="a["+i+"]";He[r]=Be("C,a","return new C("+qe(o,",")+")")}return He[r](e,n)}return u.apply(a,t)};return h(t)&&(f.prototype=t),f};e({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o});function I(t){if("Symbol"===Ze(t))throw TypeError("Cannot convert a Symbol value to a string");return tr(t)}function Xe(e){return function(t){t=I(U(t));return 1&e&&(t=rr(t,nr,"")),t=2&e?rr(t,or,""):t}}function Ke(t,e,r){return pr&&E(e=e.constructor)&&e!==r&&h(e=e.prototype)&&e!==r.prototype&&pr(t,e),t}var g={},t=(g[s("toStringTag")]="z","[object z]"===String(g)),We=s("toStringTag"),Je=Object,Qe="Arguments"==p(function(){return arguments}()),Ze=t?p:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Je(t),We))?e:Qe?p(t):"Object"==(e=p(t))&&E(t.callee)?"Arguments":e},tr=String,er="\t\n\v\f\r                　\u2028\u2029\ufeff",rr=f("".replace),o="["+er+"]",nr=RegExp("^"+o+o+"*"),or=RegExp(o+o+"*$"),g={start:Xe(1),end:Xe(2),trim:Xe(3)},ir=g.trim,ar=f("".charAt),ur=w.parseFloat,o=w.Symbol,cr=o&&o.iterator,o=1/ur(er+"-0")!=-1/0||cr&&!c(function(){ur(Object(cr))})?function(t){var t=ir(I(t)),e=ur(t);return 0===e&&"-"==ar(t,0)?-0:e}:ur,fr=(e({global:!0,forced:parseFloat!=o},{parseFloat:o}),w.isFinite),o=Number.isFinite||function(t){return"number"==typeof t&&fr(t)},sr=(e({target:"Number",stat:!0},{isFinite:o}),String),lr=TypeError,pr=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,t={};try{(r=f(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),n=t instanceof Array}catch(t){}return function(t,e){return O(t),function(t){if("object"==typeof t||E(t))return;throw lr("Can't set "+sr(t)+" as a prototype")}(e),n?r(t,e):t.__proto__=e,t}}():void 0),hr=f(1..valueOf),o=Ie.f,dr=Xt.f,gr=A.f,yr=g.trim,j="Number",P=w[j],vr=P.prototype,mr=w.TypeError,br=f("".slice),wr=f("".charCodeAt),Sr=function(t){var e,r,n,o,i,a,u,c=zt(t,"number");if(St(c))throw mr("Cannot convert a Symbol value to a number");if("string"==typeof c&&2<c.length)if(c=yr(c),43===(t=wr(c,0))||45===t){if(88===(e=wr(c,2))||120===e)return NaN}else if(48===t){switch(wr(c,1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+c}for(i=(o=br(c,2)).length,a=0;a<i;a++)if((u=wr(o,a))<48||n<u)return NaN;return parseInt(o,r)}return+c};if(_e(j,!P(" 0o1")||!P("0b1")||P("+0x1"))){for(var xr,Er=function(t){var t=arguments.length<1?0:P(function(t){t=zt(t,"number");return"bigint"==typeof t?t:Sr(t)}(t)),e=this;return yt(vr,e)&&c(function(){hr(e)})?Ke(Object(t),e,Er):t},Or=l?o(P):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Ar=0;Or.length>Ar;Ar++)S(P,xr=Or[Ar])&&!S(Er,xr)&&gr(Er,xr,dr(P,xr));(Er.prototype=vr).constructor=Er,b(w,j,Er,{constructor:!0})}function Ir(){}function jr(t){t.write(Kr("")),t.close();var e=t.parentWindow.Object;return t=null,e}function Pr(r,t,e,n){var a,o=s(r),u=!c(function(){var t={};return t[o]=function(){return 7},7!=""[r](t)}),i=u&&!c(function(){var t=!1,e=/a/;return"split"===r&&((e={constructor:{}}).constructor[gn]=function(){return e},e.flags="",e[o]=/./[o]),e.exec=function(){return t=!0,null},e[o](""),!t});u&&i&&!e||(a=f(/./[o]),i=t(o,""[r],function(t,e,r,n,o){var t=f(t),i=e.exec;return i===dn||i===yn.exec?u&&!o?{done:!0,value:a(e,r,n)}:{done:!0,value:t(r,e,n)}:{done:!1}}),b(String.prototype,r,i[0]),b(yn,o,i[1])),n&&ne(yn[o],"sham",!0)}function Tr(o){return function(t,e){var r,t=I(U(t)),e=ve(e),n=t.length;return e<0||n<=e?o?"":void 0:(r=mn(t,e))<55296||56319<r||e+1===n||(n=mn(t,e+1))<56320||57343<n?o?vn(t,e):r:o?bn(t,e,e+2):n-56320+(r-55296<<10)+65536}}function Rr(t,e,r){return e+(r?wn(t,e).length:1)}function Cr(t,e){var r=t.exec;if(E(r))return null!==(r=d(r,t,e))&&O(r),r;if("RegExp"===p(t))return d(dn,t,e);throw jn("RegExp#exec called on incompatible receiver")}function Lr(t,e){var r=[][t];return!!r&&c(function(){r.call(null,e||function(){return 1},1)})}function Nr(t){if(9007199254740991<t)throw Un("Maximum allowed index exceeded")}function Mr(t,e,r){(e=B(e))in t?A.f(t,e,ot(0,r)):t[e]=r}function _r(){}function Fr(t){if(!E(t))return!1;try{return zn(_r,Vn,t),!0}catch(t){return!1}}function Dr(t){if(!E(t))return!1;switch(Ze(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Yn||!!Bn($n,ae(t))}catch(t){return!0}}function kr(t,e){return Gn(t=t)&&(r=t.constructor,(qn(r)&&(r===Xn||Gn(r.prototype))||h(r)&&null===(r=r[Hn]))&&(r=void 0)),new(void 0===r?Xn:r)(0===e?0:e);var r}function Gr(e){return 51<=vt||!c(function(){var t=[];return(t.constructor={})[Kn]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var Ur,Vr=function(){var t=O(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},zr=w.RegExp,o=c(function(){var t=zr("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),j=o||c(function(){return!zr("a","y").sticky}),j={BROKEN_CARET:o||c(function(){var t=zr("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:j,UNSUPPORTED_Y:o},$r=Object.keys||function(t){return K(t,Oe)},Br={f:l&&!u?Object.defineProperties:function(t,e){O(t);for(var r,n=V(e),o=$r(e),i=o.length,a=0;a<i;)A.f(t,r=o[a++],n[r]);return t}},Yr=z("document","documentElement"),qr="prototype",Hr="script",Xr=Y("IE_PROTO"),Kr=function(t){return"<"+Hr+">"+t+"</"+Hr+">"},Wr=function(){try{Ur=new ActiveXObject("htmlfile")}catch(t){}Wr="undefined"==typeof document||document.domain&&Ur?jr(Ur):(t=Yt("iframe"),e="java"+Hr+":",t.style.display="none",Yr.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(Kr("document.F=Object")),e.close(),e.F);for(var t,e,r=Oe.length;r--;)delete Wr[qr][Oe[r]];return Wr()},Jr=(ce[Xr]=!0,Object.create||function(t,e){var r;return null!==t?(Ir[qr]=O(t),r=new Ir,Ir[qr]=null,r[Xr]=t):r=Wr(),void 0===e?r:Br.f(r,e)}),Qr=w.RegExp,Zr=c(function(){var t=Qr(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),tn=w.RegExp,en=c(function(){var t=tn("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),rn=pe.get,nn=i("native-string-replace",String.prototype.replace),on=RegExp.prototype.exec,an=on,un=f("".charAt),cn=f("".indexOf),fn=f("".replace),sn=f("".slice),ln=(o=/b*/g,d(on,u=/a/,"a"),d(on,o,"a"),0!==u.lastIndex||0!==o.lastIndex),pn=j.BROKEN_CARET,hn=void 0!==/()??/.exec("")[1],dn=an=ln||hn||pn||Zr||en?function(t){var e,r,n,o,i,a,u=this,c=rn(u),t=I(t),f=c.raw;if(f)return f.lastIndex=u.lastIndex,l=d(an,f,t),u.lastIndex=f.lastIndex,l;var s=c.groups,f=pn&&u.sticky,l=d(Vr,u),c=u.source,p=0,h=t;if(f&&(l=fn(l,"y",""),-1===cn(l,"g")&&(l+="g"),h=sn(t,u.lastIndex),0<u.lastIndex&&(!u.multiline||u.multiline&&"\n"!==un(t,u.lastIndex-1))&&(c="(?: "+c+")",h=" "+h,p++),e=new RegExp("^(?:"+c+")",l)),hn&&(e=new RegExp("^"+c+"$(?!\\s)",l)),ln&&(r=u.lastIndex),n=d(on,f?e:u,h),f?n?(n.input=sn(n.input,p),n[0]=sn(n[0],p),n.index=u.lastIndex,u.lastIndex+=n[0].length):u.lastIndex=0:ln&&n&&(u.lastIndex=u.global?n.index+n[0].length:r),hn&&n&&1<n.length&&d(nn,n[0],e,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n&&s)for(n.groups=i=Jr(null),o=0;o<s.length;o++)i[(a=s[o])[0]]=n[a[1]];return n}:an,gn=(e({target:"RegExp",proto:!0,forced:/./.exec!==dn},{exec:dn}),s("species")),yn=RegExp.prototype,vn=f("".charAt),mn=f("".charCodeAt),bn=f("".slice),i={codeAt:Tr(!1),charAt:Tr(!0)},wn=i.charAt,Sn=Math.floor,xn=f("".charAt),En=f("".replace),On=f("".slice),An=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,In=/\$([$&'`]|\d{1,2})/g,jn=TypeError,Pn=s("replace"),Tn=Math.max,Rn=Math.min,Cn=f([].concat),Ln=f([].push),Nn=f("".indexOf),Mn=f("".slice),o="$0"==="a".replace(/./,"$0"),_n=!!/./[Pn]&&""===/./[Pn]("a","$0"),Fn=(Pr("replace",function(t,b,w){var S=_n?"$":"$0";return[function(t,e){var r=U(this),n=pt(t)?void 0:It(t,Pn);return n?d(n,t,r,e):d(b,I(r),t,e)},function(t,e){var r=O(this),n=I(t);if("string"==typeof e&&-1===Nn(e,S)&&-1===Nn(e,"$<")){t=w(b,r,n,e);if(t.done)return t.value}for(var o,i=E(e),a=(i||(e=I(e)),r.global),u=(a&&(o=r.unicode,r.lastIndex=0),[]);null!==(p=Cr(r,n))&&(Ln(u,p),a);)""===I(p[0])&&(r.lastIndex=Rr(n,Se(r.lastIndex),o));for(var c,f="",s=0,l=0;l<u.length;l++){for(var p,h=I((p=u[l])[0]),d=Tn(Rn(ve(p.index),n.length),0),g=[],y=1;y<p.length;y++)Ln(g,void 0===(c=p[y])?c:String(c));var v=p.groups,m=i?(m=Cn([h],g,d,n),void 0!==v&&Ln(m,v),I(Ge(e,void 0,m))):function(i,a,u,c,f,t){var s=u+i.length,l=c.length,e=In;return void 0!==f&&(f=x(f),e=An),En(t,e,function(t,e){var r;switch(xn(e,0)){case"$":return"$";case"&":return i;case"`":return On(a,0,u);case"'":return On(a,s);case"<":r=f[On(e,1,-1)];break;default:var n,o=+e;if(0==o)return t;if(l<o)return 0!==(n=Sn(o/10))&&n<=l?void 0===c[n-1]?xn(e,1):c[n-1]+xn(e,1):t;r=c[o-1]}return void 0===r?"":r})}(h,n,d,g,v,e);s<=d&&(f+=Mn(n,s,d)+m,s=d+h.length)}return f+Mn(n,s)}]},!!c(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!o||_n),Pr("match",function(n,u,c){return[function(t){var e=U(this),r=pt(t)?void 0:It(t,n);return r?d(r,t,e):new RegExp(t)[n](I(e))},function(t){var e=O(this),r=I(t),t=c(u,e,r);if(t.done)return t.value;if(!e.global)return Cr(e,r);for(var n=e.unicode,o=[],i=e.lastIndex=0;null!==(a=Cr(e,r));){var a=I(a[0]);""===(o[i]=a)&&(e.lastIndex=Rr(r,Se(e.lastIndex),n)),i++}return 0===i?null:o}]}),y.indexOf),Dn=f([].indexOf),kn=!!Dn&&1/Dn([1],1,-0)<0,o=Lr("indexOf"),Gn=(e({target:"Array",proto:!0,forced:kn||!o},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return kn?Dn(this,t,e)||0:Fn(this,t,e)}}),Array.isArray||function(t){return"Array"==p(t)}),Un=TypeError,Vn=[],zn=z("Reflect","construct"),$n=/^\s*(?:class|function)\b/,Bn=f($n.exec),Yn=!$n.exec(_r),qn=(Dr.sham=!0,!zn||c(function(){var t;return Fr(Fr.call)||!Fr(Object)||!Fr(function(){t=!0})||t})?Dr:Fr),Hn=s("species"),Xn=Array,Kn=s("species"),Wn=s("isConcatSpreadable"),y=51<=vt||!c(function(){var t=[];return t[Wn]=!1,t.concat()[0]!==t}),o=Gr("concat"),y=(e({target:"Array",proto:!0,arity:1,forced:!y||!o},{concat:function(t){for(var e,r,n,o,i,a=x(this),u=kr(a,0),c=0,f=-1,s=arguments.length;f<s;f++)if(i=void 0,!h(o=n=-1===f?a:arguments[f])||(void 0!==(i=o[Wn])?!i:!Gn(o)))Nr(c+1),Mr(u,c++,n);else for(r=H(n),Nr(c+r),e=0;e<r;e++,c++)e in n&&Mr(u,c,n[e]);return u.length=c,u}}),Gr("slice")),Jn=s("species"),Qn=Array,Zn=Math.max;function to(t){return function(t){if(Array.isArray(t))return eo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?eo(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eo(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e({target:"Array",proto:!0,forced:!y},{slice:function(t,e){var r,n,o,i=V(this),a=H(i),u=q(t,a),c=q(void 0===e?a:e,a);if(Gn(i)&&(r=i.constructor,(r=qn(r)&&(r===Qn||Gn(r.prototype))||h(r)&&null===(r=r[Jn])?void 0:r)===Qn||void 0===r))return Ue(i,u,c);for(n=new(void 0===r?Qn:r)(Zn(c-u,0)),o=0;u<c;u++,o++)u in i&&Mr(n,o,i[u]);return n.length=o,n}});function ro(t,e){return At(t),void 0===e?t:tt?io(t,e):function(){return t.apply(e,arguments)}}function T(p){var h=1==p,d=2==p,g=3==p,y=4==p,v=6==p,m=7==p,b=5==p||v;return function(t,e,r,n){for(var o,i,a=x(t),u=lt(a),c=ro(e,r),f=H(u),s=0,e=n||kr,l=h?e(t,f):d||m?e(t,0):void 0;s<f;s++)if((b||s in u)&&(i=c(o=u[s],s,a),p))if(h)l[s]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return s;case 2:ao(l,o)}else switch(p){case 4:return!1;case 7:ao(l,o)}return v?-1:g||y?y:l}}function no(t){var e=t.flags;return void 0!==e||"flags"in so||S(t,"flags")||!yt(so,t)?e:d(Vr,t)}var oo=f([].join),o=lt!=Object,y=Lr("join",","),io=(e({target:"Array",proto:!0,forced:o||!y},{join:function(t){return oo(V(this),void 0===t?",":t)}}),f(f.bind)),ao=f([].push),o={forEach:T(0),map:T(1),filter:T(2),some:T(3),every:T(4),find:T(5),findIndex:T(6),filterReject:T(7)},y=A.f,R=s("unscopables"),C=Array.prototype,uo=(null==C[R]&&y(C,R,{configurable:!0,value:Jr(null)}),o.find),y="find",co=!0,C=(y in[]&&Array(1)[y](function(){co=!1}),e({target:"Array",proto:!0,forced:co},{find:function(t){return uo(this,t,1<arguments.length?arguments[1]:void 0)}}),C[R][y]=!0,t?{}.toString:function(){return"[object "+Ze(this)+"]"}),fo=(t||b(Object.prototype,"toString",C,{unsafe:!0}),s("match")),so=RegExp.prototype,lo=A.f,R=s("species"),y=Ie.f,po=pe.enforce,ho=s("match"),L=w.RegExp,go=L.prototype,yo=w.SyntaxError,vo=f(go.exec),mo=f("".charAt),bo=f("".replace),wo=f("".indexOf),So=f("".slice),xo=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Eo=/a/g,Oo=/a/g,t=new L(Eo)!==Eo,Ao=j.MISSED_STICKY,Io=j.UNSUPPORTED_Y,C=l&&(!t||Ao||Zr||en||c(function(){return Oo[ho]=!1,L(Eo)!=Eo||L(Oo)==Oo||"/a/i"!=L(Eo,"i")}));if(_e("RegExp",C)){for(var jo=function(t,e){var r,n,o,i=yt(go,this),a=h(u=t)&&(void 0!==(a=u[fo])?!!a:"RegExp"==p(u)),u=void 0===e,c=[],f=t;if(!i&&a&&u&&t.constructor===jo)return t;if((a||yt(go,t))&&(t=t.source,u&&(e=no(f))),t=void 0===t?"":I(t),e=void 0===e?"":I(e),f=t,u=e=Zr&&"dotAll"in Eo&&(r=!!e&&-1<wo(e,"s"))?bo(e,/s/g,""):e,Ao&&"sticky"in Eo&&(n=!!e&&-1<wo(e,"y"))&&Io&&(e=bo(e,/y/g,"")),en&&(t=(o=function(t){for(var e,r=t.length,n=0,o="",i=[],a={},u=!1,c=!1,f=0,s="";n<=r;n++){if("\\"===(e=mo(t,n)))e+=mo(t,++n);else if("]"===e)u=!1;else if(!u)switch(!0){case"["===e:u=!0;break;case"("===e:vo(xo,So(t,n+1))&&(n+=2,c=!0),o+=e,f++;continue;case">"===e&&c:if(""===s||S(a,s))throw new yo("Invalid capture group name");a[s]=!0,c=!(i[i.length]=[s,f]),s="";continue}c?s+=e:o+=e}return[o,i]}(t))[0],c=o[1]),o=Ke(L(t,e),i?this:go,jo),(r||n||c.length)&&(e=po(o),r&&(e.dotAll=!0,e.raw=jo(function(t){for(var e,r=t.length,n=0,o="",i=!1;n<=r;n++)"\\"===(e=mo(t,n))?o+=e+mo(t,++n):i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]";return o}(t),u)),n&&(e.sticky=!0),c.length&&(e.groups=c)),t!==f)try{ne(o,"source",""===f?"(?:)":f)}catch(t){}return o},Po=y(L),To=0;Po.length>To;)!function(t,e,r){r in t||lo(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}(jo,L,Po[To++]);(go.constructor=jo).prototype=go,b(w,"RegExp",jo,{constructor:!0})}j=z(j="RegExp"),t=A.f,l&&j&&!j[R]&&t(j,R,{configurable:!0,get:function(){return this}});function Ro(e){if(e&&e.forEach!==Mo)try{ne(e,"forEach",Mo)}catch(t){e.forEach=Mo}}var Co,C=oe.PROPER,y="toString",Lo=RegExp.prototype[y],t=c(function(){return"/a/b"!=Lo.call({source:"a",flags:"b"})}),j=C&&Lo.name!=y,No=((t||j)&&b(RegExp.prototype,y,function(){var t=O(this);return"/"+I(t.source)+"/"+I(no(t))},{unsafe:!0}),o.forEach),Mo=Lr("forEach")?[].forEach:function(t){return No(this,t,1<arguments.length?arguments[1]:void 0)},_o=(e({target:"Array",proto:!0,forced:[].forEach!=Mo},{forEach:Mo}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),R=Yt("span").classList,C=R&&R.constructor&&R.constructor.prototype,t=C===Object.prototype?void 0:C;for(Co in _o)_o[Co]&&Ro(w[Co]&&w[Co].prototype);Ro(t);var Fo,Do=oe.PROPER,ko=g.trim,Go=(e({target:"String",proto:!0,forced:(Fo="trim",c(function(){return er[Fo]()||"​᠎"!=="​᠎"[Fo]()||Do&&er[Fo].name!==Fo}))},{trim:function(){return ko(this)}}),o.map),j=Gr("map"),y=(e({target:"Array",proto:!0,forced:!j},{map:function(t){return Go(this,t,1<arguments.length?arguments[1]:void 0)}}),c(function(){$r(1)})),Uo=(e({target:"Object",stat:!0,forced:y},{keys:function(t){return $r(x(t))}}),function(t,e,r){var n,o;O(t);try{if(!(n=It(t,"return"))){if("throw"===e)throw r;return r}n=d(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return O(n),r}),Vo={},zo=s("iterator"),$o=Array.prototype,Bo=s("iterator"),Yo=function(t){if(!pt(t))return It(t,Bo)||It(t,"@@iterator")||Vo[Ze(t)]},qo=TypeError,Ho=Array,Xo=s("iterator"),Ko=!1;try{var Wo=0,N={next:function(){return{done:!!Wo++}},return:function(){Ko=!0}};N[Xo]=function(){return this},Array.from(N,function(){throw 2})}catch(t){}function Jo(){return this}function Qo(t,e){return{value:t,done:e}}var Zo,R=!function(t,e){if(!e&&!Ko)return!1;var r=!1;try{var n={};n[Xo]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}(function(t){Array.from(t)}),C=(e({target:"Array",stat:!0,forced:R},{from:function(t){var e,r,n,o,i,a,u,c=x(t),t=qn(this),f=arguments.length,s=1<f?arguments[1]:void 0,l=void 0!==s,f=(l&&(s=ro(s,2<f?arguments[2]:void 0)),Yo(c)),p=0;if(f&&(this!==Ho||(void 0===(u=f)||Vo.Array!==u&&$o[zo]!==u)))for(i=(o=function(t,e){e=arguments.length<2?Yo(t):e;if(At(e))return O(d(e,t));throw qo(Et(t)+" is not iterable")}(c,f)).next,r=t?new this:[];!(n=d(i,o)).done;p++)a=l?function(e,t,r,n){try{return n?t(O(r)[0],r[1]):t(r)}catch(t){Uo(e,"throw",t)}}(o,s,[n.value,p],!0):n.value,Mr(r,p,a);else for(e=H(c),r=t?new this(e):Ho(e);p<e;p++)a=l?s(c[p],p):c[p],Mr(r,p,a);return r.length=p,r}}),!c(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),ti=Y("IE_PROTO"),ei=Object,ri=ei.prototype,t=C?ei.getPrototypeOf:function(t){var e,t=x(t);return S(t,ti)?t[ti]:(e=t.constructor,E(e)&&t instanceof e?e.prototype:t instanceof ei?ri:null)},ni=s("iterator"),g=!1,y=([].keys&&("next"in(o=[].keys())?(j=t(t(o)))!==Object.prototype&&(Zo=j):g=!0),!h(Zo)||c(function(){var t={};return Zo[ni].call(t)!==t})),N=(E((Zo=y?{}:Zo)[ni])||b(Zo,ni,function(){return this}),{IteratorPrototype:Zo,BUGGY_SAFARI_ITERATORS:g}),oi=A.f,ii=s("toStringTag"),R=function(t,e,r){(t=t&&!r?t.prototype:t)&&!S(t,ii)&&oi(t,ii,{configurable:!0,value:e})},C=N.IteratorPrototype,o=function(){return this},j=oe.PROPER,y=oe.CONFIGURABLE,g=N.IteratorPrototype,ai=N.BUGGY_SAFARI_ITERATORS,N=s("iterator"),ui="values",ci="entries",fi=i.charAt,si="String Iterator",li=pe.set,pi=pe.getterFor(si),i=String,hi="String",di=function(t){li(this,{type:si,string:I(t),index:0})},gi=function(){var t=pi(this),e=t.string,r=t.index;return r>=e.length?Qo(void 0,!0):(e=fi(e,r),t.index+=e.length,Qo(e,!1))},yi=void 0,vi=void 0,mi=void 0;function bi(t){if(t===yi&&Ii)return Ii;if(!ai&&t in _)return _[t];switch(t){case"keys":case ui:case ci:return function(){return new di(this,t)}}return function(){return new di(this)}}var wi,Si,M=di,xi=hi,Ei=void 0,Ei=(xi+=" Iterator",M.prototype=Jr(C,{next:ot(+!Ei,gi)}),R(M,xi,!1),Vo[xi]=o,hi+" Iterator"),Oi=!1,_=i.prototype,Ai=_[N]||_["@@iterator"]||yi&&_[yi],Ii=!ai&&Ai||bi(yi);if((gi="Array"==hi&&_.entries||Ai)&&(M=t(gi.call(new i)))!==Object.prototype&&M.next&&(t(M)!==g&&(pr?pr(M,g):E(M[N])||b(M,N,Jo)),R(M,Ei,!0)),j&&yi==ui&&Ai&&Ai.name!==ui&&(y?ne(_,"name",ui):(Oi=!0,Ii=function(){return d(Ai,this)})),yi)if(wi={values:bi(ui),keys:vi?Ii:bi("keys"),entries:bi(ci)},mi)for(Si in wi)!ai&&!Oi&&Si in _||b(_,Si,wi[Si]);else e({target:hi,proto:!0,forced:ai||Oi},wi);_[N]!==Ii&&b(_,N,Ii,{name:yi}),Vo[hi]=Ii;var ji=function(e,r,n){if(n=n||{},void 0===e)throw new Error("The the dia.Paper is a mandatory option.");e.trigger("beforeexport",n);var t=v.V(e.svg).clone(),o=t.node,i=t.findOne("."+v.util.addClassNamePrefix("layers")),a=n.area||e.getContentArea(),u=n.preserveDimensions;if(u&&t.attr({width:u.width||a.width,height:u.height||a.height}),t.removeAttr("style").attr("viewBox",[a.x,a.y,a.width,a.height].join(" ")),i.removeAttr("transform"),!1!==n.useComputedStyles){for(var u=e.svg,a=o,i=Array.from(u.querySelectorAll("*")),a=Array.from(a.querySelectorAll("*")),c=u.ownerDocument,f=c.styleSheets.length,s=[],l=f-1;0<=l;l--)s[l]=c.styleSheets[l],c.styleSheets[l].disabled=!0;var p={};i.forEach(function(t,e){var r=window.getComputedStyle(t,null),n={};v.util.forIn(r,function(t){n[t]=r.getPropertyValue(t)}),p[e]=n}),f!=c.styleSheets.length&&s.forEach(function(t,e){c.styleSheets[e]=t});for(var h=0;h<f;h++)c.styleSheets[h].disabled=!1;var d={};i.forEach(function(t,e){var r=window.getComputedStyle(t,null),n=p[e],o={};v.util.forIn(r,function(t){isNaN(t)&&r.getPropertyValue(t)!==n[t]&&(o[t]=r.getPropertyValue(t))}),d[e]=o}),a.forEach(function(t,e){m(t).css(d[e])})}function g(){var t=n.beforeSerialize;"function"==typeof t&&(t=t.call(e,o,e))instanceof SVGElement&&(o=t),r((t=o,(new XMLSerializer).serializeToString(t).replace(/&nbsp;/g," ")))}var y,u=n.stylesheet;v.util.isString(u)&&(i=t.node,a=u,u=i.ownerDocument.implementation.createDocument(null,"xml",null),v.V(i).prepend(v.V("style",{type:"text/css"},[u.createCDATASection(a)]))),e.trigger("afterexport",n);n.convertImagesToDataUris?(i=t.find("image"),y={},i.forEach(function(t){var e=t.attr("xlink:href")||t.attr("href");e&&(e=e.trim(),Pi.test(e)||(e in y?y[e].push(t):y[e]=[t]))}),m.when.apply(m,to(Object.keys(y).map(function(t){return r=y[t=t],n=m.Deferred(),v.util.imageToDataUri(t,function(t,e){!t&&e&&(r.forEach(function(t){return t.attr("xlink:href",e)}),n.resolve())}),n.promise();var r,n}))).then(g)):g()},Pi=new RegExp(/^(data:)([\w\\+-]*)(;charset=[\w-]+|;base64){0,1},(.*)/gi);function Ti(t,e,r){(r=r||{}).type="image/png",Ni(t,e,r)}function Ri(t,e,r){(r=r||{}).type="image/jpeg",Ni(t,e,r)}function Ci(t,e,r){(r=r||{}).type="canvas",Ni(t,e,r)}function Li(t,e){var r=v.util.uniqueId("png_output");Ti(t,function(t){window.open("",r,"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes").document.write('<img src="'+t+'"/>')},v.util.assign({padding:10},e))}v.dia.Paper.prototype.toSVG=function(){return ji.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},v.dia.Paper.prototype.openAsSVG=function(){return function(t,e){var r=v.util.uniqueId("svg_output");ji(t,function(t){var e=window.open("",r,"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes"),t="data:image/svg+xml,"+encodeURIComponent(t);e.document.write('<img src="'+t+'" style="max-height:100%" />')},v.util.assign({convertImagesToDataUris:!0},e))}.apply(this,[this].concat(Array.prototype.slice.call(arguments)))};var Ni=function(t,c){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)throw new Error("The the dia.Paper is a mandatory argument.");var e,s=f.canvg||("undefined"!=typeof canvg?canvg:void 0),r=function(t,e){var r=function(t){var e=v.util.normalizeSides(t.padding);t.width&&t.height&&(e.left+e.right>=t.width&&(e.left=e.right=0),e.top+e.bottom>=t.height&&(e.top=e.bottom=0));return e}(e),n=v.g.rect({x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom});{var o;e.width&&e.height&&(o=t.width+r.left+r.right,r=t.height+r.top+r.bottom,n.scale(o/e.width,r/e.height))}return v.g.Rect(t).moveAndExpand(n)}(f.area||t.paperToLocalRect(t.getContentBBox()),f),n=v.util.isNumber(f.width)&&v.util.isNumber(f.height)?f:r,l=(n=n,e=function(t){var e=1;if(void 0!==t&&(e=parseFloat(t),!Number.isFinite(e)||0===e))throw new Error("dia.Paper: invalid raster size ("+t+")");return e}(f.size),{width:Math.max(Math.round(n.width*e),1),height:Math.max(Math.round(n.height*e),1)});if(!function(t,e){var r=document.createElement("canvas"),t=(r.width=t,r.height=e,t-1),e=e-1,r=r.getContext("2d");try{r.fillStyle="rgb(1,1,1)",r.fillRect(t,e,1,1);var n=r.getImageData(t,e,1,1).data;if(1!==n[0]||1!==n[1]||1!==n[2])return}catch(t){return}return 1}(l.width,l.height))throw new Error("dia.Paper: raster size exceeded.");var p,h=new Image;h.onload=function(){var n,o,i,e;function r(){(i=document.createElement("canvas")).width=l.width,i.height=l.height,(o=i.getContext("2d")).fillStyle=f.backgroundColor||"white",o.fillRect(0,0,l.width,l.height)}function a(){var t=f.type,e=f.quality;if("canvas"===t){var r=o;try{r.getImageData(0,0,1,1)}catch(t){}c(i)}else n=i.toDataURL(t,e),c(n);u()}function u(){i.svg&&v.util.isFunction(i.svg.stop)&&setTimeout(i.svg.stop,1)}r();try{o.drawImage(h,0,0,l.width,l.height),a()}catch(t){void 0===s?console.error("Canvas tainted. Canvg library required."):(r(),s(i,p,v.util.assign(e={ignoreDimensions:!0,ignoreClear:!0,ignoreMouse:!0,ignoreAnimation:!0,offsetX:0,offsetY:0,useCORS:!0},{forceRedraw:function(){return!this.called&&(this.called=!0)}.bind({called:!1}),renderCallback:function(){try{a()}catch(t){u(),p=p.replace(/<image[^>]*>/g,function(t){var e=t.match(/href="([^"]*)"/),e=e&&e[1],r="data:image/svg+xml";return e&&e.substr(0,r.length)===r?(r=atob(e.substr(e.indexOf(",")+1))).substr(r.indexOf("<svg")):t}),r(),s(i,p,v.util.assign(e,{renderCallback:a}))}}})))}},ji(t,function(t){p=t,h.src="data:image/svg+xml,"+encodeURIComponent(t)},{paper:t,convertImagesToDataUris:!0,beforeSerialize:f.beforeSerialize,area:r,useComputedStyles:f.useComputedStyles,stylesheet:f.stylesheet,preserveDimensions:{width:l.width,height:l.height}})};v.dia.Paper.prototype.openAsPNG=function(t){return Li.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},v.dia.Paper.prototype.toJPEG=function(t,e){return Ri.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},v.dia.Paper.prototype.toPNG=function(t,e){return Ti.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},v.dia.Paper.prototype.toDataURL=function(t,e){return Ni.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},v.dia.Paper.prototype.toCanvas=function(t,e){return Ci.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},F.openAsPNG=Li,F.toCanvas=Ci,F.toDataURL=Ni,F.toJPEG=Ri,F.toPNG=Ti}(this.joint.format=this.joint.format||{},joint,$);