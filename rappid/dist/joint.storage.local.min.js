/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(C,D){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function G(t,e){return t(e={exports:{}},e.exports),e.exports}function N(t){return t&&t.Math==Math&&t}function a(t){try{return!!t()}catch(t){return!0}}function K(t){return j?at(t):function(){return ct.apply(t,arguments)}}function n(t){return st(ft(t),8,-1)}function e(t){if("Function"===n(t))return K(t)}function z(t){if(ht(t))throw dt("Can't call method on "+t);return t}function f(t){return yt(z(t))}function r(t,e){return arguments.length<2?(n=m[t],O(n)?n:void 0):m[t]&&m[t][e];var n}function V(t){return _t(z(t))}function B(t){return"Symbol("+(void 0===t?"":t)+")_"+Ct(++Ft+Rt,36)}function o(t){var e;return I(T,t)&&(St||"string"==typeof T[t])||(e="Symbol."+t,St&&I(E,t)?T[t]=E[t]:T[t]=(Ot&&Dt?Dt:Gt)(e)),T[t]}function H(t){return t=function(t,e){if(!h(t)||wt(t))return t;var n=Lt(t,Kt);if(n){if(n=S(n,t,e=void 0===e?"default":e),!h(n)||wt(n))return n;throw Nt("Can't convert object to primitive value")}return kt(t,e=void 0===e?"number":e)}(t,"string"),wt(t)?t:t+""}function c(t){if(h(t))return t;throw qt(Yt(t)+" is not an object")}function U(t){return oe[t]||(oe[t]=B(t))}function b(t,e,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:e;if(O(n)&&se(n,i,r),r.global)o?t[e]=n:xt(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:P.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}}function W(t){return ve(t.length)}function Y(c){return function(t,e,n){var r,o=f(t),i=W(o),u=function(t,e){t=he(t);return t<0?de(t+e,0):ge(t,e)}(n,i);if(c&&e!=e){for(;u<i;)if((r=o[u++])!=r)return!0}else for(;u<i;u++)if((c||u in o)&&o[u]===e)return c||u||0;return!c&&-1}}function q(t,e){var n,r=f(t),o=0,i=[];for(n in r)!I(ie,n)&&I(r,n)&&Se(i,n);for(;e.length>o;)!I(r,n=e[o++])||~me(i,n)||Se(i,n);return i}function i(t,e){return(t=ke[Pe(t)])==xe||t!=Ae&&(O(e)?a(e):!!e)}function v(t,e){var n,r,o,i=t.target,u=t.global,c=t.stat,a=u?m:c?m[i]||xt(i,{}):(m[i]||{}).prototype;if(a)for(n in e){if(r=e[n],o=t.dontCallGetSet?(o=Me(a,n))&&o.value:a[n],!_e(u?n:i+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;for(var f=r,s=o,l=g=d=h=y=p=void 0,p=Ee(s),y=P.f,h=Wt.f,d=0;d<p.length;d++){var g=p[d];I(f,g)||l&&I(l,g)||y(f,g,h(s,g))}}(t.sham||o&&o.sham)&&k(r,"sham",!0),b(a,n,r,t)}}function J(t,e){var n=[][t];return!!n&&a(function(){n.call(null,e||function(){return 1},1)})}function X(){}function $(t){t.write(Be("")),t.close();var e=t.parentWindow.Object;return t=null,e}function Q(t){Ye[We][t]=!0}function Z(){return this}function tt(t,e){return{value:t,done:e}}var et,u,s,l,nt,p,m=N("object"==typeof globalThis&&globalThis)||N("object"==typeof window&&window)||N("object"==typeof self&&self)||N("object"==typeof t&&t)||function(){return this}()||Function("return this")(),y=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),j=!a(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),rt=Function.prototype.call,S=j?rt.bind(rt):function(){return rt.apply(rt,arguments)},t={}.propertyIsEnumerable,ot=Object.getOwnPropertyDescriptor,it={f:ot&&!t.call({1:2},1)?function(t){t=ot(this,t);return!!t&&t.enumerable}:t},ut=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},t=Function.prototype,ct=t.call,at=j&&t.bind.bind(ct,ct),ft=K({}.toString),st=K("".slice),lt=Object,pt=e("".split),yt=a(function(){return!lt("z").propertyIsEnumerable(0)})?function(t){return"String"==n(t)?pt(t,""):lt(t)}:lt,ht=function(t){return null==t},dt=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},gt=t.all,O=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===gt}:function(t){return"function"==typeof t},bt=t.all,h=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:O(t)||t===bt}:function(t){return"object"==typeof t?null!==t:O(t)},vt=e({}.isPrototypeOf),t=r("navigator","userAgent")||"",d=m.process,g=m.Deno,d=d&&d.versions||g&&g.version,g=d&&d.v8,mt=A=!(A=g?0<(L=g.split("."))[0]&&L[0]<4?1:+(L[0]+L[1]):A)&&t&&(!(L=t.match(/Edge\/(\d+)/))||74<=L[1])&&(L=t.match(/Chrome\/(\d+)/))?+L[1]:A,St=!!Object.getOwnPropertySymbols&&!a(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&mt&&mt<41}),Ot=St&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,jt=Object,wt=Ot?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return O(e)&&vt(e.prototype,jt(t))},It=String,Tt=TypeError,Et=function(t){if(O(t))return t;throw Tt(function(t){try{return It(t)}catch(t){return"Object"}}(t)+" is not a function")},Lt=function(t,e){t=t[e];return ht(t)?void 0:Et(t)},Pt=TypeError,kt=function(t,e){var n,r;if("string"===e&&O(n=t.toString)&&!h(r=S(n,t)))return r;if(O(n=t.valueOf)&&!h(r=S(n,t)))return r;if("string"!==e&&O(n=t.toString)&&!h(r=S(n,t)))return r;throw Pt("Can't convert object to primitive value")},At=Object.defineProperty,xt=function(e,n){try{At(m,e,{value:n,configurable:!0,writable:!0})}catch(t){m[e]=n}return n},d="__core-js_shared__",w=m[d]||xt(d,{}),g=G(function(t){(t.exports=function(t,e){return w[t]||(w[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),_t=Object,Mt=e({}.hasOwnProperty),I=Object.hasOwn||function(t,e){return Mt(V(t),e)},Ft=0,Rt=Math.random(),Ct=e(1..toString),T=g("wks"),E=m.Symbol,Dt=E&&E.for,Gt=Ot?E:E&&E.withoutSetter||B,Nt=TypeError,Kt=o("toPrimitive"),zt=m.document,Vt=h(zt)&&h(zt.createElement),Bt=function(t){return Vt?zt.createElement(t):{}},Ht=!y&&!a(function(){return 7!=Object.defineProperty(Bt("div"),"a",{get:function(){return 7}}).a}),Ut=Object.getOwnPropertyDescriptor,Wt={f:y?Ut:function(t,e){if(t=f(t),e=H(e),Ht)try{return Ut(t,e)}catch(t){}if(I(t,e))return ut(!S(it.f,t,e),t[e])}},L=y&&a(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Yt=String,qt=TypeError,Jt=TypeError,Xt=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,Qt="enumerable",Zt="configurable",te="writable",P={f:y?L?function(t,e,n){var r;return c(t),e=H(e),c(n),"function"==typeof t&&"prototype"===e&&"value"in n&&te in n&&!n[te]&&((r=$t(t,e))&&r[te]&&(t[e]=n.value,n={configurable:(Zt in n?n:r)[Zt],enumerable:(Qt in n?n:r)[Qt],writable:!1})),Xt(t,e,n)}:Xt:function(t,e,n){if(c(t),e=H(e),c(n),Ht)try{return Xt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Jt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},k=y?function(t,e,n){return P.f(t,e,ut(1,n))}:function(t,e,n){return t[e]=n,t},A=Function.prototype,d=y&&Object.getOwnPropertyDescriptor,x=I(A,"name"),ee={EXISTS:x,PROPER:x&&"something"===function(){}.name,CONFIGURABLE:x&&(!y||d(A,"name").configurable)},ne=e(Function.toString),re=(O(w.inspectSource)||(w.inspectSource=function(t){return ne(t)}),w.inspectSource),x=m.WeakMap,d=O(x)&&/native code/.test(String(x)),oe=g("keys"),ie={},ue="Object already initialized",ce=m.TypeError,A=m.WeakMap,ae=d||w.state?((s=w.state||(w.state=new A)).get=s.get,s.has=s.has,s.set=s.set,et=function(t,e){if(s.has(t))throw ce(ue);return e.facade=t,s.set(t,e),e},u=function(t){return s.get(t)||{}},function(t){return s.has(t)}):(l=U("state"),ie[l]=!0,et=function(t,e){if(I(t,l))throw ce(ue);return e.facade=t,k(t,l,e),e},u=function(t){return I(t,l)?t[l]:{}},function(t){return I(t,l)}),fe={set:et,get:u,has:ae,enforce:function(t){return ae(t)?u(t):et(t,{})},getterFor:function(e){return function(t){if(h(t)&&(t=u(t)).type===e)return t;throw ce("Incompatible receiver, "+e+" required")}}},se=G(function(t){var r=ee.CONFIGURABLE,o=fe.enforce,e=fe.get,i=Object.defineProperty,u=y&&!a(function(){return 8!==i(function(){},"length",{value:8}).length}),c=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!I(t,"name")||r&&t.name!==e)&&(y?i(t,"name",{value:e,configurable:!0}):t.name=e),u&&n&&I(n,"arity")&&t.length!==n.arity&&i(t,"length",{value:n.arity});try{n&&I(n,"constructor")&&n.constructor?y&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=o(t);return I(n,"source")||(n.source=c.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return O(this)&&e(this).source||re(this)},"toString")}),le=Math.ceil,pe=Math.floor,ye=Math.trunc||function(t){t=+t;return(0<t?pe:le)(t)},he=function(t){t=+t;return t!=t||0==t?0:ye(t)},de=Math.max,ge=Math.min,be=Math.min,ve=function(t){return 0<t?be(he(t),9007199254740991):0},x={includes:Y(!0),indexOf:Y(!1)},me=x.indexOf,Se=e([].push),Oe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],je=Oe.concat("length","prototype"),we={f:Object.getOwnPropertyNames||function(t){return q(t,je)}},Ie={f:Object.getOwnPropertySymbols},Te=e([].concat),Ee=r("Reflect","ownKeys")||function(t){var e=we.f(c(t)),n=Ie.f;return n?Te(e,n(t)):e},Le=/#|\.prototype\./,Pe=i.normalize=function(t){return String(t).replace(Le,".").toLowerCase()},ke=i.data={},Ae=i.NATIVE="N",xe=i.POLYFILL="P",_e=i,Me=Wt.f,Fe=x.indexOf,Re=e([].indexOf),Ce=!!Re&&1/Re([1],1,-0)<0,g=J("indexOf"),De=(v({target:"Array",proto:!0,forced:Ce||!g},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return Ce?Re(this,t,e)||0:Fe(this,t,e)}}),Object.keys||function(t){return q(t,Oe)}),Ge={f:y&&!L?Object.defineProperties:function(t,e){c(t);for(var n,r=f(e),o=De(e),i=o.length,u=0;u<i;)P.f(t,n=o[u++],r[n]);return t}},Ne=r("document","documentElement"),Ke="prototype",ze="script",Ve=U("IE_PROTO"),Be=function(t){return"<"+ze+">"+t+"</"+ze+">"},He=function(){try{nt=new ActiveXObject("htmlfile")}catch(t){}He="undefined"==typeof document||document.domain&&nt?$(nt):(t=Bt("iframe"),e="java"+ze+":",t.style.display="none",Ne.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(Be("document.F=Object")),e.close(),e.F);for(var t,e,n=Oe.length;n--;)delete He[Ke][Oe[n]];return He()},Ue=(ie[Ve]=!0,Object.create||function(t,e){var n;return null!==t?(X[Ke]=c(t),n=new X,X[Ke]=null,n[Ve]=t):n=He(),void 0===e?n:Ge.f(n,e)}),d=P.f,We=o("unscopables"),Ye=Array.prototype,qe=(null==Ye[We]&&d(Ye,We,{configurable:!0,value:Ue(null)}),{}),A=!a(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Je=U("IE_PROTO"),Xe=Object,$e=Xe.prototype,Qe=A?Xe.getPrototypeOf:function(t){var e,t=V(t);return I(t,Je)?t[Je]:(e=t.constructor,O(e)&&t instanceof e?e.prototype:t instanceof Xe?$e:null)},Ze=o("iterator"),x=!1,d=([].keys&&("next"in(g=[].keys())?(L=Qe(Qe(g)))!==Object.prototype&&(p=L):x=!0),!h(p)||a(function(){var t={};return p[Ze].call(t)!==t})),A=(O((p=d?{}:p)[Ze])||b(p,Ze,function(){return this}),{IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:x}),tn=P.f,en=o("toStringTag"),nn=function(t,e,n){(t=t&&!n?t.prototype:t)&&!I(t,en)&&tn(t,en,{configurable:!0,value:e})},rn=A.IteratorPrototype,on=function(){return this},un=String,cn=TypeError,an=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return c(t),function(t){if("object"==typeof t||O(t))return;throw cn("Can't set "+un(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),fn=ee.PROPER,sn=ee.CONFIGURABLE,ln=A.IteratorPrototype,pn=A.BUGGY_SAFARI_ITERATORS,_=o("iterator"),M="values",yn="entries",g=P.f,hn="Array Iterator",dn=fe.set,gn=fe.getterFor(hn),F=function(t,e,n,r,o,i,u){function c(t){if(t===o&&g)return g;if(!pn&&t in h)return h[t];switch(t){case"keys":case M:case yn:return function(){return new n(this,t)}}return function(){return new n(this)}}var a,f,s=n,l=e,p=void 0,p=(l+=" Iterator",s.prototype=Ue(rn,{next:ut(+!p,r)}),nn(s,l,!1),qe[l]=on,e+" Iterator"),y=!1,h=t.prototype,d=h[_]||h["@@iterator"]||o&&h[o],g=!pn&&d||c(o),r="Array"==e&&h.entries||d;if(r&&(s=Qe(r.call(new t)))!==Object.prototype&&s.next&&(Qe(s)!==ln&&(an?an(s,ln):O(s[_])||b(s,_,Z)),nn(s,p,!0)),fn&&o==M&&d&&d.name!==M&&(sn?k(h,"name",M):(y=!0,g=function(){return S(d,this)})),o)if(a={values:c(M),keys:i?g:c("keys"),entries:c(yn)},u)for(f in a)!pn&&!y&&f in h||b(h,f,a[f]);else v({target:e,proto:!0,forced:pn||y},a);return h[_]!==g&&b(h,_,g,{name:o}),qe[e]=g,a}(Array,"Array",function(t,e){dn(this,{type:hn,target:f(t),index:0,kind:e})},function(){var t=gn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,tt(void 0,!0)):tt("keys"==n?r:"values"==n?e[r]:[r,e[r]],!1)},"values"),L=qe.Arguments=qe.Array;if(Q("keys"),Q("values"),Q("entries"),y&&"values"!==L.name)try{g(L,"name",{value:"values"})}catch(t){}function bn(e,t){if(e){if(e[In]!==En)try{k(e,In,En)}catch(t){e[In]=En}if(e[Tn]||k(e,Tn,t),wn[t])for(var n in F)if(e[n]!==F[n])try{k(e,n,F[n])}catch(t){e[n]=F[n]}}}var vn,d={},x=(d[o("toStringTag")]="z","[object z]"===String(d)),mn=o("toStringTag"),Sn=Object,On="Arguments"==n(function(){return arguments}()),jn=x?n:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Sn(t),mn))?e:On?n(t):"Object"==(e=n(t))&&O(t.callee)?"Arguments":e},wn=(x||b(Object.prototype,"toString",x?{}.toString:function(){return"[object "+jn(this)+"]"},{unsafe:!0}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),A=Bt("span").classList,g=A&&A.constructor&&A.constructor.prototype,L=g===Object.prototype?void 0:g,In=o("iterator"),Tn=o("toStringTag"),En=F.values;for(vn in wn)bn(m[vn]&&m[vn].prototype,vn);bn(L,"DOMTokenList");function Ln(){}function Pn(t){if(!O(t))return!1;try{return Cn(Ln,Rn,t),!0}catch(t){return!1}}function kn(t){if(!O(t))return!1;switch(jn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Nn||!!Gn(Dn,re(t))}catch(t){return!0}}function An(t,e){return new(Bn(t))(0===e?0:e)}function R(h){var d=1==h,g=2==h,b=3==h,v=4==h,m=6==h,S=7==h,O=5==h||m;return function(t,e,n,r){for(var o,i,u,c,a=V(t),f=yt(a),s=(i=n,Et(o=e),void 0===i?o:j?Mn(o,i):function(){return o.apply(i,arguments)}),l=W(f),p=0,n=r||An,y=d?n(t,l):g||S?n(t,0):void 0;p<l;p++)if((O||p in f)&&(c=s(u=f[p],p,a),h))if(d)y[p]=c;else if(c)switch(h){case 3:return!0;case 5:return u;case 6:return p;case 2:Hn(y,u)}else switch(h){case 4:return!1;case 7:Hn(y,u)}return m?-1:b||v?v:y}}function xn(e){if(e&&e.forEach!==Wn)try{k(e,"forEach",Wn)}catch(t){e.forEach=Wn}}var _n,Mn=e(e.bind),Fn=Array.isArray||function(t){return"Array"==n(t)},Rn=[],Cn=r("Reflect","construct"),Dn=/^\s*(?:class|function)\b/,Gn=e(Dn.exec),Nn=!Dn.exec(Ln),Kn=(kn.sham=!0,!Cn||a(function(){var t;return Pn(Pn.call)||!Pn(Object)||!Pn(function(){t=!0})||t})?kn:Pn),zn=o("species"),Vn=Array,Bn=function(t){var e;return Fn(t)&&(e=t.constructor,(Kn(e)&&(e===Vn||Fn(e.prototype))||h(e)&&null===(e=e[zn]))&&(e=void 0)),void 0===e?Vn:e},Hn=e([].push),d={forEach:R(0),map:R(1),filter:R(2),some:R(3),every:R(4),find:R(5),findIndex:R(6),filterReject:R(7)},Un=d.forEach,Wn=J("forEach")?[].forEach:function(t){return Un(this,t,1<arguments.length?arguments[1]:void 0)};v({target:"Array",proto:!0,forced:[].forEach!=Wn},{forEach:Wn});for(_n in wn)wn[_n]&&xn(m[_n]&&m[_n].prototype);xn(L);function Yn(i){return nr?function(t,e){var n=2<function(t,e){if(t<e)throw er("Not enough arguments");return t}(arguments.length,1),r=O(t)?t:rr(t),o=n?tr(arguments,2):void 0;return i(n?function(){Zn(r,this,o)}:r,e)}:i}var qn,Jn=o("species"),Xn=d.filter,x=(qn="filter",51<=mt||!a(function(){var t=[];return(t.constructor={})[Jn]=function(){return{foo:1}},1!==t[qn](Boolean).foo})),A=(v({target:"Array",proto:!0,forced:!x},{filter:function(t){return Xn(this,t,1<arguments.length?arguments[1]:void 0)}}),Function.prototype),$n=A.apply,Qn=A.call,Zn="object"==typeof Reflect&&Reflect.apply||(j?Qn.bind($n):function(){return Qn.apply($n,arguments)}),tr=e([].slice),er=TypeError,nr=/MSIE .\./.test(t),rr=m.Function,g={setTimeout:Yn(m.setTimeout),setInterval:Yn(m.setInterval)},L=g.setInterval,d=(v({global:!0,bind:!0,forced:m.setInterval!==L},{setInterval:L}),g.setTimeout),x=(v({global:!0,bind:!0,forced:m.setTimeout!==d},{setTimeout:d}),{prefix:"joint.storage",insert:function(t,e,n){var r=e.id||D.util.uuid(),o=this.loadIndex(t);-1===o.keys.indexOf(r)&&o.keys.push(r),this.setItem(this.docKey(t,r),e),this.setItem(this.indexKey(t),o),this.callback(n,null,D.util.assign({},e,{id:r}))},find:function(n,t,r){var e=this.loadIndex(n),o=[];D.util.isEmpty(t)?(e.keys.forEach(function(t){var e=this.getItem(this.docKey(n,t));e||this.callback(r,new Error("Storage inconsistency. No document found for an ID "+t+" from index.")),o.push(e)},this),this.callback(r,null,o)):t.id?(e=this.getItem(this.docKey(n,t.id)),this.callback(r,null,e?[e]:[])):this.callback(r,null,[])},remove:function(e,n,t){var r=this.loadIndex(e);D.util.isEmpty(n)?(r.keys.forEach(function(t){localStorage.removeItem(this.docKey(e,t))},this),localStorage.removeItem(this.indexKey(e)),this.callback(t,null)):n.id&&(r.keys=r.keys.filter(function(t){return t!==n.id}),localStorage.removeItem(this.docKey(e,n.id)),this.setItem(this.indexKey(e),r),this.callback(t,null))},callback:function(t,e,n){t&&setTimeout(function(){t(e,n)},1)},setItem:function(t,e){localStorage.setItem(t,JSON.stringify(e))},getItem:function(t){t=localStorage.getItem(t);return t&&JSON.parse(t)},loadIndex:function(t){t=this.getItem(this.indexKey(t))||{};return t.keys=t.keys||[],t},docKey:function(t,e){return this.prefix+"."+t+".docs."+e},indexKey:function(t){return this.prefix+"."+t+".index"}});C.Local=x}(this.joint.storage=this.joint.storage||{},joint);