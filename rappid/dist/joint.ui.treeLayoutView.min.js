/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(B,n,f){"use strict";function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){c=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?V(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function N(t,e){return t(e={exports:{}},e.exports),e.exports}function F(t){return t&&t.Math==Math&&t}function s(t){try{return!!t()}catch(t){return!0}}function $(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function G(t){return p?pt(t):function(){return ht.apply(t,arguments)}}function r(t){return vt(dt(t),8,-1)}function e(t){if("Function"===r(t))return G(t)}function U(t){if(bt(t))throw wt("Can't call method on "+t);return t}function z(t){return mt(U(t))}function i(t,e){return arguments.length<2?(n=y[t],d(n)?n:void 0):y[t]&&y[t][e];var n}function H(t){return _t(U(t))}function W(t){return"Symbol("+(void 0===t?"":t)+")_"+$t(++Nt+Ft,36)}function o(t){var e;return S(Gt,t)&&(Tt||"string"==typeof Gt[t])||(e="Symbol."+t,Tt&&S(C,t)?Gt[t]=C[t]:Gt[t]=(jt&&Ut?Ut:zt)(e)),Gt[t]}function q(t){return t=function(t,e){if(!v(t)||Ot(t))return t;var n=Dt(t,Wt);if(n){if(n=m(n,t,e=void 0===e?"default":e),!v(n)||Ot(n))return n;throw Ht("Can't convert object to primitive value")}return Mt(t,e=void 0===e?"number":e)}(t,"string"),Ot(t)?t:t+""}function X(t){return Xt?qt.createElement(t):{}}function Y(t,e,n,r){var i=(r=r||{}).enumerable,o=void 0!==r.name?r.name:e;if(d(n)&&ge(n,o,r),r.global)i?t[e]=n:Bt(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:ae.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t}function J(t){return Ee(t.length)}function K(c){return function(t,e,n){var r,i=z(t),o=J(i),a=function(t,e){t=we(t);return t<0?Pe(t+e,0):Se(t,e)}(n,o);if(c&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((c||a in i)&&i[a]===e)return c||a||0;return!c&&-1}}function Z(t,e){return(t=Me[Ie(t)])==Be||t!=ke&&(d(e)?s(e):!!e)}function a(t,e){var n,r,i,o=t.target,a=t.global,c=t.stat,s=a?y:c?y[o]||Bt(o,{}):(y[o]||{}).prototype;if(s)for(n in e){if(r=e[n],i=t.dontCallGetSet?(i=Ve(s,n))&&i.value:s[n],!_e(a?n:o+(c?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;for(var u=r,l=i,f=g=v=d=p=h=void 0,h=Re(l),p=ae.f,d=Kt.f,v=0;v<h.length;v++){var g=h[v];S(u,g)||f&&S(f,g)||p(u,g,d(l,g))}}(t.sham||i&&i.sham)&&ce(r,"sham",!0),Y(s,n,r,t)}}function Q(t){if("Symbol"===Ge(t))throw TypeError("Cannot convert a Symbol value to a string");return Ue(t)}function tt(t,e){return w(t),void 0===e?t:p?We(t,e):function(){return t.apply(e,arguments)}}function et(){}function nt(t){if(!d(t))return!1;try{return Ye(et,Xe,t),!0}catch(t){return!1}}function rt(t){if(!d(t))return!1;switch(Ge(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ze||!!Ke(Je,le(t))}catch(t){return!0}}function it(t,e){return new(nn(t))(0===e?0:e)}function c(h){var p=1==h,d=2==h,v=3==h,g=4==h,y=6==h,m=7==h,b=5==h||y;return function(t,e,n,r){for(var i,o,a=H(t),c=mt(a),s=tt(e,n),u=J(c),l=0,e=r||it,f=p?e(t,u):d||m?e(t,0):void 0;l<u;l++)if((b||l in c)&&(o=s(i=c[l],l,a),h))if(p)f[l]=o;else if(o)switch(h){case 3:return!0;case 5:return i;case 6:return l;case 2:rn(f,i)}else switch(h){case 4:return!1;case 7:rn(f,i)}return y?-1:v||g?g:f}}function ot(t,e){var n=[][t];return!!n&&s(function(){n.call(null,e||function(){return 1},1)})}var at,ct,u,l,st,y=F("object"==typeof globalThis&&globalThis)||F("object"==typeof window&&window)||F("object"==typeof self&&self)||F("object"==typeof t&&t)||function(){return this}()||Function("return this")(),h=!s(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),p=!s(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),ut=Function.prototype.call,m=p?ut.bind(ut):function(){return ut.apply(ut,arguments)},t={}.propertyIsEnumerable,lt=Object.getOwnPropertyDescriptor,ft={f:lt&&!t.call({1:2},1)?function(t){t=lt(this,t);return!!t&&t.enumerable}:t},t=Function.prototype,ht=t.call,pt=p&&t.bind.bind(ht,ht),dt=G({}.toString),vt=G("".slice),gt=Object,yt=e("".split),mt=s(function(){return!gt("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?yt(t,""):gt(t)}:gt,bt=function(t){return null==t},wt=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},Pt=t.all,d=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===Pt}:function(t){return"function"==typeof t},St=t.all,v=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:d(t)||t===St}:function(t){return"object"==typeof t?null!==t:d(t)},Ct=e({}.isPrototypeOf),t=i("navigator","userAgent")||"",g=y.process,b=y.Deno,g=g&&g.versions||b&&b.version,b=g&&g.v8,Et=j=!(j=b?0<(E=b.split("."))[0]&&E[0]<4?1:+(E[0]+E[1]):j)&&t&&(!(E=t.match(/Edge\/(\d+)/))||74<=E[1])&&(E=t.match(/Chrome\/(\d+)/))?+E[1]:j,Tt=!!Object.getOwnPropertySymbols&&!s(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Et&&Et<41}),jt=Tt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,xt=Object,Ot=jt?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return d(e)&&Ct(e.prototype,xt(t))},Lt=String,At=function(t){try{return Lt(t)}catch(t){return"Object"}},Rt=TypeError,w=function(t){if(d(t))return t;throw Rt(At(t)+" is not a function")},Dt=function(t,e){t=t[e];return bt(t)?void 0:w(t)},It=TypeError,Mt=function(t,e){var n,r;if("string"===e&&d(n=t.toString)&&!v(r=m(n,t)))return r;if(d(n=t.valueOf)&&!v(r=m(n,t)))return r;if("string"!==e&&d(n=t.toString)&&!v(r=m(n,t)))return r;throw It("Can't convert object to primitive value")},kt=Object.defineProperty,Bt=function(e,n){try{kt(y,e,{value:n,configurable:!0,writable:!0})}catch(t){y[e]=n}return n},g="__core-js_shared__",P=y[g]||Bt(g,{}),b=N(function(t){(t.exports=function(t,e){return P[t]||(P[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),_t=Object,Vt=e({}.hasOwnProperty),S=Object.hasOwn||function(t,e){return Vt(H(t),e)},Nt=0,Ft=Math.random(),$t=e(1..toString),Gt=b("wks"),C=y.Symbol,Ut=C&&C.for,zt=jt?C:C&&C.withoutSetter||W,Ht=TypeError,Wt=o("toPrimitive"),qt=y.document,Xt=v(qt)&&v(qt.createElement),Yt=!h&&!s(function(){return 7!=Object.defineProperty(X("div"),"a",{get:function(){return 7}}).a}),Jt=Object.getOwnPropertyDescriptor,Kt={f:h?Jt:function(t,e){if(t=z(t),e=q(e),Yt)try{return Jt(t,e)}catch(t){}if(S(t,e))return $(!m(ft.f,t,e),t[e])}},E=h&&s(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Zt=String,Qt=TypeError,T=function(t){if(v(t))return t;throw Qt(Zt(t)+" is not an object")},te=TypeError,ee=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,re="enumerable",ie="configurable",oe="writable",ae={f:h?E?function(t,e,n){var r;return T(t),e=q(e),T(n),"function"==typeof t&&"prototype"===e&&"value"in n&&oe in n&&!n[oe]&&((r=ne(t,e))&&r[oe]&&(t[e]=n.value,n={configurable:(ie in n?n:r)[ie],enumerable:(re in n?n:r)[re],writable:!1})),ee(t,e,n)}:ee:function(t,e,n){if(T(t),e=q(e),T(n),Yt)try{return ee(t,e,n)}catch(t){}if("get"in n||"set"in n)throw te("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ce=h?function(t,e,n){return ae.f(t,e,$(1,n))}:function(t,e,n){return t[e]=n,t},j=Function.prototype,g=h&&Object.getOwnPropertyDescriptor,E=S(j,"name"),se={EXISTS:E,PROPER:E&&"something"===function(){}.name,CONFIGURABLE:E&&(!h||g(j,"name").configurable)},ue=e(Function.toString),le=(d(P.inspectSource)||(P.inspectSource=function(t){return ue(t)}),P.inspectSource),E=y.WeakMap,g=d(E)&&/native code/.test(String(E)),j=b("keys"),fe={},he="Object already initialized",pe=y.TypeError,E=y.WeakMap,de=g||P.state?((u=P.state||(P.state=new E)).get=u.get,u.has=u.has,u.set=u.set,at=function(t,e){if(u.has(t))throw pe(he);return e.facade=t,u.set(t,e),e},ct=function(t){return u.get(t)||{}},function(t){return u.has(t)}):(l=j[b="state"]||(j[b]=W(b)),fe[l]=!0,at=function(t,e){if(S(t,l))throw pe(he);return e.facade=t,ce(t,l,e),e},ct=function(t){return S(t,l)?t[l]:{}},function(t){return S(t,l)}),ve={set:at,get:ct,has:de,enforce:function(t){return de(t)?ct(t):at(t,{})},getterFor:function(e){return function(t){if(v(t)&&(t=ct(t)).type===e)return t;throw pe("Incompatible receiver, "+e+" required")}}},ge=N(function(t){var r=se.CONFIGURABLE,i=ve.enforce,e=ve.get,o=Object.defineProperty,a=h&&!s(function(){return 8!==o(function(){},"length",{value:8}).length}),c=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!S(t,"name")||r&&t.name!==e)&&(h?o(t,"name",{value:e,configurable:!0}):t.name=e),a&&n&&S(n,"arity")&&t.length!==n.arity&&o(t,"length",{value:n.arity});try{n&&S(n,"constructor")&&n.constructor?h&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=i(t);return S(n,"source")||(n.source=c.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return d(this)&&e(this).source||le(this)},"toString")}),ye=Math.ceil,me=Math.floor,be=Math.trunc||function(t){t=+t;return(0<t?me:ye)(t)},we=function(t){t=+t;return t!=t||0==t?0:be(t)},Pe=Math.max,Se=Math.min,Ce=Math.min,Ee=function(t){return 0<t?Ce(we(t),9007199254740991):0},Te={includes:K(!0),indexOf:K(!1)}.indexOf,je=e([].push),xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),Oe={f:Object.getOwnPropertyNames||function(t){var e,n=xe,r=z(t),i=0,o=[];for(e in r)!S(fe,e)&&S(r,e)&&je(o,e);for(;n.length>i;)!S(r,e=n[i++])||~Te(o,e)||je(o,e);return o}},Le={f:Object.getOwnPropertySymbols},Ae=e([].concat),Re=i("Reflect","ownKeys")||function(t){var e=Oe.f(T(t)),n=Le.f;return n?Ae(e,n(t)):e},De=/#|\.prototype\./,Ie=Z.normalize=function(t){return String(t).replace(De,".").toLowerCase()},Me=Z.data={},ke=Z.NATIVE="N",Be=Z.POLYFILL="P",_e=Z,Ve=Kt.f,g={},E=(g[o("toStringTag")]="z","[object z]"===String(g)),Ne=o("toStringTag"),Fe=Object,$e="Arguments"==r(function(){return arguments}()),Ge=E?r:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Fe(t),Ne))?e:$e?r(t):"Object"==(e=r(t))&&d(t.callee)?"Arguments":e},Ue=String,ze=/"/g,He=e("".replace),We=(a({target:"String",proto:!0,forced:(st="link",s(function(){var t=""[st]('"');return t!==t.toLowerCase()||3<t.split('"').length}))},{link:function(t){return n="a",r="href",t=t,e=Q(U(e=this)),i="<"+n,""!==r&&(i+=" "+r+'="'+He(Q(t),ze,"&quot;")+'"'),i+">"+e+"</"+n+">";var e,n,r,i}}),e(e.bind)),qe=Array.isArray||function(t){return"Array"==r(t)},Xe=[],Ye=i("Reflect","construct"),Je=/^\s*(?:class|function)\b/,Ke=e(Je.exec),Ze=!Je.exec(et),Qe=(rt.sham=!0,!Ye||s(function(){var t;return nt(nt.call)||!nt(Object)||!nt(function(){t=!0})||t})?rt:nt),tn=o("species"),en=Array,nn=function(t){var e;return qe(t)&&(e=t.constructor,(Qe(e)&&(e===en||qe(e.prototype))||v(e)&&null===(e=e[tn]))&&(e=void 0)),void 0===e?en:e},rn=e([].push),j={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)},on=j.forEach,an=ot("forEach")?[].forEach:function(t){return on(this,t,1<arguments.length?arguments[1]:void 0)};a({target:"Array",proto:!0,forced:[].forEach!=an},{forEach:an});function cn(e){if(e&&e.forEach!==an)try{ce(e,"forEach",an)}catch(t){e.forEach=an}}E||Y(Object.prototype,"toString",E?{}.toString:function(){return"[object "+Ge(this)+"]"},{unsafe:!0});var sn,un={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},b=X("span").classList,g=b&&b.constructor&&b.constructor.prototype,E=g===Object.prototype?void 0:g;for(sn in un)un[sn]&&cn(y[sn]&&y[sn].prototype);cn(E);function ln(t,e){var n,t=T(t).constructor;if(void 0===t||bt(n=T(t)[bn]))return e;if(Qe(t=n))return t;throw mn(At(t)+" is not a constructor")}var fn,hn,pn=j.every,x=(a({target:"Array",proto:!0,forced:!ot("every")},{every:function(t){return pn(this,t,1<arguments.length?arguments[1]:void 0)}}),"process"==r(y.process)),dn=String,vn=TypeError,b=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return T(t),function(t){if("object"==typeof t||d(t))return;throw vn("Can't set "+dn(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),g=ae.f,E=o("toStringTag"),gn=o("species"),yn=TypeError,mn=TypeError,bn=o("species"),O=Function.prototype,wn=O.apply,Pn=O.call,Sn="object"==typeof Reflect&&Reflect.apply||(p?Pn.bind(wn):function(){return Pn.apply(wn,arguments)}),Cn=i("document","documentElement"),En=e([].slice),Tn=TypeError,O=/(?:ipad|iphone|ipod).*applewebkit/i.test(t),L=y.setImmediate,A=y.clearImmediate,jn=y.process,xn=y.Dispatch,On=y.Function,R=y.MessageChannel,Ln=y.String,An=0,Rn={},Dn="onreadystatechange";try{fn=y.location}catch(t){}function In(t){return function(){Xn(t)}}function Mn(t){Xn(t.data)}function kn(t){y.postMessage(Ln(t),fn.protocol+"//"+fn.host)}function Bn(){this.head=null,this.tail=null}function _n(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw ar("Bad Promise constructor");n=t,r=e}),this.resolve=w(n),this.reject=w(r)}function Vn(t,e){var n,r,i,o,a=e.value,c=e.state==Cr,s=c?t.ok:t.fail,u=t.resolve,l=t.reject,f=t.domain;try{s?(c||(e.rejection===jr&&(o=e,m(sr,y,function(){var t=o.facade;x?yr.emit("rejectionHandled",t):Lr(Sr,t,o.value)})),e.rejection=Tr),!0===s?n=a:(f&&f.enter(),n=s(a),f&&(f.exit(),i=!0)),n===t.promise?l(vr("Promise-chain cycle")):(r=xr(n))?m(r,n,u,l):u(n)):l(a)}catch(t){f&&!i&&f.exit(),l(t)}}var Nn,D,Fn,$n,Gn,Un,zn,Hn,Wn,qn,Xn=function(t){var e;S(Rn,t)&&(e=Rn[t],delete Rn[t],e())},R=(L&&A||(L=function(t){var e=arguments.length,n=1;if(e<n)throw Tn("Not enough arguments");var r=d(t)?t:On(t),i=En(arguments,1);return Rn[++An]=function(){Sn(r,void 0,i)},hn(An),An},A=function(t){delete Rn[t]},x?hn=function(t){jn.nextTick(In(t))}:xn&&xn.now?hn=function(t){xn.now(In(t))}:R&&!O?(I=(R=new R).port2,R.port1.onmessage=Mn,hn=tt(I.postMessage,I)):y.addEventListener&&d(y.postMessage)&&!y.importScripts&&fn&&"file:"!==fn.protocol&&!s(kn)?(hn=kn,y.addEventListener("message",Mn,!1)):hn=Dn in X("script")?function(t){Cn.appendChild(X("script"))[Dn]=function(){Cn.removeChild(this),Xn(t)}}:function(t){setTimeout(In(t),0)}),{set:L,clear:A}),I=/ipad|iphone|ipod/i.test(t)&&void 0!==y.Pebble,L=/web0s(?!.*chrome)/i.test(t),A=Kt.f,Yn=R.set,t=y.MutationObserver||y.WebKitMutationObserver,Jn=y.document,Kn=y.process,M=y.Promise,A=A(y,"queueMicrotask"),A=A&&A.value,Zn=(A||(Nn=function(){var t,e;for(x&&(t=Kn.domain)&&t.exit();D;){e=D.fn,D=D.next;try{e()}catch(t){throw D?$n():Fn=void 0,t}}Fn=void 0,t&&t.enter()},$n=O||x||L||!t||!Jn?!I&&M&&M.resolve?((O=M.resolve(void 0)).constructor=M,zn=tt(O.then,O),function(){zn(Nn)}):x?function(){Kn.nextTick(Nn)}:(Yn=tt(Yn,y),function(){Yn(Nn)}):(Gn=!0,Un=Jn.createTextNode(""),new t(Nn).observe(Un,{characterData:!0}),function(){Un.data=Gn=!Gn})),A||function(t){t={fn:t,next:void 0};Fn&&(Fn.next=t),D||(D=t,$n()),Fn=t}),Qn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},tr=(Bn.prototype={add:function(t){t={item:t,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},Bn),k=y.Promise,er="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,nr=!er&&!x&&"object"==typeof window&&"object"==typeof document,rr=(k&&k.prototype,o("species")),ir=!1,or=d(y.PromiseRejectionEvent),L={CONSTRUCTOR:_e("Promise",function(){var t=le(k),e=t!==String(k);if(!e&&66===Et)return!0;if(!Et||Et<51||!/native code/.test(t)){var t=new k(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((t.constructor={})[rr]=n,!(ir=t.then(function(){})instanceof n))return!0}return!e&&(nr||er)&&!or}),REJECTION_EVENT:or,SUBCLASSING:ir},ar=TypeError,cr={f:function(t){return new _n(t)}},sr=R.set,ur="Promise",I=L.CONSTRUCTOR,lr=L.REJECTION_EVENT,M=L.SUBCLASSING,fr=ve.getterFor(ur),hr=ve.set,O=k&&k.prototype,pr=k,dr=O,vr=y.TypeError,gr=y.document,yr=y.process,mr=cr.f,br=mr,wr=!!(gr&&gr.createEvent&&y.dispatchEvent),Pr="unhandledrejection",Sr="rejectionhandled",Cr=1,Er=2,Tr=1,jr=2,xr=function(t){var e;return!(!v(t)||!d(e=t.then))&&e},Or=function(n,i){n.notified||(n.notified=!0,Zn(function(){for(var t,r,e=n.reactions;t=e.get();)Vn(t,n);n.notified=!1,i&&!n.rejection&&(r=n,m(sr,y,function(){var t=r.facade,e=r.value,n=Ar(r);if(n&&(n=Qn(function(){x?yr.emit("unhandledRejection",e,t):Lr(Pr,t,e)}),r.rejection=x||Ar(r)?jr:Tr,n.error))throw n.value}))}))},Lr=function(t,e,n){var r;wr?((r=gr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),y.dispatchEvent(r)):r={promise:e,reason:n},!lr&&(e=y["on"+t])?e(r):t===Pr&&function(t,e){var n=y.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Ar=function(t){return t.rejection!==Tr&&!t.parent},Rr=function(e,n,r){return function(t){e(n,t,r)}},Dr=function(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=Er,Or(t,!0))},Ir=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw vr("Promise can't be resolved itself");var r=xr(t);r?Zn(function(){var e={done:!1};try{m(r,t,Rr(Ir,e,n),Rr(Dr,e,n))}catch(t){Dr(e,t,n)}}):(n.value=t,n.state=Cr,Or(n,!1))}catch(t){Dr({done:!1},t,n)}}};if(I&&(dr=(pr=function(t){!function(t,e){if(Ct(e,t))return;throw yn("Incorrect invocation")}(this,dr),w(t),m(Hn,this);var e=fr(this);try{t(Rr(Ir,e),Rr(Dr,e))}catch(t){Dr(e,t)}}).prototype,(Hn=function(t){hr(this,{type:ur,done:!1,notified:!1,parent:!1,reactions:new tr,rejection:!1,state:0,value:void 0})}).prototype=Y(dr,"then",function(t,e){var n=fr(this),r=mr(ln(this,pr));return n.parent=!0,r.ok=!d(t)||t,r.fail=d(e)&&e,r.domain=x?yr.domain:void 0,0==n.state?n.reactions.add(r):Zn(function(){Vn(r,n)}),r.promise}),Wn=function(){var t=new Hn,e=fr(t);this.promise=t,this.resolve=Rr(Ir,e),this.reject=Rr(Dr,e)},cr.f=mr=function(t){return t===pr||void 0===t?new Wn:br(t)},d(k)&&O!==Object.prototype)){qn=O.then,M||Y(O,"then",function(t,e){var n=this;return new pr(function(t,e){m(qn,n,t,e)}).then(t,e)},{unsafe:!0});try{delete O.constructor}catch(t){}b&&b(O,dr)}a({global:!0,constructor:!0,wrap:!0,forced:I},{Promise:pr}),t=!(Jn=ur),(A=(A=pr)&&!t?A.prototype:A)&&!S(A,E)&&g(A,E,{configurable:!0,value:Jn}),R=i(R=ur),M=ae.f,h&&R&&!R[gn]&&M(R,gn,{configurable:!0,get:function(){return this}});function Mr(t,e,n){var r,i;T(t);try{if(!(r=Dt(t,"return"))){if("throw"===e)throw n;return}r=m(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;T(r)}function kr(t,e){this.stopped=t,this.result=e}function Br(t,e,n){function r(t){return o&&Mr(o,"normal",t),new kr(!0,t)}function i(t){return h?(T(t),v?g(t[0],t[1],r):g(t[0],t[1])):v?g(t,r):g(t)}var o,a,c,s,u,l,f=n&&n.that,h=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),g=tt(e,f);if(p)o=t.iterator;else if(d)o=t;else{if(!(n=$r(t)))throw Ur(At(t)+" is not iterable");if(void 0!==(e=n)&&(_r.Array===e||Nr[Vr]===e)){for(a=0,c=J(t);a<c;a++)if((s=i(t[a]))&&Ct(zr,s))return;return}o=function(t,e){e=arguments.length<2?$r(t):e;if(w(e))return T(m(e,t));throw Gr(At(t)+" is not iterable")}(t,n)}for(u=(p?t:o).next;!(l=m(u,o)).done;){try{s=i(l.value)}catch(t){Mr(o,"throw",t)}if("object"==typeof s&&s&&Ct(zr,s))return}}var _r={},Vr=o("iterator"),Nr=Array.prototype,Fr=o("iterator"),$r=function(t){if(!bt(t))return Dt(t,Fr)||Dt(t,"@@iterator")||_r[Ge(t)]},Gr=TypeError,Ur=TypeError,zr=kr.prototype,Hr=o("iterator"),Wr=!1;try{var qr=0,Xr={next:function(){return{done:!!qr++}},return:function(){Wr=!0}};Xr[Hr]=function(){return this},Array.from(Xr,function(){throw 2})}catch(t){}b=L.CONSTRUCTOR||!function(t,e){if(!e&&!Wr)return!1;var n=!1;try{var r={};r[Hr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){k.all(t).then(void 0,function(){})}),a({target:"Promise",stat:!0,forced:b},{all:function(t){var c=this,e=cr.f(c),s=e.resolve,u=e.reject,n=Qn(function(){var r=w(c.resolve),i=[],o=0,a=1;Br(t,function(t){var e=o++,n=!1;a++,m(r,c,t).then(function(t){n||(n=!0,i[e]=t,--a||s(i))},u)}),--a||s(i)});return n.error&&u(n.value),e.promise}}),O=L.CONSTRUCTOR,I=k&&k.prototype;a({target:"Promise",proto:!0,forced:O,real:!0},{catch:function(t){return this.then(void 0,t)}}),d(k)&&(t=i("Promise").prototype.catch,I.catch!==t&&Y(I,"catch",t,{unsafe:!0})),a({target:"Promise",stat:!0,forced:b},{race:function(t){var n=this,r=cr.f(n),i=r.reject,e=Qn(function(){var e=w(n.resolve);Br(t,function(t){m(e,n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}});a({target:"Promise",stat:!0,forced:L.CONSTRUCTOR},{reject:function(t){var e=cr.f(this);return m(e.reject,void 0,t),e.promise}});var g=L.CONSTRUCTOR,Yr=(i("Promise"),a({target:"Promise",stat:!0,forced:g},{resolve:function(t){return t=t,T(e=this),v(t)&&t.constructor===e?t:((0,(e=cr.f(e)).resolve)(t),e.promise);var e}}),o("species")),Jr=j.map;Kr="map";a({target:"Array",proto:!0,forced:!(51<=Et||!s(function(){var t=[];return(t.constructor={})[Yr]=function(){return{foo:1}},1!==t[Kr](Boolean).foo}))},{map:function(t){return Jr(this,t,1<arguments.length?arguments[1]:void 0)}});var Kr,Zr=Function,Qr=e([].concat),ti=e([].join),ei={},A=p?Zr.bind:function(a){var c=w(this),t=c.prototype,s=En(arguments,1),u=function(){var t=Qr(s,En(arguments));if(this instanceof u){var e=c,n=t.length,r=t;if(!S(ei,n)){for(var i=[],o=0;o<n;o++)i[o]="a["+o+"]";ei[n]=Zr("C,a","return new C("+ti(i,",")+")")}return ei[n](e,r)}return c.apply(a,t)};return v(t)&&(u.prototype=t),u},Jn=(a({target:"Function",proto:!0,forced:Function.bind!==A},{bind:A}),a({target:"Array",stat:!0},{isArray:qe}),f.mvc.View.extend({MINIMAL_PREVIEW_SIZE:10,className:"tree-layout",documentEvents:{mousemove:"onPointermove",touchmove:"onPointermove",mouseup:"onPointerup",touchend:"onPointerup"},options:{previewAttrs:{parent:{rx:2,ry:2}},useModelGeometry:!1,clone:function(t){return t.clone()},canInteract:function(){return!0},validateConnection:null,validatePosition:null,paperConstructor:f.dia.Paper,paperOptions:null,reconnectElements:null,translateElements:null},init:function(){this.toggleDefaultInteraction(!1),this.startListening(),this.render(),this.onSetTheme(null,this.theme)},startListening:function(){this.enable()},_isEnabled:!1,_onPointerdown:null,enable:function(){var t=this.options.paper,e=(this.disable(),this.canInteract(this.onPointerdown));this._isEnabled=!0,this.listenTo(t,"element:pointerdown",e),this._onPointerdown=e},disable:function(){var t=this._onPointerdown,e=this.options.paper;this._isEnabled=!1,t&&(this.stopListening(e,"element:pointerdown",t),this._onPointerdown=null)},isDisabled:function(){return!this._isEnabled},toggleDefaultInteraction:function(t){this.options.paper.setInteractivity(t)},render:function(){var t=this.options.paper,e=(this.$activeBox=n("<div>").addClass("tree-layout-box active hidden").appendTo(this.el),f.util.assign({},this.options.paperOptions,{interactive:!1,width:"100%",height:"100%"}));return this.draggingPaper=new this.options.paperConstructor(e),this.draggingPaper.undelegateEvents(),this.$translateBox=n("<div>").addClass("tree-layout-box translate hidden").append(this.draggingPaper.render().el).appendTo(this.el),this.$mask=n("<div>").addClass("tree-layout-mask"),this.svgViewport=f.V(t.cells),this.svgPreviewChild=f.V(this.renderChildPreview()).attr(this.options.previewAttrs.child||{}).addClass("tree-layout-preview child"),this.svgPreviewConnection=f.V(this.renderConnectionPreview()).attr(this.options.previewAttrs.link||{}).addClass("tree-layout-preview link"),this.svgPreviewParent=f.V(this.renderParentPreview()).attr(this.options.previewAttrs.parent||{}).addClass("tree-layout-preview parent"),this.svgPreview=f.V("g").addClass("tree-layout-preview-group").append([this.svgPreviewConnection,this.svgPreviewParent,this.svgPreviewChild]),this.$el.appendTo(t.el),this},renderChildPreview:function(){return f.V("circle")},renderParentPreview:function(){return f.V("rect")},renderConnectionPreview:function(){return f.V("path")},onSetTheme:function(e,n){[this.svgPreview,this.$mask].forEach(function(t){t&&(e&&t.removeClass(this.themeClassNamePrefix+e),t.addClass(this.themeClassNamePrefix+n))},this)},onRemove:function(){this.svgPreview.remove(),this.$mask.remove()},toggleDropping:function(t){this.$mask.toggleClass("dropping-not-allowed",!t),this.$translateBox.toggleClass("no-drop",!t)},canDrop:function(){return this.isActive()&&!this.$translateBox.hasClass("no-drop")},isActive:function(){return!this.$translateBox.hasClass("hidden")},updateBox:function(t,e){t.css({width:e.width,height:e.height,left:e.x,top:e.y})},positionTranslateBox:function(t){t=f.V.transformPoint(t,this.ctm);this.$translateBox.css({left:t.x,top:t.y})},prepareDraggingPaper:function(t){t=this.options.clone(t).position(0,0);this.draggingPaper.scale(this.ctm.a,this.ctm.d),this.draggingPaper.model.resetCells([t])},dragstart:function(t,e,n){var r=this.$translateBox,i=this.$activeBox,o=this.options,a=o.paper,o=o.useModelGeometry;this.toggleDropping(!1),this.ctm=a.matrix();var t=_(t,1)[0],a=t.findView(a);a?(a=a.getBBox({useModelGeometry:o}),this.updateBox(r,f.util.defaults({x:e,y:n},a)),this.updateBox(i,a),i.removeClass("external")):(o=f.V.transformRect(t.getBBox(),this.ctm),this.updateBox(r,f.util.defaults({x:e,y:n},o)),i.addClass("external")),this.positionTranslateBox({x:e,y:n}),this.show(),this.prepareDraggingPaper(t)},drag:function(t,e,n){var r,i,o,a,c,s=this,u=this.model,l={x:e,y:n};this.candidate&&(this.candidate=null,this.hidePreview()),this.positionTranslateBox(l),(r=(i=u.getMinimalRootAreaByPoint(l))?i.findMinimalAreaByPoint(l,{expandBy:Math.min(u.get("siblingGap"),u.get("gap"))/2}):r)?(i=this.findDirection(r,l),o=r.getLayoutSiblings(i),a=o.getSiblingRankByPoint(l),f.util.toArray(t).every(function(t){return this.isConnectionValid(t,o,a)},this)?(this.candidate={id:r.root.id,direction:i,siblingRank:a},this.updatePreview(o,a),this.showPreview(),this.toggleDropping(!0)):this.toggleDropping(!1)):(u=!0,"function"==typeof(c=this.options.validatePosition)&&(u=f.util.toArray(t).every(function(t){return c.call(s,t,e,n,s)})),this.toggleDropping(u))},dragend:function(t,e,n){var r,i=this.candidate,o=this.options;this.canDrop()&&(i?("function"==typeof(r=o.reconnectElements)?r.apply(this,[t,o.paper.getModelById(i.id),i.siblingRank,i.direction,this]):this.reconnectElements(t,i),this.candidate=null):"function"==typeof(r=o.translateElements)?r.call(this,t,e,n,this):this.translateElements(t,e,n)),this.hide()},show:function(){var t=this.$mask,e=this.$activeBox,n=this.$translateBox,r=this.options.paper.$el;r.is(t.parent())||t.appendTo(r),e.toggleClass("hidden",e.hasClass("external")),n.removeClass("hidden")},hide:function(){this.$mask.remove().removeClass("dropping-not-allowed"),this.$activeBox.addClass("hidden"),this.$translateBox.addClass("hidden"),this.hidePreview()},cancelDrag:function(){this.candidate=null,this.undelegateDocumentEvents(),this.hide()},reconnectElement:function(t,e){var n,r=this.model,i=this.options,o=r.graph,o=(o.getCell(t)||(o.addCell(t),r.layoutTree(t)),e.siblingRank+.5),a={direction:e.direction,siblingRank:o,ui:!0,treeLayoutView:this.cid};r.reconnectElement(t,e.id,a)||((n=(i=i.paper).getDefaultLink(t.findView(i))).set({source:{id:e.id},target:{id:t.id}}),n.addTo(i.model,a),r.changeSiblingRank(t,o,a),r.changeDirection(t,e.direction,a),n=r.getAttribute(t,"direction"),r.updateDirections(t,[n,e.direction],a))},reconnectElements:function(t,e){t.forEach(function(t){this.reconnectElement(t,e)},this),this.layout()},translateElement:function(t,e,n){var r=this.model.graph,i=r.getConnectedLinks(t,{inbound:!0}),i=(f.util.invoke(i,"remove"),t.get("size"));t.set("position",{x:e-i.width/2,y:n-i.height/2},{ui:!0,treeLayoutView:this.cid}),r.getCell(t)||r.addCell(t,{ui:!0,treeLayoutView:this.cid})},translateElements:function(t,e,n){t.forEach(function(t){this.translateElement(t,e,n)},this),this.layout()},layout:function(){this.model.layout({ui:!0,treeLayoutView:this.cid})},updatePreview:function(t,e){var n=t.parentArea.root,r=Math.max(this.model.get("siblingGap")/2,this.MINIMAL_PREVIEW_SIZE),r={width:r,height:r},e=t.getNeighborPointFromRank(e),i=t.getConnectionPoints(e,{ignoreSiblings:!0}),o=t.getParentConnectionPoint(),t=t.getChildConnectionPoint(e,r);this.updateParentPreview(n.position(),n.size(),n),this.updateChildPreview(e,r),this.updateConnectionPreview(o,t,i)},showPreview:function(){this.svgViewport.append(this.svgPreview)},hidePreview:function(){this.svgPreview.remove()},updateParentPreview:function(t,e){this.svgPreviewParent.attr({x:t.x,y:t.y,width:e.width,height:e.height})},updateChildPreview:function(t,e){this.svgPreviewChild.attr({cx:t.x,cy:t.y,r:e.width/2})},updateConnectionPreview:function(t,e,n){this.svgPreviewConnection.attr({d:f.connectors.rounded(t,e,n,{})})},findDirection:function(t,e){var n,r=t.root.get("layout")||t.getType();switch(r){case"BL-BR":case"TL-TR":case"L-R":return n=r.split("-"),e.x>t.rootCX?n[1]:n[0];case"BL-TL":case"BR-TR":case"B-T":return n=r.split("-"),e.y>t.rootCY?n[0]:n[1];case"L":case"R":case"T":case"B":case"TR":case"TL":case"BR":case"BL":return r;default:return t.direction}},isConnectionValid:function(t,e,n){var r=e.parentArea.root;if(t.id==r.id)return!1;if(this.model.graph.isSuccessor(t,e.parentArea.root))return!1;var i=this.model.getLayoutArea(t);if(i&&i.parentArea&&i.parentArea==e.parentArea&&i.direction==e.direction){i=i.siblingRank-n;if(0==i||1==i)return!1}i=this.options.validateConnection;return"function"!=typeof i||i.call(this,t,r,this,{siblingRank:n,direction:e.direction,level:e.parentArea.level+1,siblings:e.layoutAreas.map(function(t){return t.root})})},canInteract:function(e){return function(t){this.options.canInteract(t)&&e.apply(this,arguments)}.bind(this)},startDragging:function(t){t=Array.isArray(t)?t:[t];f.util.isEmpty(t)||this.delegateDocumentEvents(null,{moveCounter:0,draggedElements:t})},onPointerdown:function(t){this.startDragging(t.model)},onPointermove:function(t){var t=f.util.normalizeEvent(t),e=t.data,n=this.options.paper,t=n.clientToLocalPoint({x:t.clientX,y:t.clientY});e.moveCounter===n.options.clickThreshold?this.dragstart(e.draggedElements,t.x,t.y):e.moveCounter>n.options.clickThreshold&&this.drag(e.draggedElements,t.x,t.y),e.moveCounter++},onPointerup:function(t){var t=f.util.normalizeEvent(t),e=t.data,n=this.options.paper;e.moveCounter>=n.options.clickThreshold&&(n=n.clientToLocalPoint({x:t.clientX,y:t.clientY}),this.dragend(e.draggedElements,n.x,n.y)),this.undelegateDocumentEvents()}}));B.TreeLayoutView=Jn}(this.joint.ui=this.joint.ui||{},$,joint);