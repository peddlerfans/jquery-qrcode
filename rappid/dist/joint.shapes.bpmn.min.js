/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(t,h,l){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function P(t,e){return t(e={exports:{}},e.exports),e.exports}function R(t){return t&&t.Math==Math&&t}function c(t){try{return!!t()}catch(t){return!0}}function V(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function F(t){return nt?st(t):function(){return at.apply(t,arguments)}}function n(t){return lt(ct(t),8,-1)}function i(t){if("Function"===n(t))return F(t)}function U(t){if(dt(t))throw ht("Can't call method on "+t);return t}function B(t){return pt(U(t))}function r(t,e){return arguments.length<2?(n=b[t],f(n)?n:void 0):b[t]&&b[t][e];var n}function Z(t){return kt(U(t))}function H(t){return"Symbol("+(void 0===t?"":t)+")_"+Dt(++Nt+zt,36)}function o(t){var e;return w(Ot,t)&&(mt||"string"==typeof Ot[t])||(e="Symbol."+t,mt&&w(Pt,t)?Ot[t]=Pt[t]:Ot[t]=(vt&&Rt?Rt:Vt)(e)),Ot[t]}function G(t){return t=Bt(t,"string"),wt(t)?t:t+""}function Y(t){return ae[t]||(ae[t]=H(t))}function Q(t,e,n,r){var i=(r=r||{}).enumerable,o=void 0!==r.name?r.name:e;if(f(n)&&pe(n,o,r),r.global)i?t[e]=n:St(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:x.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t}function J(t,e){return(t=ge(t))<0?be(t+e,0):me(t,e)}function W(t){return Me(t.length)}function X(s){return function(t,e,n){var r,i=B(t),o=W(i),a=J(n,o);if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}}function K(t,e){var n,r=B(t),i=0,o=[];for(n in r)!w(se,n)&&w(r,n)&&Ae(o,n);for(;e.length>i;)!w(r,n=e[i++])||~we(o,n)||Ae(o,n);return o}function _(t,e){return(t=Ce[ke(t)])==ze||t!=Ne&&(f(e)?c(e):!!e)}function a(t,e){var n,r,i,o=t.target,a=t.global,s=t.stat,c=a?b:s?b[o]||St(o,{}):(b[o]||{}).prototype;if(c)for(n in e){if(r=e[n],i=t.dontCallGetSet?(i=Oe(c,n))&&i.value:c[n],!De(a?n:o+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;for(var l=r,u=i,f=g=y=h=d=p=void 0,p=Ee(u),d=x.f,h=Jt.f,y=0;y<p.length;y++){var g=p[y];w(l,g)||f&&w(f,g)||d(l,g,h(u,g))}}(t.sham||i&&i.sham)&&ne(r,"sham",!0),Q(c,n,r,t)}}function q(t,e){var n=[][t];return!!n&&c(function(){n.call(null,e||function(){return 1},1)})}var $,tt,s,et,b=R("object"==typeof globalThis&&globalThis)||R("object"==typeof window&&window)||R("object"==typeof self&&self)||R("object"==typeof e&&e)||function(){return this}()||Function("return this")(),u=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),nt=!c(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),rt=Function.prototype.call,m=nt?rt.bind(rt):function(){return rt.apply(rt,arguments)},e={}.propertyIsEnumerable,it=Object.getOwnPropertyDescriptor,ot={f:it&&!e.call({1:2},1)?function(t){t=it(this,t);return!!t&&t.enumerable}:e},e=Function.prototype,at=e.call,st=nt&&e.bind.bind(at,at),ct=F({}.toString),lt=F("".slice),ut=Object,ft=i("".split),pt=c(function(){return!ut("z").propertyIsEnumerable(0)})?function(t){return"String"==n(t)?ft(t,""):ut(t)}:ut,dt=function(t){return null==t},ht=TypeError,e="object"==typeof document&&document.all,e={all:e,IS_HTMLDDA:void 0===e&&void 0!==e},yt=e.all,f=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===yt}:function(t){return"function"==typeof t},gt=e.all,p=e.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:f(t)||t===gt}:function(t){return"object"==typeof t?null!==t:f(t)},bt=i({}.isPrototypeOf),e=r("navigator","userAgent")||"",d=b.process,y=b.Deno,d=d&&d.versions||y&&y.version,y=d&&d.v8,g=I=!(I=y?0<(A=y.split("."))[0]&&A[0]<4?1:+(A[0]+A[1]):I)&&e&&(!(A=e.match(/Edge\/(\d+)/))||74<=A[1])&&(A=e.match(/Chrome\/(\d+)/))?+A[1]:I,mt=!!Object.getOwnPropertySymbols&&!c(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&g&&g<41}),vt=mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Mt=Object,wt=vt?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return f(e)&&bt(e.prototype,Mt(t))},At=String,Tt=function(t){try{return At(t)}catch(t){return"Object"}},xt=TypeError,v=function(t){if(f(t))return t;throw xt(Tt(t)+" is not a function")},It=function(t,e){t=t[e];return dt(t)?void 0:v(t)},Lt=TypeError,jt=function(t,e){var n,r;if("string"===e&&f(n=t.toString)&&!p(r=m(n,t)))return r;if(f(n=t.valueOf)&&!p(r=m(n,t)))return r;if("string"!==e&&f(n=t.toString)&&!p(r=m(n,t)))return r;throw Lt("Can't convert object to primitive value")},Et=Object.defineProperty,St=function(e,n){try{Et(b,e,{value:n,configurable:!0,writable:!0})}catch(t){b[e]=n}return n},d="__core-js_shared__",M=b[d]||St(d,{}),y=P(function(t){(t.exports=function(t,e){return M[t]||(M[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),kt=Object,Ct=i({}.hasOwnProperty),w=Object.hasOwn||function(t,e){return Ct(Z(t),e)},Nt=0,zt=Math.random(),Dt=i(1..toString),Ot=y("wks"),Pt=b.Symbol,Rt=Pt&&Pt.for,Vt=vt?Pt:Pt&&Pt.withoutSetter||H,Ft=TypeError,Ut=o("toPrimitive"),Bt=function(t,e){if(!p(t)||wt(t))return t;var n=It(t,Ut);if(n){if(n=m(n,t,e=void 0===e?"default":e),!p(n)||wt(n))return n;throw Ft("Can't convert object to primitive value")}return jt(t,e=void 0===e?"number":e)},Zt=b.document,Ht=p(Zt)&&p(Zt.createElement),Gt=function(t){return Ht?Zt.createElement(t):{}},Yt=!u&&!c(function(){return 7!=Object.defineProperty(Gt("div"),"a",{get:function(){return 7}}).a}),Qt=Object.getOwnPropertyDescriptor,Jt={f:u?Qt:function(t,e){if(t=B(t),e=G(e),Yt)try{return Qt(t,e)}catch(t){}if(w(t,e))return V(!m(ot.f,t,e),t[e])}},A=u&&c(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Wt=String,Xt=TypeError,T=function(t){if(p(t))return t;throw Xt(Wt(t)+" is not an object")},Kt=TypeError,_t=Object.defineProperty,qt=Object.getOwnPropertyDescriptor,$t="enumerable",te="configurable",ee="writable",x={f:u?A?function(t,e,n){var r;return T(t),e=G(e),T(n),"function"==typeof t&&"prototype"===e&&"value"in n&&ee in n&&!n[ee]&&((r=qt(t,e))&&r[ee]&&(t[e]=n.value,n={configurable:(te in n?n:r)[te],enumerable:($t in n?n:r)[$t],writable:!1})),_t(t,e,n)}:_t:function(t,e,n){if(T(t),e=G(e),T(n),Yt)try{return _t(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Kt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ne=u?function(t,e,n){return x.f(t,e,V(1,n))}:function(t,e,n){return t[e]=n,t},I=Function.prototype,d=u&&Object.getOwnPropertyDescriptor,L=w(I,"name"),re={EXISTS:L,PROPER:L&&"something"===function(){}.name,CONFIGURABLE:L&&(!u||d(I,"name").configurable)},ie=i(Function.toString),oe=(f(M.inspectSource)||(M.inspectSource=function(t){return ie(t)}),M.inspectSource),L=b.WeakMap,d=f(L)&&/native code/.test(String(L)),ae=y("keys"),se={},ce="Object already initialized",le=b.TypeError,I=b.WeakMap,ue=d||M.state?((s=M.state||(M.state=new I)).get=s.get,s.has=s.has,s.set=s.set,$=function(t,e){if(s.has(t))throw le(ce);return e.facade=t,s.set(t,e),e},tt=function(t){return s.get(t)||{}},function(t){return s.has(t)}):(et=Y("state"),se[et]=!0,$=function(t,e){if(w(t,et))throw le(ce);return e.facade=t,ne(t,et,e),e},tt=function(t){return w(t,et)?t[et]:{}},function(t){return w(t,et)}),fe={set:$,get:tt,has:ue,enforce:function(t){return ue(t)?tt(t):$(t,{})},getterFor:function(e){return function(t){if(p(t)&&(t=tt(t)).type===e)return t;throw le("Incompatible receiver, "+e+" required")}}},pe=P(function(t){var r=re.CONFIGURABLE,i=fe.enforce,e=fe.get,o=Object.defineProperty,a=u&&!c(function(){return 8!==o(function(){},"length",{value:8}).length}),s=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!w(t,"name")||r&&t.name!==e)&&(u?o(t,"name",{value:e,configurable:!0}):t.name=e),a&&n&&w(n,"arity")&&t.length!==n.arity&&o(t,"length",{value:n.arity});try{n&&w(n,"constructor")&&n.constructor?u&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=i(t);return w(n,"source")||(n.source=s.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return f(this)&&e(this).source||oe(this)},"toString")}),de=Math.ceil,he=Math.floor,ye=Math.trunc||function(t){t=+t;return(0<t?he:de)(t)},ge=function(t){t=+t;return t!=t||0==t?0:ye(t)},be=Math.max,me=Math.min,ve=Math.min,Me=function(t){return 0<t?ve(ge(t),9007199254740991):0},L={includes:X(!0),indexOf:X(!1)},we=L.indexOf,Ae=i([].push),Te=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xe=Te.concat("length","prototype"),Ie={f:Object.getOwnPropertyNames||function(t){return K(t,xe)}},Le={f:Object.getOwnPropertySymbols},je=i([].concat),Ee=r("Reflect","ownKeys")||function(t){var e=Ie.f(T(t)),n=Le.f;return n?je(e,n(t)):e},Se=/#|\.prototype\./,ke=_.normalize=function(t){return String(t).replace(Se,".").toLowerCase()},Ce=_.data={},Ne=_.NATIVE="N",ze=_.POLYFILL="P",De=_,Oe=Jt.f,Pe=i([].join),d=pt!=Object,I=q("join",",");a({target:"Array",proto:!0,forced:d||!I},{join:function(t){return Pe(B(this),void 0===t?",":t)}});function Re(t){if("Symbol"===Qe(t))throw TypeError("Cannot convert a Symbol value to a string");return Je(t)}function Ve(){var t=T(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}function Fe(){}function Ue(t){t.write(en("")),t.close();var e=t.parentWindow.Object;return t=null,e}function Be(e){return function(t){t=Re(U(t));return 1&e&&(t=Tn(t,xn,"")),t=2&e?Tn(t,In,""):t}}var Ze,d={},I=(d[o("toStringTag")]="z","[object z]"===String(d)),He=o("toStringTag"),Ge=Object,Ye="Arguments"==n(function(){return arguments}()),Qe=I?n:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Ge(t),He))?e:Ye?n(t):"Object"==(e=n(t))&&f(t.callee)?"Arguments":e},Je=String,We=b.RegExp,d=c(function(){var t=We("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),j=d||c(function(){return!We("a","y").sticky}),j={BROKEN_CARET:d||c(function(){var t=We("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:j,UNSUPPORTED_Y:d},Xe=Object.keys||function(t){return K(t,Te)},Ke={f:u&&!A?Object.defineProperties:function(t,e){T(t);for(var n,r=B(e),i=Xe(e),o=i.length,a=0;a<o;)x.f(t,n=i[a++],r[n]);return t}},_e=r("document","documentElement"),qe="prototype",$e="script",tn=Y("IE_PROTO"),en=function(t){return"<"+$e+">"+t+"</"+$e+">"},nn=function(){try{Ze=new ActiveXObject("htmlfile")}catch(t){}nn="undefined"==typeof document||document.domain&&Ze?Ue(Ze):(t=Gt("iframe"),e="java"+$e+":",t.style.display="none",_e.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(en("document.F=Object")),e.close(),e.F);for(var t,e,n=Te.length;n--;)delete nn[qe][Te[n]];return nn()},rn=(se[tn]=!0,Object.create||function(t,e){var n;return null!==t?(Fe[qe]=T(t),n=new Fe,Fe[qe]=null,n[tn]=t):n=nn(),void 0===e?n:Ke.f(n,e)}),on=b.RegExp,d=c(function(){var t=on(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),an=b.RegExp,A=c(function(){var t=an("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),sn=fe.get,cn=y("native-string-replace",String.prototype.replace),ln=RegExp.prototype.exec,un=ln,fn=i("".charAt),pn=i("".indexOf),dn=i("".replace),hn=i("".slice),yn=(y=/b*/g,m(ln,E=/a/,"a"),m(ln,y,"a"),0!==E.lastIndex||0!==y.lastIndex),gn=j.BROKEN_CARET,bn=void 0!==/()??/.exec("")[1],E=un=yn||bn||gn||d||A?function(t){var e,n,r,i,o,a,s=this,c=sn(s),t=Re(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,f=m(un,l,t),s.lastIndex=l.lastIndex,f;var u=c.groups,l=gn&&s.sticky,f=m(Ve,s),c=s.source,p=0,d=t;if(l&&(f=dn(f,"y",""),-1===pn(f,"g")&&(f+="g"),d=hn(t,s.lastIndex),0<s.lastIndex&&(!s.multiline||s.multiline&&"\n"!==fn(t,s.lastIndex-1))&&(c="(?: "+c+")",d=" "+d,p++),e=new RegExp("^(?:"+c+")",f)),bn&&(e=new RegExp("^"+c+"$(?!\\s)",f)),yn&&(n=s.lastIndex),r=m(ln,l?e:s,d),l?r?(r.input=hn(r.input,p),r[0]=hn(r[0],p),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:yn&&r&&(s.lastIndex=s.global?r.index+r[0].length:n),bn&&r&&1<r.length&&m(cn,r[0],e,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r&&u)for(r.groups=o=rn(null),i=0;i<u.length;i++)o[(a=u[i])[0]]=r[a[1]];return r}:un,mn=(a({target:"RegExp",proto:!0,forced:/./.exec!==E},{exec:E}),b.isFinite),vn=(a({target:"Number",stat:!0},{isFinite:Number.isFinite||function(t){return"number"==typeof t&&mn(t)}}),String),Mn=TypeError,wn=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return T(t),function(t){if("object"==typeof t||f(t))return;throw Mn("Can't set "+vn(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),An=i(1..valueOf),Tn=i("".replace),y="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",xn=RegExp("^"+y+y+"*"),In=RegExp(y+y+"*$"),j={start:Be(1),end:Be(2),trim:Be(3)},d=Ie.f,Ln=Jt.f,jn=x.f,En=j.trim,A="Number",S=b[A],Sn=S.prototype,kn=b.TypeError,Cn=i("".slice),Nn=i("".charCodeAt),zn=function(t){var e,n,r,i,o,a,s,c=Bt(t,"number");if(wt(c))throw kn("Cannot convert a Symbol value to a number");if("string"==typeof c&&2<c.length)if(c=En(c),43===(t=Nn(c,0))||45===t){if(88===(e=Nn(c,2))||120===e)return NaN}else if(48===t){switch(Nn(c,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(o=(i=Cn(c,2)).length,a=0;a<o;a++)if((s=Nn(i,a))<48||r<s)return NaN;return parseInt(i,n)}return+c};if(De(A,!S(" 0o1")||!S("0b1")||S("+0x1"))){for(var Dn,On=function(t){var e,n,r,t=arguments.length<1?0:S(function(t){t=Bt(t,"number");return"bigint"==typeof t?t:zn(t)}(t)),i=this;return bt(Sn,i)&&c(function(){An(i)})?(e=Object(t),n=i,r=On,wn&&f(n=n.constructor)&&n!==r&&p(n=n.prototype)&&n!==r.prototype&&wn(e,n),e):t},Pn=u?d(S):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Rn=0;Pn.length>Rn;Rn++)w(S,Dn=Pn[Rn])&&!w(On,Dn)&&jn(On,Dn,Ln(S,Dn));(On.prototype=Sn).constructor=On,Q(b,A,On,{constructor:!0})}function Vn(l){return function(t,e,n,r){v(e);var i=Z(t),o=pt(i),a=W(i),s=l?a-1:0,c=l?-1:1;if(n<2)for(;;){if(s in o){r=o[s],s+=c;break}if(s+=c,l?s<0:a<=s)throw Fn("Reduce of empty array with no initial value")}for(;l?0<=s:s<a;s+=c)s in o&&(r=e(r,o[s],s,i));return r}}var Fn=TypeError,E={left:Vn(!1),right:Vn(!0)},k="process"==n(b.process),Un=E.left;a({target:"Array",proto:!0,forced:!q("reduce")||!k&&79<g&&g<83},{reduce:function(t){var e=arguments.length;return Un(this,t,e,1<e?arguments[1]:void 0)}});function Bn(){}function Zn(t){if(!f(t))return!1;try{return Kn(Bn,Xn,t),!0}catch(t){return!1}}function Hn(t){if(!f(t))return!1;switch(Qe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return $n||!!qn(_n,oe(t))}catch(t){return!0}}function Gn(t,e){var n,t=T(t).constructor;if(void 0===t||dt(n=T(t)[nr]))return e;if(tr(t=n))return t;throw er(Tt(t)+" is not a constructor")}function Yn(t,e){return v(t),void 0===e?t:nt?ar(t,e):function(){return t.apply(e,arguments)}}I||Q(Object.prototype,"toString",I?{}.toString:function(){return"[object "+Qe(this)+"]"},{unsafe:!0});var Qn,Jn,y=x.f,j=o("toStringTag"),d=o("species"),Wn=TypeError,Xn=[],Kn=r("Reflect","construct"),_n=/^\s*(?:class|function)\b/,qn=i(_n.exec),$n=!_n.exec(Bn),tr=(Hn.sham=!0,!Kn||c(function(){var t;return Zn(Zn.call)||!Zn(Object)||!Zn(function(){t=!0})||t})?Hn:Zn),er=TypeError,nr=o("species"),A=Function.prototype,rr=A.apply,ir=A.call,or="object"==typeof Reflect&&Reflect.apply||(nt?ir.bind(rr):function(){return ir.apply(rr,arguments)}),ar=i(i.bind),sr=i([].slice),cr=TypeError,E=/(?:ipad|iphone|ipod).*applewebkit/i.test(e),I=b.setImmediate,A=b.clearImmediate,lr=b.process,ur=b.Dispatch,fr=b.Function,C=b.MessageChannel,pr=b.String,dr=0,hr={},yr="onreadystatechange";try{Qn=b.location}catch(t){}function gr(t){return function(){Nr(t)}}function br(t){Nr(t.data)}function mr(t){b.postMessage(pr(t),Qn.protocol+"//"+Qn.host)}function vr(){this.head=null,this.tail=null}function Mr(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw Hr("Bad Promise constructor");n=t,r=e}),this.resolve=v(n),this.reject=v(r)}function wr(t,e){var n,r,i,o,a=e.value,s=e.state==ai,c=s?t.ok:t.fail,l=t.resolve,u=t.reject,f=t.domain;try{c?(s||(e.rejection===li&&(o=e,m(Yr,b,function(){var t=o.facade;k?ti.emit("rejectionHandled",t):pi(oi,t,o.value)})),e.rejection=ci),!0===c?n=a:(f&&f.enter(),n=c(a),f&&(f.exit(),i=!0)),n===t.promise?u(qr("Promise-chain cycle")):(r=ui(n))?m(r,n,l,u):l(n)):u(a)}catch(t){f&&!i&&f.exit(),u(t)}}var Ar,Tr,xr,Ir,Lr,jr,Er,Sr,kr,Cr,Nr=function(t){var e;w(hr,t)&&(e=hr[t],delete hr[t],e())},C=(I&&A||(I=function(t){var e=arguments.length,n=1;if(e<n)throw cr("Not enough arguments");var r=f(t)?t:fr(t),i=sr(arguments,1);return hr[++dr]=function(){or(r,void 0,i)},Jn(dr),dr},A=function(t){delete hr[t]},k?Jn=function(t){lr.nextTick(gr(t))}:ur&&ur.now?Jn=function(t){ur.now(gr(t))}:C&&!E?(N=(C=new C).port2,C.port1.onmessage=br,Jn=Yn(N.postMessage,N)):b.addEventListener&&f(b.postMessage)&&!b.importScripts&&Qn&&"file:"!==Qn.protocol&&!c(mr)?(Jn=mr,b.addEventListener("message",br,!1)):Jn=yr in Gt("script")?function(t){_e.appendChild(Gt("script"))[yr]=function(){_e.removeChild(this),Nr(t)}}:function(t){setTimeout(gr(t),0)}),{set:I,clear:A}),N=/ipad|iphone|ipod/i.test(e)&&void 0!==b.Pebble,I=/web0s(?!.*chrome)/i.test(e),A=Jt.f,zr=C.set,e=b.MutationObserver||b.WebKitMutationObserver,z=b.document,Dr=b.process,D=b.Promise,A=A(b,"queueMicrotask"),A=A&&A.value,Or=(A||(Ar=function(){var t,e;for(k&&(t=Dr.domain)&&t.exit();Tr;){e=Tr.fn,Tr=Tr.next;try{e()}catch(t){throw Tr?Ir():xr=void 0,t}}xr=void 0,t&&t.enter()},Ir=E||k||I||!e||!z?!N&&D&&D.resolve?((E=D.resolve(void 0)).constructor=D,Er=Yn(E.then,E),function(){Er(Ar)}):k?function(){Dr.nextTick(Ar)}:(zr=Yn(zr,b),function(){zr(Ar)}):(Lr=!0,jr=z.createTextNode(""),new e(Ar).observe(jr,{characterData:!0}),function(){jr.data=Lr=!Lr})),A||function(t){t={fn:t,next:void 0};xr&&(xr.next=t),Tr||(Tr=t,Ir()),xr=t}),Pr=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Rr=(vr.prototype={add:function(t){t={item:t,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},vr),O=b.Promise,Vr="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Fr=!Vr&&!k&&"object"==typeof window&&"object"==typeof document,Ur=(O&&O.prototype,o("species")),Br=!1,Zr=f(b.PromiseRejectionEvent),I={CONSTRUCTOR:De("Promise",function(){var t=oe(O),e=t!==String(O);if(!e&&66===g)return!0;if(!g||g<51||!/native code/.test(t)){var t=new O(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((t.constructor={})[Ur]=n,!(Br=t.then(function(){})instanceof n))return!0}return!e&&(Fr||Vr)&&!Zr}),REJECTION_EVENT:Zr,SUBCLASSING:Br},Hr=TypeError,Gr={f:function(t){return new Mr(t)}},Yr=C.set,Qr="Promise",N=I.CONSTRUCTOR,Jr=I.REJECTION_EVENT,D=I.SUBCLASSING,Wr=fe.getterFor(Qr),Xr=fe.set,E=O&&O.prototype,Kr=O,_r=E,qr=b.TypeError,$r=b.document,ti=b.process,ei=Gr.f,ni=ei,ri=!!($r&&$r.createEvent&&b.dispatchEvent),ii="unhandledrejection",oi="rejectionhandled",ai=1,si=2,ci=1,li=2,ui=function(t){var e;return!(!p(t)||!f(e=t.then))&&e},fi=function(n,i){n.notified||(n.notified=!0,Or(function(){for(var t,r,e=n.reactions;t=e.get();)wr(t,n);n.notified=!1,i&&!n.rejection&&(r=n,m(Yr,b,function(){var t=r.facade,e=r.value,n=di(r);if(n&&(n=Pr(function(){k?ti.emit("unhandledRejection",e,t):pi(ii,t,e)}),r.rejection=k||di(r)?li:ci,n.error))throw n.value}))}))},pi=function(t,e,n){var r;ri?((r=$r.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),b.dispatchEvent(r)):r={promise:e,reason:n},!Jr&&(e=b["on"+t])?e(r):t===ii&&function(t,e){var n=b.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},di=function(t){return t.rejection!==ci&&!t.parent},hi=function(e,n,r){return function(t){e(n,t,r)}},yi=function(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=si,fi(t,!0))},gi=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw qr("Promise can't be resolved itself");var r=ui(t);r?Or(function(){var e={done:!1};try{m(r,t,hi(gi,e,n),hi(yi,e,n))}catch(t){yi(e,t,n)}}):(n.value=t,n.state=ai,fi(n,!1))}catch(t){yi({done:!1},t,n)}}};if(N&&(_r=(Kr=function(t){!function(t,e){if(bt(e,t))return;throw Wn("Incorrect invocation")}(this,_r),v(t),m(Sr,this);var e=Wr(this);try{t(hi(gi,e),hi(yi,e))}catch(t){yi(e,t)}}).prototype,(Sr=function(t){Xr(this,{type:Qr,done:!1,notified:!1,parent:!1,reactions:new Rr,rejection:!1,state:0,value:void 0})}).prototype=Q(_r,"then",function(t,e){var n=Wr(this),r=ei(Gn(this,Kr));return n.parent=!0,r.ok=!f(t)||t,r.fail=f(e)&&e,r.domain=k?ti.domain:void 0,0==n.state?n.reactions.add(r):Or(function(){wr(r,n)}),r.promise}),kr=function(){var t=new Sr,e=Wr(t);this.promise=t,this.resolve=hi(gi,e),this.reject=hi(yi,e)},Gr.f=ei=function(t){return t===Kr||void 0===t?new kr:ni(t)},f(O)&&E!==Object.prototype)){Cr=E.then,D||Q(E,"then",function(t,e){var n=this;return new Kr(function(t,e){m(Cr,n,t,e)}).then(t,e)},{unsafe:!0});try{delete E.constructor}catch(t){}wn&&wn(E,_r)}a({global:!0,constructor:!0,wrap:!0,forced:N},{Promise:Kr}),e=!(z=Qr),(A=(A=Kr)&&!e?A.prototype:A)&&!w(A,j)&&y(A,j,{configurable:!0,value:z}),C=r(C=Qr),D=x.f,u&&C&&!C[d]&&D(C,d,{configurable:!0,get:function(){return this}});function bi(t,e,n){var r,i;T(t);try{if(!(r=It(t,"return"))){if("throw"===e)throw n;return}r=m(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;T(r)}function mi(t,e){this.stopped=t,this.result=e}function vi(t,e,n){function r(t){return o&&bi(o,"normal",t),new mi(!0,t)}function i(t){return p?(T(t),y?g(t[0],t[1],r):g(t[0],t[1])):y?g(t,r):g(t)}var o,a,s,c,l,u,f=n&&n.that,p=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_RECORD),h=!(!n||!n.IS_ITERATOR),y=!(!n||!n.INTERRUPTED),g=Yn(e,f);if(d)o=t.iterator;else if(h)o=t;else{if(!(n=xi(t)))throw Li(Tt(t)+" is not iterable");if(void 0!==(e=n)&&(Mi.Array===e||Ai[wi]===e)){for(a=0,s=W(t);a<s;a++)if((c=i(t[a]))&&bt(ji,c))return;return}o=function(t,e){e=arguments.length<2?xi(t):e;if(v(e))return T(m(e,t));throw Ii(Tt(t)+" is not iterable")}(t,n)}for(l=(d?t:o).next;!(u=m(l,o)).done;){try{c=i(u.value)}catch(t){bi(o,"throw",t)}if("object"==typeof c&&c&&bt(ji,c))return}}var Mi={},wi=o("iterator"),Ai=Array.prototype,Ti=o("iterator"),xi=function(t){if(!dt(t))return It(t,Ti)||It(t,"@@iterator")||Mi[Qe(t)]},Ii=TypeError,Li=TypeError,ji=mi.prototype,Ei=o("iterator"),Si=!1;try{var ki=0,Ci={next:function(){return{done:!!ki++}},return:function(){Si=!0}};Ci[Ei]=function(){return this},Array.from(Ci,function(){throw 2})}catch(t){}E=I.CONSTRUCTOR||!function(t,e){if(!e&&!Si)return!1;var n=!1;try{var r={};r[Ei]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){O.all(t).then(void 0,function(){})}),a({target:"Promise",stat:!0,forced:E},{all:function(t){var s=this,e=Gr.f(s),c=e.resolve,l=e.reject,n=Pr(function(){var r=v(s.resolve),i=[],o=0,a=1;vi(t,function(t){var e=o++,n=!1;a++,m(r,s,t).then(function(t){n||(n=!0,i[e]=t,--a||c(i))},l)}),--a||c(i)});return n.error&&l(n.value),e.promise}}),N=I.CONSTRUCTOR,e=O&&O.prototype;a({target:"Promise",proto:!0,forced:N,real:!0},{catch:function(t){return this.then(void 0,t)}}),f(O)&&(y=r("Promise").prototype.catch,e.catch!==y&&Q(e,"catch",y,{unsafe:!0})),a({target:"Promise",stat:!0,forced:E},{race:function(t){var n=this,r=Gr.f(n),i=r.reject,e=Pr(function(){var e=v(n.resolve);vi(t,function(t){m(e,n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}});a({target:"Promise",stat:!0,forced:I.CONSTRUCTOR},{reject:function(t){var e=Gr.f(this);return m(e.reject,void 0,t),e.promise}});function Ni(t){if(9007199254740991<t)throw Ji("Maximum allowed index exceeded")}function zi(t,e,n){(e=G(e))in t?x.f(t,e,V(0,n)):t[e]=n}function Di(t,e){return Qi(t=t)&&(n=t.constructor,(tr(n)&&(n===Xi||Qi(n.prototype))||p(n)&&null===(n=n[Wi]))&&(n=void 0)),new(void 0===n?Xi:n)(0===e?0:e);var n}function Oi(p){var d=1==p,h=2==p,y=3==p,g=4==p,b=6==p,m=7==p,v=5==p||b;return function(t,e,n,r){for(var i,o,a=Z(t),s=pt(a),c=Yn(e,n),l=W(s),u=0,e=r||Di,f=d?e(t,l):h||m?e(t,0):void 0;u<l;u++)if((v||u in s)&&(o=c(i=s[u],u,a),p))if(d)f[u]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return u;case 2:qi(f,i)}else switch(p){case 4:return!1;case 7:qi(f,i)}return b?-1:y||g?g:f}}function Pi(e){if(e&&e.forEach!==to)try{ne(e,"forEach",to)}catch(t){e.forEach=to}}var Ri,Vi,j=I.CONSTRUCTOR,Fi=(r("Promise"),a({target:"Promise",stat:!0,forced:j},{resolve:function(t){return t=t,T(e=this),p(t)&&t.constructor===e?t:((0,(e=Gr.f(e)).resolve)(t),e.promise);var e}}),Function),Ui=i([].concat),Bi=i([].join),Zi={},z=nt?Fi.bind:function(a){var s=v(this),t=s.prototype,c=sr(arguments,1),l=function(){var t=Ui(c,sr(arguments));if(this instanceof l){var e=s,n=t.length,r=t;if(!w(Zi,n)){for(var i=[],o=0;o<n;o++)i[o]="a["+o+"]";Zi[n]=Fi("C,a","return new C("+Bi(i,",")+")")}return Zi[n](e,r)}return s.apply(a,t)};return p(t)&&(l.prototype=t),l},D=(a({target:"Function",proto:!0,forced:Function.bind!==z},{bind:z}),re.EXISTS),C=x.f,d=Function.prototype,Hi=i(d.toString),Gi=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Yi=i(Gi.exec),Qi=(u&&!D&&C(d,"name",{configurable:!0,get:function(){try{return Yi(Gi,Hi(this))[1]}catch(t){return""}}}),Array.isArray||function(t){return"Array"==n(t)}),Ji=TypeError,Wi=o("species"),Xi=Array,Ki=o("species"),_i=o("isConcatSpreadable"),Ci=51<=g||!c(function(){var t=[];return t[_i]=!1,t.concat()[0]!==t}),N=(Ri="concat",51<=g||!c(function(){var t=[];return(t.constructor={})[Ki]=function(){return{foo:1}},1!==t[Ri](Boolean).foo})),qi=(a({target:"Array",proto:!0,arity:1,forced:!Ci||!N},{concat:function(t){for(var e,n,r,i,o,a=Z(this),s=Di(a,0),c=0,l=-1,u=arguments.length;l<u;l++)if(o=void 0,!p(i=r=-1===l?a:arguments[l])||(void 0!==(o=i[_i])?!o:!Qi(i)))Ni(c+1),zi(s,c++,r);else for(n=W(r),Ni(c+n),e=0;e<n;e++,c++)e in r&&zi(s,c,r[e]);return s.length=c,s}}),i([].push)),$i={forEach:Oi(0),map:Oi(1),filter:Oi(2),some:Oi(3),every:Oi(4),find:Oi(5),findIndex:Oi(6),filterReject:Oi(7)}.forEach,to=q("forEach")?[].forEach:function(t){return $i(this,t,1<arguments.length?arguments[1]:void 0)},eo=(a({target:"Array",proto:!0,forced:[].forEach!=to},{forEach:to}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),e=Gt("span").classList,y=e&&e.constructor&&e.constructor.prototype,E=y===Object.prototype?void 0:y;for(Vi in eo)eo[Vi]&&Pi(b[Vi]&&b[Vi].prototype);Pi(E);var no=L.indexOf,ro=i([].indexOf),io=!!ro&&1/ro([1],1,-0)<0,I=q("indexOf"),j=(a({target:"Array",proto:!0,forced:io||!I},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return io?ro(this,t,e)||0:no(this,t,e)}}),x.f),z=o("unscopables"),D=Array.prototype,oo=(null==D[z]&&j(D,z,{configurable:!0,value:rn(null)}),a({target:"Array",proto:!0},{fill:function(t){for(var e=Z(this),n=W(e),r=arguments.length,i=J(1<r?arguments[1]:void 0,n),r=2<r?arguments[2]:void 0,o=void 0===r?n:J(r,n);i<o;)e[i++]=t;return e}}),D[z].fill=!0,{none:"",message:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUxMiA1MTIiIGhlaWdodD0iNTEycHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB3aWR0aD0iNTEycHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik00NzkuOTk4LDY0SDMyQzE0LjMyOSw2NCwwLDc4LjMxMiwwLDk2djMyMGMwLDE3LjY4OCwxNC4zMjksMzIsMzIsMzJoNDQ3Ljk5OEM0OTcuNjcxLDQ0OCw1MTIsNDMzLjY4OCw1MTIsNDE2Vjk2ICBDNTEyLDc4LjMxMiw0OTcuNjcxLDY0LDQ3OS45OTgsNjR6IE00MTYsMTI4TDI1NiwyNTZMOTYsMTI4SDQxNnogTTQ0OCwzODRINjRWMTYwbDE5MiwxNjBsMTkyLTE2MFYzODR6Ii8+PC9zdmc+",plus:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjUsMTRIMTR2OC41YzAsMC4yNzYtMC4yMjQsMC41LTAuNSwwLjVoLTRDOS4yMjQsMjMsOSwyMi43NzYsOSwyMi41VjE0SDAuNSAgQzAuMjI0LDE0LDAsMTMuNzc2LDAsMTMuNXYtNEMwLDkuMjI0LDAuMjI0LDksMC41LDlIOVYwLjVDOSwwLjIyNCw5LjIyNCwwLDkuNSwwaDRDMTMuNzc2LDAsMTQsMC4yMjQsMTQsMC41VjloOC41ICBDMjIuNzc2LDksMjMsOS4yMjQsMjMsOS41djRDMjMsMTMuNzc2LDIyLjc3NiwxNCwyMi41LDE0eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",cross:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik0yMi4yNDUsNC4wMTVjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjEzOWwtNi4yNzYsNi4yN2MtMC4zMTMsMC4zMTItMC4zMTMsMC44MjYsMCwxLjE0bDYuMjczLDYuMjcyICBjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjE0bC0yLjI4NSwyLjI3N2MtMC4zMTQsMC4zMTItMC44MjgsMC4zMTItMS4xNDIsMGwtNi4yNzEtNi4yNzFjLTAuMzEzLTAuMzEzLTAuODI4LTAuMzEzLTEuMTQxLDAgIGwtNi4yNzYsNi4yNjdjLTAuMzEzLDAuMzEzLTAuODI4LDAuMzEzLTEuMTQxLDBsLTIuMjgyLTIuMjhjLTAuMzEzLTAuMzEzLTAuMzEzLTAuODI2LDAtMS4xNGw2LjI3OC02LjI2OSAgYzAuMzEzLTAuMzEyLDAuMzEzLTAuODI2LDAtMS4xNEwxLjcwOSw1LjE0N2MtMC4zMTQtMC4zMTMtMC4zMTQtMC44MjcsMC0xLjE0bDIuMjg0LTIuMjc4QzQuMzA4LDEuNDE3LDQuODIxLDEuNDE3LDUuMTM1LDEuNzMgIEwxMS40MDUsOGMwLjMxNCwwLjMxNCwwLjgyOCwwLjMxNCwxLjE0MSwwLjAwMWw2LjI3Ni02LjI2N2MwLjMxMi0wLjMxMiwwLjgyNi0wLjMxMiwxLjE0MSwwTDIyLjI0NSw0LjAxNXoiLz48L3N2Zz4=",user:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLDIwLjk5OGgtMWMwLDAtMSwwLTEtMVYxNy41YzAtMC4yNzctMC4yMjQtMC41LTAuNS0wLjVTMTksMTcuMjIzLDE5LDE3LjUgIGwtMC4wMDgsNC4yOTVjMCwwLjYwOS0yLjAxLDIuMjA1LTYuNDkyLDIuMjA1cy02LjQ5Mi0xLjU5Ni02LjQ5Mi0yLjIwNUw2LDE3LjVDNiwxNy4yMjMsNS43NzYsMTcsNS41LDE3UzUsMTcuMjIzLDUsMTcuNXYyLjQ5OCAgYzAsMS0xLDEtMSwxSDNjMCwwLTEsMC0xLTFWMTUuNzVjMC0yLjkyMiwyLjg5Mi01LjQwMSw2LjkzLTYuMzQxYzAsMCwxLjIzNCwxLjEwNywzLjU3LDEuMTA3czMuNTctMS4xMDcsMy41Ny0xLjEwNyAgYzQuMDM4LDAuOTQsNi45MywzLjQxOSw2LjkzLDYuMzQxdjQuMjQ4QzIzLDIwLjk5OCwyMiwyMC45OTgsMjIsMjAuOTk4eiBNMTIuNDc3LDljLTIuNDg1LDAtNC41LTIuMDE1LTQuNS00LjVTOS45OTEsMCwxMi40NzcsMCAgczQuNSwyLjAxNSw0LjUsNC41UzE0Ljk2Miw5LDEyLjQ3Nyw5eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",circle:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gULEBE3DEP64QAAAwlJREFUaN7dmktrU0EUx38ZmmBbfEIL2hSjkYKC1EW6EDFudC+404/gE6WKSvGxERQfIH4AX1T9EOKrCrYurVrbgsZWoaBVixDbpC6ci+Fyz9ybZG478cBs7syc+Z+5c86c+c8ksCPrgW1ADtgEbARafG1+AW+AYWAIGADGWUTZAJwHxoD5GssocA7ILiTwLcADoFQHcH8pAfeB7jiBtwO3gLJF4P5S1mO02wa/C5iMEbi/TAI7bYE/Y3m5VLOs+sLAJULqrgKHIxhZBp4DT4FX2jkLGoinq1M7fg7YDmwFVATd14CjFboiy5UIs/QBOAmka/izaeCU1hE2zuVqlZ8IUfgVOAA0WViiTcBBrdM0Zm9UhTuAOYOiRzXOeJh0Ak8M484B+TAlK4BPBiU3gWSMoTqpw6g0fgFYblJww9D5dojT25IEcMeA47rUsdsQLp9FmPmURSNSOqpJS2lzUKd+ocN3IBNx5mz+oXXADwHTXX/jjMFxjy1iwtgrYJoF1lY27BMafozZaaMspYKA7XRlw7f1xt4Y5biA7bXXIGv4TW0OGNCmsQRhzCidlwTJADDlgAFTwAuhLq+AHqHyMe6IhKVHAV1C5ZBDBkhYupThPPreIQNGJTJBGXKLLw4Z8NmQu/Fb8PCkQwakBIxFRWPLvAJmhMpWh4AuFb7PKGBaqFzjkAGrhe/TSjNrQZJ1yAAJy5gCRoTKnEMGSFhGFDBoOBu7IhKWQe8wLRFLHQ6A7zCcFNNK59vvAjoqYK8DBuwTCLBhTUD8Hweahj9S2jjU297VqzrU26BVmi2yEjXRKg1PbHnpqYla7AeWxAi+GbhHHdSit2mYyN2XQQ5kQTJ6Y6qL3PUkCr2+H7v0+jcs0eueRLngGNeKa9mxY73g8JzpEtHusorAQ/7e+e7WUWIl//jSVTrK7QEu6KgW9d7tYr3B44iBWPJfkZZ8pZ4r2VngkC0HywMTLNwN5YSBcKtZWoGzernEBbyox2iJc6Np2KcGfnHisYet1CDouc2yCjbhp07MrD+3+QNxi4JkAscRswAAAABJRU5ErkJggg==",service:"data:image/png;base64,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"}),C={initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:icon",this._onIconChange),this._onIconChange(this,this.get("icon")||"none")},_onIconChange:function(t,e){if(!h.util.has(oo,e))throw"BPMN: Unknown icon: "+e;t.attr({image:{"xlink:href":oo[e],dataIconType:e}})}},d={initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:subProcess",this._onSubProcessChange),this._onSubProcessChange(this,this.get("subProcess")||null)},_onSubProcessChange:function(t,e){t.attr({".sub-process":{visibility:e?"visible":"hidden","data-sub-process":e||""}})}},Ci=l.TextBlockView,N=l.TextBlock.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body outer"/><rect class="body inner"/></g>',h.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>','<path class="sub-process"/><image class="icon"/></g>'].join(""),defaults:h.util.deepSupplement({size:{width:100,height:100},type:"bpmn.Activity",attrs:{rect:{rx:8,ry:8,width:100,height:100},".body":{fill:"#ffffff",stroke:"#000000"},".inner":{transform:"scale(0.9,0.9) translate(5,5)"},path:{d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",ref:".inner","ref-x":.5,"ref-dy":-30,"x-alignment":"middle",stroke:"#000000",fill:"transparent"},image:{ref:".inner","ref-x":5,width:20,height:20}},activityType:"task",subProcess:null},l.TextBlock.prototype.defaults),initialize:function(){l.TextBlock.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:activityType",this.onActivityTypeChange),this.listenTo(this,"change:subProcess",this.onSubProcessChange),this.onSubProcessChange(this,this.get("subProcess")),this.onActivityTypeChange(this,this.get("activityType"))},onActivityTypeChange:function(t,e){switch(e){case"task":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":1,"stroke-dasharray":"none"},path:{ref:".outer"},image:{ref:".outer"}});break;case"transaction":t.attr({".inner":{visibility:"visible"},".outer":{"stroke-width":1,"stroke-dasharray":"none"},path:{ref:".inner"},image:{ref:".inner"}});break;case"event-sub-process":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":1,"stroke-dasharray":"1,2"},path:{ref:".outer"},image:{ref:".outer"}});break;case"call-activity":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":5,"stroke-dasharray":"none"},path:{ref:".outer"},image:{ref:".outer"}});break;default:throw"BPMN: Unknown Activity Type: "+e}},onSubProcessChange:function(t,e){e?t.attr({".fobj div":{style:{verticalAlign:"baseline",paddingTop:10}},image:{"ref-dy":-25,"ref-y":""},".content":{"ref-y":10,"y-alignment":null}}):t.attr({".fobj div":{style:{verticalAlign:"middle",paddingTop:0}},image:{"ref-dy":"","ref-y":5},".content":{"ref-y":.5,"y-alignment":"middle"}})}}).extend(C).extend(d),e=l.TextBlockView,y=l.TextBlock.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body"/></g>',h.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>','<path class="stroke"/></g>'].join(""),defaults:h.util.deepSupplement({size:{width:100,height:100},type:"bpmn.Annotation",attrs:{rect:{width:100,height:100},".body":{"fill-opacity":.1,fill:"#ffffff",stroke:"none"},".fobj div":{style:{textAlign:"left",paddingLeft:10}},".stroke":{stroke:"#000000",fill:"none","stroke-width":3}},wingLength:20},l.TextBlock.prototype.defaults),initialize:function(){l.TextBlock.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:size",this.onSizeChange),this.onSizeChange(this,this.get("size"))},onSizeChange:function(t,e){t.attr(".stroke",{d:t.getStrokePathData(e.width,e.height,t.get("wingLength"))})},getStrokePathData:function(t,e,n){return["M",n=Math.min(n,t),"0 L 0 0 0",e,n,e].join(" ")}}),E=h.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/><image/></g></g><text class="label"/>',defaults:h.util.deepSupplement({type:"bpmn.Gateway",size:{width:80,height:80},attrs:{".body":{points:"40,0 80,40 40,80 0,40",fill:"#ffffff",stroke:"#000000"},".label":{text:"",ref:".body","ref-x":.5,"ref-dy":20,"y-alignment":"middle","x-alignment":"middle","font-size":14,"font-family":"Arial, helvetica, sans-serif",fill:"#000000"},image:{width:40,height:40,"xlink:href":"",transform:"translate(20,20)"}}},h.dia.Element.prototype.defaults)}).extend(C),L=h.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="body outer"/><circle class="body inner"/><image/></g><text class="label"/></g>',defaults:h.util.deepSupplement({type:"bpmn.Event",size:{width:60,height:60},attrs:{".body":{fill:"#ffffff",stroke:"#000000"},".outer":{"stroke-width":1,r:30,transform:"translate(30,30)"},".inner":{"stroke-width":1,r:26,transform:"translate(30,30)"},image:{width:40,height:40,"xlink:href":"",transform:"translate(10,10)"},".label":{text:"",fill:"#000000","font-family":"Arial","font-size":14,ref:".outer","ref-x":.5,"ref-dy":20,"x-alignment":"middle","y-alignment":"middle"}},eventType:"start"},h.dia.Element.prototype.defaults),initialize:function(){h.dia.Element.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:eventType",this.onEventTypeChange),this.onEventTypeChange(this,this.get("eventType"))},onEventTypeChange:function(t,e){switch(e){case"start":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":1}});break;case"end":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":5}});break;case"intermediate":t.attr({".inner":{visibility:"visible"},".outer":{"stroke-width":1}});break;default:throw"BPMN: Unknown Event Type: "+e}}}).extend(C),I=h.dia.Element.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body"/></g>','<svg overflow="hidden" class="blackbox-wrap"><text class="blackbox-label"/></svg>','<rect class="header"/><text class="label"/>','<g class="lanes"/>',"</g>"].join(""),laneMarkup:'<g class="lane"><rect class="lane-body"/><rect class="lane-header"/><text class="lane-label"/></g>',defaults:h.util.deepSupplement({type:"bpmn.Pool",size:{width:600,height:300},attrs:{".body":{fill:"#ffffff",stroke:"#000000",width:500,height:200,"pointer-events":"stroke"},".header":{fill:"#ffffff",stroke:"#000000",width:20,ref:".body","ref-height":1,"pointer-events":"visiblePainted"},".label":{fill:"#000000",transform:"rotate(-90)",ref:".header","ref-x":10,"ref-y":.5,"font-family":"Arial","font-size":14,"x-alignment":"middle","text-anchor":"middle"},".lane-body":{fill:"#ffffff",stroke:"#000000","pointer-events":"stroke"},".lane-header":{fill:"#ffffff",stroke:"#000000","pointer-events":"visiblePainted"},".lane-label":{fill:"#000000",transform:"rotate(-90)","text-anchor":"middle","font-family":"Arial","font-size":13},".blackbox-wrap":{ref:".body","ref-width":1,"ref-height":1},".blackbox-label":{text:"Black Box","text-anchor":"middle",transform:"translate(0,-7)"},".blackbox-label > tspan":{dx:"50%",dy:"50%"}}},h.dia.Element.prototype.defaults)}),j=h.dia.ElementView.extend({options:{headerWidth:20},presentationAttributes:h.dia.ElementView.addPresentationAttributes({lanes:["LANES"]}),confirmUpdate:function(){var t=h.dia.ElementView.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"LANES")&&(this.renderLanes(this.model.get("lanes")),t=this.removeFlag(t,["LANES"])),t},update:function(){return void 0===this.lanesAttrs?this.renderLanes(this.model.get("lanes")):h.dia.ElementView.prototype.update.call(this,this.model,h.util.merge({},this.model.get("attrs"),this.lanesAttrs||{}))},renderMarkup:function(){h.dia.ElementView.prototype.renderMarkup.apply(this,arguments),this.$lanes=this.$(".lanes"),this.laneMarkup=h.V(this.model.laneMarkup)},renderLanes:function(t){t=t||{};var e=(void(this.index=0)===t.headerWidth?this.options:t).headerWidth;this.lanesAttrs={".header":{width:e},".label":{text:t.label||""}},this.$lanes.empty(),t.sublanes&&this.renderSublanes(t.sublanes,e,0,1,"lanes"),this.update(this.model,h.util.merge({},this.model.get("attrs"),this.lanesAttrs))},calculateRatios:function(t,e){for(var n=0,r=[],i=[],o=0,a=t.length;o<a;o++){var s=t[o].ratio;Number.isFinite(s)?(n+=s/10,i[o]=s/10/e):r.push(o)}for(var c=Math.max(1-n,0)*e/r.length,l=0,u=r.length;l<u;l++)i[r[l]]=c;return i},renderSublanes:function(t,l,u,e,n){var f=this.options.headerWidth,p=n+"/sublanes/",d=this.calculateRatios(t,e);h.util.toArray(t).reduce(function(t,e,n){var r="lane"+this.index,i="."+r+" .lane-body",o="."+r+" .lane-header",a="."+r+" .lane-label",s=(e.name&&(r+=" "+e.name),p+n),r=this.laneMarkup.clone().addClass(r).attr({"data-lane-path":s,"data-lane-index":this.index}),r=(this.$lanes.append(r.node),d[n]),n=void 0===e.headerWidth?f:e.headerWidth,c=u+t;return this.lanesAttrs[i]={ref:".body","ref-height":r,"ref-width":-l,"ref-x":l,"ref-y":c},this.lanesAttrs[o]={width:n,ref:".body","ref-height":r,"ref-x":l,"ref-y":c},this.lanesAttrs[a]={text:e.label,ref:o,"ref-x":10,"ref-y":.5,"x-alignment":"middle"},this.index++,e.sublanes&&this.renderSublanes(e.sublanes,l+n,c,r,s),t+r}.bind(this),0)}}),D=h.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><rect class="label-rect"/><g class="label-group"><svg overflow="hidden" class="label-wrap"><text class="label"/></svg></g></g>',defaults:h.util.deepSupplement({type:"bpmn.Group",size:{width:200,height:200},attrs:{".body":{width:200,height:200,stroke:"#000000","stroke-dasharray":"6,6","stroke-width":2,fill:"transparent",rx:15,ry:15,"pointer-events":"stroke"},".label-rect":{ref:".body","ref-width":.6,"ref-x":.4,"ref-y":-30,height:25,fill:"#ffffff",stroke:"#000000"},".label-group":{ref:".label-rect","ref-x":0,"ref-y":0},".label-wrap":{ref:".label-rect","ref-width":1,"ref-height":1},".label":{text:"",x:"50%",y:"1.3em","text-anchor":"middle","font-family":"Arial","font-size":14,fill:"#000000"}}},h.dia.Element.prototype.defaults)}),z=h.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/></g><text class="label"/></g>',defaults:h.util.deepSupplement({type:"bpmn.DataObject",size:{width:60,height:80},attrs:{".body":{points:"20,0 60,0 60,80 0,80 0,20 20,0 20,20 0,20",stroke:"#000000",fill:"#ffffff"},".label":{ref:".body","ref-x":.5,"ref-dy":5,text:"","text-anchor":"middle"}}},h.dia.Element.prototype.defaults)}),ao=h.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/></g><text class="label"/><path class="sub-process"/></g>',defaults:h.util.deepSupplement({type:"bpmn.Conversation",size:{width:100,height:100},attrs:{".body":{points:"25,0 75,0 100,50 75,100 25,100 0,50",stroke:"#000000",fill:"#ffffff"},".label":{text:"",ref:".body","ref-x":.5,"ref-dy":5,"text-anchor":"middle"},path:{d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",ref:".body","ref-x":.5,"ref-dy":-30,"x-alignment":"middle",fill:"#ffffff",stroke:"#000000","fill-opacity":0}},conversationType:"conversation"},h.dia.Element.prototype.defaults),initialize:function(){h.dia.Element.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:conversationType",this.onConversationTypeChange),this.onConversationTypeChange(this,this.get("conversationType"))},onConversationTypeChange:function(t,e){switch(e){case"conversation":t.attr("polygon/stroke-width",1);break;case"call-conversation":t.attr("polygon/stroke-width",4);break;default:throw"BPMN: Unknown Conversation Type: "+e}}}).extend(d),so=l.TextBlock.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body"/></g>',h.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>','<text class="label"/><path class="sub-process"/><g class="participants"/>',"</g>"].join(""),participantMarkup:'<g class="participant"><rect class="participant-rect"/><text class="participant-label"/></g>',defaults:h.util.deepSupplement({type:"bpmn.Choreography",size:{width:60,height:80},attrs:{rect:{},".body":{width:60,height:80,stroke:"#000000",fill:"#ffffff"},".label":{ref:".body","ref-x":.5,"ref-dy":5,text:"","text-anchor":"middle"},".participant-rect":{stroke:"#000000",fill:"#aaaaaa",ref:".body","ref-width":1},".participant-label":{"text-anchor":"middle",ref:".participant_0 .participant-rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle"},".sub-process":{d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",ref:".body","ref-x":.5,"ref-dy":-30,"x-alignment":"middle",fill:"transparent",stroke:"#000000"}},participants:[],initiatingParticipant:0},l.TextBlock.prototype.defaults)}).extend(d),co=l.TextBlockView.extend({options:{participantHeight:20},presentationAttributes:l.TextBlockView.addPresentationAttributes({participants:"PARTICIPANTS",initiatingParticipant:"INIT_PARTICIPANT"}),initFlag:["PARTICIPANTS"].concat(l.TextBlockView.prototype.initFlag),confirmUpdate:function(){var t=l.TextBlockView.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"PARTICIPANTS")?(this.renderParticipants(this.model.get("participants")),this.removeFlag(t,["PARTICIPANTS","INIT_PARTICIPANT"])):(this.hasFlag(t,"INIT_PARTICIPANT")&&(this.layoutAndUpdate(),t=this.removeFlag(t,"INIT_PARTICIPANT")),t)},update:function(){return void 0===this.participantsAttrs?this.renderParticipants(this.model.get("participants")):(this.layoutAndUpdate(),this)},render:function(){this.participantsAttrs=void 0,h.dia.ElementView.prototype.render.apply(this,arguments)},renderMarkup:function(){h.dia.ElementView.prototype.renderMarkup.apply(this,arguments),this.$participants=this.$(".participants"),this.participantMarkup=h.V(this.model.participantMarkup)},renderParticipants:function(t){var i=this,e=this.$participants,o=h.V(e[0]).children();e.empty(),this.participantsAttrs={},h.util.toArray(t).forEach(function(t,e){var n="participant_".concat(e),r=".".concat(n),r=(i.participantsAttrs[r+" .participant-rect"]={height:i.options.participantHeight},i.participantsAttrs[r+" .participant-label"]={text:t},e<o.length?o[e]:i.participantMarkup.clone());i.$participants.append(r.addClass(n).node)}),this.layoutAndUpdate()},layoutAndUpdate:function(){var t=this.model.get("participants")||[],e=t.length,r=this.options.participantHeight,n=this.model.get("size").height,i=Math.max(0,n-r*e),o=0,a=this.model.get("initiatingParticipant"),s=Math.max(h.util.isNumber(a)?Math.abs(a):t.indexOf(a),0),c=Math.min(s,e-2),a=(h.util.toArray(t).forEach(function(t,e){var n=".participant_"+e;this.participantsAttrs[n]={transform:"translate(0,"+o+")"},this.participantsAttrs[n+" .participant-rect"].fill=s==e?this.model.attr(".body/fill"):this.model.attr(".participant-rect/fill"),this.participantsAttrs[n+" .participant-rect"].stroke=s==e?this.model.attr(".body/stroke"):this.model.attr(".participant-rect/stroke"),o+=r+(c==e?i:0)},this),e<2?0:c-e+1),t=(this.participantsAttrs[".sub-process"]={"ref-dy":Math.max(-n,a*r-30)},e<2?0:c+1),n=(this.participantsAttrs[".fobj div"]={style:{height:i,paddingTop:r*t}},this.participantsAttrs[".content"]={"ref-y":r*t+i/2},h.util.merge({},this.model.get("attrs"),this.participantsAttrs||{}));h.util.unsetByPath(n,"div/html"),l.TextBlockView.prototype.update.call(this,this.model,n)}}),lo=h.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/></g><text class="label"/></g>',defaults:h.util.deepSupplement({type:"bpmn.Message",size:{width:60,height:40},attrs:{".body":{points:"0,0 60,0 60,40 0,40 0,0 60,0 30,20 0,0",stroke:"#000000",fill:"#ffffff"},".label":{ref:".body","ref-x":.5,"ref-dy":5,text:"","text-anchor":"middle"}}},h.dia.Element.prototype.defaults)}),uo=h.dia.Link.extend({defaults:{type:"bpmn.Flow",attrs:{".marker-source":{d:"M 0 0"},".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#000000"},".connection":{"stroke-dasharray":" ","stroke-width":1},".connection-wrap":{style:"",onMouseOver:"",onMouseOut:""}},flowType:"normal"},initialize:function(){h.dia.Link.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:flowType",this.onFlowTypeChange),this.onFlowTypeChange(this,this.get("flowType"))},onFlowTypeChange:function(t,e){var n;switch(e){case"default":n={".marker-source":{d:"M 0 5 L 20 5 M 20 0 L 10 10",fill:"none"}};break;case"conditional":n={".marker-source":{d:"M 20 8 L 10 0 L 0 8 L 10 16 z",fill:"#FFF"}};break;case"normal":n={};break;case"message":n={".marker-target":{fill:"#FFF"},".connection":{"stroke-dasharray":"4,4"}};break;case"association":n={".marker-target":{d:"M 0 0"},".connection":{"stroke-dasharray":"4,4"}};break;case"conversation":n={".marker-target":{d:"M 0 0"},".connection":{"stroke-width":"7px"},".connection-wrap":{style:"stroke: #fff; stroke-width: 5px; opacity: 1;",onMouseOver:"var s=this.style;s.stroke='#000';s.strokeWidth=15;s.opacity=.4",onMouseOut:"var s=this.style;s.stroke='#fff';s.strokeWidth=5;s.opacity=1"}};break;default:throw"BPMN: Unknown Flow Type: "+e}n.root={dataFlowType:e},t.attr(h.util.merge({},this.defaults.attrs,n))}});t.Activity=N,t.ActivityView=Ci,t.Annotation=y,t.AnnotationView=e,t.Choreography=so,t.ChoreographyView=co,t.Conversation=ao,t.DataObject=z,t.Event=L,t.Flow=uo,t.Gateway=E,t.Group=D,t.IconInterface=C,t.Message=lo,t.Pool=I,t.PoolView=j,t.SubProcessInterface=d,t.icons=oo}(this.joint.shapes=this.joint.shapes||{},joint,joint.shapes.basic);