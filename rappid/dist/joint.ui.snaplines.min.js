/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(I,i,x){"use strict";i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function W(t,e){return t(e={exports:{}},e.exports),e.exports}function e(t){return t&&t.Math==Math&&t}function c(t){try{return!!t()}catch(t){return!0}}function B(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function G(t){return O?nt(t):function(){return et.apply(t,arguments)}}function n(t){return it(rt(t),8,-1)}function r(t){if("Function"===n(t))return G(t)}function R(t){if(ct(t))throw st("Can't call method on "+t);return t}function s(t){return at(R(t))}function o(t,e){return arguments.length<2?(n=m[t],M(n)?n:void 0):m[t]&&m[t][e];var n}function _(t){return Et(R(t))}function k(t){return"Symbol("+(void 0===t?"":t)+")_"+At(++Tt+Pt,36)}function u(t){var e;return P(A,t)&&(dt||"string"==typeof A[t])||(e="Symbol."+t,dt&&P(N,t)?A[t]=N[t]:A[t]=(gt&&Nt?Nt:zt)(e)),A[t]}function H(t){return t=function(t,e){if(!j(t)||bt(t))return t;var n=wt(t,Dt);if(n){if(n=w(n,t,e=void 0===e?"default":e),!j(n)||bt(n))return n;throw Ct("Can't convert object to primitive value")}return xt(t,e=void 0===e?"number":e)}(t,"string"),bt(t)?t:t+""}function a(t){if(j(t))return t;throw kt(_t(t)+" is not an object")}function V(t){return Zt[t]||(Zt[t]=k(t))}function $(t,e,n,r){var i=(r=r||{}).enumerable,o=void 0!==r.name?r.name:e;if(M(n)&&oe(n,o,r),r.global)i?t[e]=n:jt(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:z.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}}function U(t){return pe(t.length)}function q(a){return function(t,e,n){var r,i=s(t),o=U(i),u=function(t,e){t=se(t);return t<0?le(t+e,0):fe(t,e)}(n,o);if(a&&e!=e){for(;u<o;)if((r=i[u++])!=r)return!0}else for(;u<o;u++)if((a||u in i)&&i[u]===e)return a||u||0;return!a&&-1}}function X(t,e){var n,r=s(t),i=0,o=[];for(n in r)!P(te,n)&&P(r,n)&&ge(o,n);for(;e.length>i;)!P(r,n=e[i++])||~de(o,n)||ge(o,n);return o}function l(t,e){return(t=Me[xe(t)])==Ee||t!=je&&(M(e)?c(e):!!e)}function f(t,e){var n,r,i,o=t.target,u=t.global,a=t.stat,c=u?m:a?m[o]||jt(o,{}):(m[o]||{}).prototype;if(c)for(n in e){if(r=e[n],i=t.dontCallGetSet?(i=Te(c,n))&&i.value:c[n],!Le(u?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;for(var s=r,l=i,f=y=g=d=p=h=void 0,h=we(l),p=z.f,d=Rt.f,g=0;g<h.length;g++){var y=h[g];P(s,y)||f&&P(f,y)||p(s,y,d(l,y))}}(t.sham||i&&i.sham)&&Kt(r,"sham",!0),$(c,n,r,t)}}function K(){}function h(t){if(!M(t))return!1;try{return Ie(K,Fe,t),!0}catch(t){return!1}}function Y(t){if(!M(t))return!1;switch(De(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ge||!!Be(We,Qt(t))}catch(t){return!0}}function J(t,e){return new(He(t))(0===e?0:e)}function p(d){var g=1==d,y=2==d,b=3==d,m=4==d,v=6==d,S=7==d,w=5==d||v;return function(t,e,n,r){for(var i,o,u,a,c=_(t),s=at(c),l=(o=n,St(i=e),void 0===o?i:O?Ae(i,o):function(){return i.apply(o,arguments)}),f=U(s),h=0,n=r||J,p=g?n(t,f):y||S?n(t,0):void 0;h<f;h++)if((w||h in s)&&(a=l(u=s[h],h,c),d))if(g)p[h]=a;else if(a)switch(d){case 3:return!0;case 5:return u;case 6:return h;case 2:Ve(p,u)}else switch(d){case 4:return!1;case 7:Ve(p,u)}return v?-1:b||m?m:p}}function Q(e){return 51<=pt||!c(function(){var t=[];return(t.constructor={})[$e]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var d,g,y,b,m=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||function(){return this}()||Function("return this")(),v=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),O=!c(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),S=Function.prototype.call,w=O?S.bind(S):function(){return S.apply(S,arguments)},t={}.propertyIsEnumerable,Z=Object.getOwnPropertyDescriptor,tt={f:Z&&!t.call({1:2},1)?function(t){t=Z(this,t);return!!t&&t.enumerable}:t},t=Function.prototype,et=t.call,nt=O&&t.bind.bind(et,et),rt=G({}.toString),it=G("".slice),ot=Object,ut=r("".split),at=c(function(){return!ot("z").propertyIsEnumerable(0)})?function(t){return"String"==n(t)?ut(t,""):ot(t)}:ot,ct=function(t){return null==t},st=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},lt=t.all,M=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===lt}:function(t){return"function"==typeof t},ft=t.all,j=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:M(t)||t===ft}:function(t){return"object"==typeof t?null!==t:M(t)},ht=r({}.isPrototypeOf),t=o("navigator","userAgent")||"",E=m.process,L=m.Deno,E=E&&E.versions||L&&L.version,L=E&&E.v8,pt=D=!(D=L?0<(C=L.split("."))[0]&&C[0]<4?1:+(C[0]+C[1]):D)&&t&&(!(C=t.match(/Edge\/(\d+)/))||74<=C[1])&&(C=t.match(/Chrome\/(\d+)/))?+C[1]:D,dt=!!Object.getOwnPropertySymbols&&!c(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&pt&&pt<41}),gt=dt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,yt=Object,bt=gt?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return M(e)&&ht(e.prototype,yt(t))},mt=String,vt=TypeError,St=function(t){if(M(t))return t;throw vt(function(t){try{return mt(t)}catch(t){return"Object"}}(t)+" is not a function")},wt=function(t,e){t=t[e];return ct(t)?void 0:St(t)},Ot=TypeError,xt=function(t,e){var n,r;if("string"===e&&M(n=t.toString)&&!j(r=w(n,t)))return r;if(M(n=t.valueOf)&&!j(r=w(n,t)))return r;if("string"!==e&&M(n=t.toString)&&!j(r=w(n,t)))return r;throw Ot("Can't convert object to primitive value")},Mt=Object.defineProperty,jt=function(e,n){try{Mt(m,e,{value:n,configurable:!0,writable:!0})}catch(t){m[e]=n}return n},E="__core-js_shared__",T=m[E]||jt(E,{}),L=W(function(t){(t.exports=function(t,e){return T[t]||(T[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),Et=Object,Lt=r({}.hasOwnProperty),P=Object.hasOwn||function(t,e){return Lt(_(t),e)},Tt=0,Pt=Math.random(),At=r(1..toString),A=L("wks"),N=m.Symbol,Nt=N&&N.for,zt=gt?N:N&&N.withoutSetter||k,Ct=TypeError,Dt=u("toPrimitive"),Ft=m.document,It=j(Ft)&&j(Ft.createElement),Wt=function(t){return It?Ft.createElement(t):{}},Bt=!v&&!c(function(){return 7!=Object.defineProperty(Wt("div"),"a",{get:function(){return 7}}).a}),Gt=Object.getOwnPropertyDescriptor,Rt={f:v?Gt:function(t,e){if(t=s(t),e=H(e),Bt)try{return Gt(t,e)}catch(t){}if(P(t,e))return B(!w(tt.f,t,e),t[e])}},t=v&&c(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),_t=String,kt=TypeError,Ht=TypeError,Vt=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,Ut="enumerable",qt="configurable",Xt="writable",z={f:v?t?function(t,e,n){var r;return a(t),e=H(e),a(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Xt in n&&!n[Xt]&&((r=$t(t,e))&&r[Xt]&&(t[e]=n.value,n={configurable:(qt in n?n:r)[qt],enumerable:(Ut in n?n:r)[Ut],writable:!1})),Vt(t,e,n)}:Vt:function(t,e,n){if(a(t),e=H(e),a(n),Bt)try{return Vt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Ht("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Kt=v?function(t,e,n){return z.f(t,e,B(1,n))}:function(t,e,n){return t[e]=n,t},C=Function.prototype,D=v&&Object.getOwnPropertyDescriptor,E=P(C,"name"),Yt={EXISTS:E,PROPER:E&&"something"===function(){}.name,CONFIGURABLE:E&&(!v||D(C,"name").configurable)},Jt=r(Function.toString),Qt=(M(T.inspectSource)||(T.inspectSource=function(t){return Jt(t)}),T.inspectSource),E=m.WeakMap,D=M(E)&&/native code/.test(String(E)),Zt=L("keys"),te={},ee="Object already initialized",ne=m.TypeError,C=m.WeakMap,re=D||T.state?((y=T.state||(T.state=new C)).get=y.get,y.has=y.has,y.set=y.set,d=function(t,e){if(y.has(t))throw ne(ee);return e.facade=t,y.set(t,e),e},g=function(t){return y.get(t)||{}},function(t){return y.has(t)}):(b=V("state"),te[b]=!0,d=function(t,e){if(P(t,b))throw ne(ee);return e.facade=t,Kt(t,b,e),e},g=function(t){return P(t,b)?t[b]:{}},function(t){return P(t,b)}),ie={set:d,get:g,has:re,enforce:function(t){return re(t)?g(t):d(t,{})},getterFor:function(e){return function(t){if(j(t)&&(t=g(t)).type===e)return t;throw ne("Incompatible receiver, "+e+" required")}}},oe=W(function(t){var r=Yt.CONFIGURABLE,i=ie.enforce,e=ie.get,o=Object.defineProperty,u=v&&!c(function(){return 8!==o(function(){},"length",{value:8}).length}),a=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!P(t,"name")||r&&t.name!==e)&&(v?o(t,"name",{value:e,configurable:!0}):t.name=e),u&&n&&P(n,"arity")&&t.length!==n.arity&&o(t,"length",{value:n.arity});try{n&&P(n,"constructor")&&n.constructor?v&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=i(t);return P(n,"source")||(n.source=a.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return M(this)&&e(this).source||Qt(this)},"toString")}),ue=Math.ceil,ae=Math.floor,ce=Math.trunc||function(t){t=+t;return(0<t?ae:ue)(t)},se=function(t){t=+t;return t!=t||0==t?0:ce(t)},le=Math.max,fe=Math.min,he=Math.min,pe=function(t){return 0<t?he(se(t),9007199254740991):0},E={includes:q(!0),indexOf:q(!1)},de=E.indexOf,ge=r([].push),ye=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=ye.concat("length","prototype"),me={f:Object.getOwnPropertyNames||function(t){return X(t,be)}},ve={f:Object.getOwnPropertySymbols},Se=r([].concat),we=o("Reflect","ownKeys")||function(t){var e=me.f(a(t)),n=ve.f;return n?Se(e,n(t)):e},Oe=/#|\.prototype\./,xe=l.normalize=function(t){return String(t).replace(Oe,".").toLowerCase()},Me=l.data={},je=l.NATIVE="N",Ee=l.POLYFILL="P",Le=l,Te=Rt.f,Pe=Array.isArray||function(t){return"Array"==n(t)},Ae=(f({target:"Array",stat:!0},{isArray:Pe}),r(r.bind)),L={},D=(L[u("toStringTag")]="z","[object z]"===String(L)),Ne=u("toStringTag"),ze=Object,Ce="Arguments"==n(function(){return arguments}()),De=D?n:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=ze(t),Ne))?e:Ce?n(t):"Object"==(e=n(t))&&M(t.callee)?"Arguments":e},Fe=[],Ie=o("Reflect","construct"),We=/^\s*(?:class|function)\b/,Be=r(We.exec),Ge=!We.exec(K),Re=(Y.sham=!0,!Ie||c(function(){var t;return h(h.call)||!h(Object)||!h(function(){t=!0})||t})?Y:h),_e=u("species"),ke=Array,He=function(t){var e;return Pe(t)&&(e=t.constructor,(Re(e)&&(e===ke||Pe(e.prototype))||j(e)&&null===(e=e[_e]))&&(e=void 0)),void 0===e?ke:e},Ve=r([].push),C={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)},$e=u("species"),Ue=C.filter;f({target:"Array",proto:!0,forced:!Q("filter")},{filter:function(t){return Ue(this,t,1<arguments.length?arguments[1]:void 0)}});function qe(t,e){var n=[][t];return!!n&&c(function(){n.call(null,e||function(){return 1},1)})}D||$(Object.prototype,"toString",D?{}.toString:function(){return"[object "+De(this)+"]"},{unsafe:!0});function Xe(e){if(e&&e.forEach!==F)try{Kt(e,"forEach",F)}catch(t){e.forEach=F}}var Ke,Ye=C.forEach,F=qe("forEach")?[].forEach:function(t){return Ye(this,t,1<arguments.length?arguments[1]:void 0)},Je=(f({target:"Array",proto:!0,forced:[].forEach!=F},{forEach:F}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),L=Wt("span").classList,D=L&&L.constructor&&L.constructor.prototype,L=D===Object.prototype?void 0:D;for(Ke in Je)Je[Ke]&&Xe(m[Ke]&&m[Ke].prototype);Xe(L);function Qe(){}function Ze(t){t.write(fn("")),t.close();var e=t.parentWindow.Object;return t=null,e}var tn,en=E.indexOf,nn=r([].indexOf),rn=!!nn&&1/nn([1],1,-0)<0,D=qe("indexOf"),on=(f({target:"Array",proto:!0,forced:rn||!D},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return rn?nn(this,t,e)||0:en(this,t,e)}}),Object.keys||function(t){return X(t,ye)}),un={f:v&&!t?Object.defineProperties:function(t,e){a(t);for(var n,r=s(e),i=on(e),o=i.length,u=0;u<o;)z.f(t,n=i[u++],r[n]);return t}},an=o("document","documentElement"),cn="prototype",sn="script",ln=V("IE_PROTO"),fn=function(t){return"<"+sn+">"+t+"</"+sn+">"},hn=function(){try{tn=new ActiveXObject("htmlfile")}catch(t){}hn="undefined"==typeof document||document.domain&&tn?Ze(tn):(t=Wt("iframe"),e="java"+sn+":",t.style.display="none",an.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(fn("document.F=Object")),e.close(),e.F);for(var t,e,n=ye.length;n--;)delete hn[cn][ye[n]];return hn()},L=(te[ln]=!0,Object.create||function(t,e){var n;return null!==t?(Qe[cn]=a(t),n=new Qe,Qe[cn]=null,n[ln]=t):n=hn(),void 0===e?n:un.f(n,e)}),E=z.f,D=u("unscopables"),t=Array.prototype,pn=(null==t[D]&&E(t,D,{configurable:!0,value:L(null)}),C.find),E="find",dn=!0,gn=(E in[]&&Array(1)[E](function(){dn=!1}),f({target:"Array",proto:!0,forced:dn},{find:function(t){return pn(this,t,1<arguments.length?arguments[1]:void 0)}}),t[D][E]=!0,C.map),L=(f({target:"Array",proto:!0,forced:!Q("map")},{map:function(t){return gn(this,t,1<arguments.length?arguments[1]:void 0)}}),x.mvc.View.extend({options:{paper:void 0,usePaperGrid:!1,distance:10},className:"snaplines",documentEvents:{mouseup:"hide",touchend:"hide"},init:function(){x.util.bindAll(this,"hide"),this.render(),this.enable(),this.prepareFilters()},render:function(){var t=this.$el,e=this.options,n=this.$horizontal=i("<div>").addClass("snapline horizontal"),r=this.$vertical=i("<div>").addClass("snapline vertical");t.hide().append([n,r]).appendTo(e.paper.el)},startListening:function(){this.enable()},_isEnabled:!1,enable:function(){var t=this.options.paper;this.disable(),this.listenTo(t,"element:pointerdown",this.captureCursorOffset),this.listenTo(t,"element:pointermove",this.snapWhileMoving),this.listenTo(t.model,"batch:stop",this.onBatchStop),this.delegateDocumentEvents(),this._isEnabled=!0},disable:function(){var t=this.options.paper;this.stopListening(t,"element:pointerdown",this.captureCursorOffset),this.stopListening(t,"element:pointermove",this.snapWhileMoving),this.stopListening(t.model,"batch:stop",this.onBatchStop),this.undelegateDocumentEvents(),this._isEnabled=!1},isDisabled:function(){return!this._isEnabled},prepareFilters:function(){this.filterTypes={},this.filterCells={},this.filterFunction=void 0,Array.isArray(this.options.filter)?this.options.filter.forEach(function(t){x.util.isString(t)?this.filterTypes[t]=!0:this.filterCells[t.id]=!0},this):x.util.isFunction(this.options.filter)&&(this.filterFunction=this.options.filter)},onBatchStop:function(t){"resize"===(t=t||{}).batchName&&this.snapWhileResizing(t.cell,t)},captureCursorOffset:function(t,e,n,r){var t=t.getDelegatedView();t&&this.canElementMove(t)&&(t=t.model.get("position"),this._cursorOffset={x:n-t.x,y:r-t.y})},snapWhileResizing:function(r,t){if(t.ui&&!t.snapped&&t.direction&&t.trueDirection){var i=this.options,e=i.paper,n=e.findViewByModel(r);if(n&&n.model.isElement()){var n=r.getBBox(),o=n.bbox(r.get("angle")),u=o.origin(),a=o.corner(),c=x.g.normalizeAngle(r.get("angle")),s=i.distance,l=null,f=null,h=e.options.gridSize,p={vertical:0,horizontal:0},d=t.direction,g=t.trueDirection,y=t.relativeDirection;if(-1!==g.indexOf("right")?p.vertical=a.x:p.vertical=u.x,-1!==g.indexOf("bottom")?p.horizontal=a.y:p.horizontal=u.y,e.model.getElements().find(function(t){var e,n;return!(t.id===r.id||t.isEmbeddedIn(r)||this.filterTypes[t.get("type")]||this.filterCells[t.id]||this.filterFunction&&this.filterFunction(t))&&(e=(t=t.getBBox().bbox(t.get("angle"))).origin(),t=t.corner(),i.usePaperGrid&&(e.snapToGrid(h),t.snapToGrid(h)),n={vertical:[e.x,t.x],horizontal:[e.y,t.y]},x.util.forIn(n,function(t,e){t=(t=t.map(function(t){return{position:t,distance:Math.abs(t-p[e])}})).filter(function(t){return t.distance<s}),t=x.util.sortBy(t,function(t){return t.distance}),n[e]=t}),null===l&&0<n.vertical.length&&(l=n.vertical[0].position),null===f&&0<n.horizontal.length&&(f=n.horizontal[0].position),x.util.isNumber(l)&&x.util.isNumber(f))},this),this.hide(),x.util.isNumber(l)||x.util.isNumber(f)){var b=0,m=(x.util.isNumber(l)&&(b=-1!==g.indexOf("right")?l-o.corner().x:o.origin().x-l),0),v=(x.util.isNumber(f)&&(m=-1!==g.indexOf("bottom")?f-o.corner().y:o.origin().y-f),0),S=0;if(!(c%90))S=90===c||270===c?(v=m,b):(v=b,m);else{var a=0<=c&&c<90?1:90<=c&&c<180?4:180<=c&&c<270?3:2,w=(f&&l&&(b<m?(m=0,f=null):(b=0,l=null)),x.g.toRad(c%90)),O=(b&&(v=3===a?b/Math.cos(w):b/Math.sin(w)),m&&(S=3===a?m/Math.cos(w):m/Math.sin(w)),1===a||3===a);switch(y){case"top":case"bottom":S=m?m/(O?Math.cos(w):Math.sin(w)):b/(O?Math.sin(w):Math.cos(w));break;case"left":case"right":v=b?b/(O?Math.cos(w):Math.sin(w)):m/(O?Math.sin(w):Math.cos(w))}}switch(y){case"top":case"bottom":v=0;break;case"left":case"right":S=0}u=Math.max(n.width+v,h),e=Math.max(n.height+S,h),o=(t.minWidth&&t.minWidth>h&&(u=Math.max(u,t.minWidth)),t.minHeight&&t.minHeight>h&&(e=Math.max(e,t.minHeight)),t.maxWidth&&(u=Math.min(u,t.maxWidth)),t.maxHeight&&(e=Math.min(e,t.maxHeight)),t.preserveAspectRatio&&(S<v?e=u*(n.height/n.width):u=e*(n.width/n.height)),u===n.width&&e===n.height||r.resize(u,e,{snaplines:this.cid,direction:d,relativeDirection:y,trueDirection:g,snapped:!0}),r.getBBox().bbox(c));l&&1<Math.abs(o.x-l)&&1<Math.abs(o.width+o.x-l)&&(l=null),f&&1<Math.abs(o.y-f)&&1<Math.abs(o.height+o.y-f)&&(f=null),this.show({vertical:l,horizontal:f})}}}},canElementMove:function(t){return t&&t.model.isElement()&&t.can("elementMove")},snapWhileMoving:function(t,e,n,r){var i,o,u,a,c,s,l,f,h,p,d,g,y,e=t.eventData(e).delegatedView||t;this.canElementMove(e)&&(t=(i=e.model).get("size"),t=x.g.rect(x.util.assign({x:n-this._cursorOffset.x,y:r-this._cursorOffset.y},t)),o=t.center(),y=t.bbox(i.get("angle")),u=y.origin(),a=y.corner(),s=(c=this.options).paper,l=c.distance,h=f=null,d=p=0,s.model.getElements().find(function(t){var e,n;return!(t===i||t.isEmbeddedIn(i)||this.filterTypes[t.get("type")]||this.filterCells[t.id]||this.filterFunction&&this.filterFunction(t))&&(e=(t=t.getBBox().bbox(t.get("angle"))).center(),n=t.origin(),t=t.corner(),null===f&&(Math.abs(e.x-o.x)<l?(f=e.x,p=.5):Math.abs(n.x-u.x)<l?f=n.x:Math.abs(n.x-a.x)<l?(f=n.x,p=1):Math.abs(t.x-a.x)<l?(f=t.x,p=1):Math.abs(t.x-u.x)<l&&(f=t.x)),null===h&&(Math.abs(e.y-o.y)<l?(h=e.y,d=.5):Math.abs(n.y-u.y)<l?h=n.y:Math.abs(n.y-a.y)<l?(h=n.y,d=1):Math.abs(t.y-a.y)<l?(h=t.y,d=1):Math.abs(t.y-u.y)<l&&(h=t.y)),x.util.isNumber(f)&&x.util.isNumber(h))},this),this.hide(),(x.util.isNumber(f)||x.util.isNumber(h))&&(x.util.isNumber(f)&&(y.x=f-p*y.width),x.util.isNumber(h)&&(y.y=h-d*y.height),g=(y=y.center()).x-t.width/2,y=y.y-t.height/2,t=new x.g.Point(g,y),c.usePaperGrid&&t.snapToGrid(s.options.gridSize),i.position(t.x,t.y,{restrictedArea:s.getRestrictedArea(e,n,r),deep:!0,snapped:!0}),this.show({vertical:f,horizontal:h})))},show:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.vertical,t=t.horizontal,n=this.options,r=this.$horizontal,i=this.$vertical,o=this.$el,n=n.paper.matrix(),u=n.a,a=n.d,c=n.e,n=n.f;x.util.isNumber(t)?r.css("top",t*a+n).show():r.hide(),x.util.isNumber(e)?i.css("left",e*u+c).show():i.hide(),o.show()},hide:function(){this.$el.hide()}},{HandlePosition:{N:"n",NW:"nw",W:"w",SW:"sw",S:"s",SE:"se",E:"e",NE:"ne"}}));I.Snaplines=L}(this.joint.ui=this.joint.ui||{},$,joint);