/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(L,r,N){"use strict";function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function $(t,e){return t(e={exports:{}},e.exports),e.exports}function z(t){return t&&t.Math==Math&&t}function a(t){try{return!!t()}catch(t){return!0}}function U(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function Y(t){return ot?st(t):function(){return at.apply(t,arguments)}}function j(t){return lt(ft(t),8,-1)}function u(t){if("Function"===j(t))return Y(t)}function _(t){if(dt(t))throw vt("Can't call method on "+t);return t}function s(t){return yt(_(t))}function n(t,e){return arguments.length<2?(n=g[t],K(n)?n:void 0):g[t]&&g[t][e];var n}function W(t){return Rt(_(t))}function B(t){return"Symbol("+(void 0===t?"":t)+")_"+Dt(++Lt+Nt,36)}function e(t){var e;return E($t,t)&&(wt||"string"==typeof $t[t])||(e="Symbol."+t,wt&&E(w,t)?$t[t]=w[t]:$t[t]=(St&&zt?zt:Ut)(e)),$t[t]}function G(t){return t=function(t,e){if(!d(t)||jt(t))return t;var n=Pt(t,_t);if(n){if(n=x(n,t,e=void 0===e?"default":e),!d(n)||jt(n))return n;throw Yt("Can't convert object to primitive value")}return Ct(t,e=void 0===e?"number":e)}(t,"string"),jt(t)?t:t+""}function H(t){return se[t]||(se[t]=B(t))}function X(t,e,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:e;if(K(n)&&de(n,i,r),r.global)o?t[e]=n:Ft(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:oe.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}}function q(t){return Oe(t.length)}function V(c){return function(t,e,n){var r,o=s(t),i=q(o),u=function(t,e){t=me(t);return t<0?Ee(t+e,0):we(t,e)}(n,i);if(c&&e!=e){for(;u<i;)if((r=o[u++])!=r)return!0}else for(;u<i;u++)if((c||u in o)&&o[u]===e)return c||u||0;return!c&&-1}}function J(t,e){var n,r=s(t),o=0,i=[];for(n in r)!E(fe,n)&&E(r,n)&&xe(i,n);for(;e.length>o;)!E(r,n=e[o++])||~je(i,n)||xe(i,n);return i}function o(t,e){return(t=Re[Fe(t)])==Le||t!=Me&&(K(e)?a(e):!!e)}function i(t,e){var n,r,o,i=t.target,u=t.global,c=t.stat,a=u?g:c?g[i]||Ft(i,{}):(g[i]||{}).prototype;if(a)for(n in e){if(r=e[n],o=t.dontCallGetSet?(o=De(a,n))&&o.value:a[n],!Ne(u?n:i+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;for(var s=r,f=o,l=v=d=y=h=p=void 0,p=Ce(f),h=oe.f,y=qt.f,d=0;d<p.length;d++){var v=p[d];E(s,v)||l&&E(l,v)||h(s,v,y(f,v))}}(t.sham||o&&o.sham)&&ie(r,"sham",!0),X(a,n,r,t)}}function Q(t,e){var n=[][t];return!!n&&a(function(){n.call(null,e||function(){return 1},1)})}function Z(){}function c(t){if(!K(t))return!1;try{return Xe(Z,He,t),!0}catch(t){return!1}}function tt(t){if(!K(t))return!1;switch(Ge(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Je||!!Ve(qe,ae(t))}catch(t){return!0}}function et(t,e){return new(en(t))(0===e?0:e)}function f(y){var d=1==y,v=2==y,g=3==y,b=4==y,m=6==y,E=7==y,w=5==y||m;return function(t,e,n,r){for(var o,i,u,c,a=W(t),s=yt(a),f=(i=n,At(o=e),void 0===i?o:ot?Ue(o,i):function(){return o.apply(i,arguments)}),l=q(s),p=0,n=r||et,h=d?n(t,l):v||E?n(t,0):void 0;p<l;p++)if((w||p in s)&&(c=f(u=s[p],p,a),y))if(d)h[p]=c;else if(c)switch(y){case 3:return!0;case 5:return u;case 6:return p;case 2:nn(h,u)}else switch(y){case 4:return!1;case 7:nn(h,u)}return m?-1:g||b?b:h}}function nt(e){return 51<=Et||!a(function(){var t=[];return(t.constructor={})[rn]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var rt,l,p,h,g=z("object"==typeof globalThis&&globalThis)||z("object"==typeof window&&window)||z("object"==typeof self&&self)||z("object"==typeof t&&t)||function(){return this}()||Function("return this")(),y=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),ot=!a(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),it=Function.prototype.call,x=ot?it.bind(it):function(){return it.apply(it,arguments)},t={}.propertyIsEnumerable,ut=Object.getOwnPropertyDescriptor,ct={f:ut&&!t.call({1:2},1)?function(t){t=ut(this,t);return!!t&&t.enumerable}:t},t=Function.prototype,at=t.call,st=ot&&t.bind.bind(at,at),ft=Y({}.toString),lt=Y("".slice),pt=Object,ht=u("".split),yt=a(function(){return!pt("z").propertyIsEnumerable(0)})?function(t){return"String"==j(t)?ht(t,""):pt(t)}:pt,dt=function(t){return null==t},vt=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},gt=t.all,K=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===gt}:function(t){return"function"==typeof t},bt=t.all,d=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:K(t)||t===bt}:function(t){return"object"==typeof t?null!==t:K(t)},mt=u({}.isPrototypeOf),t=n("navigator","userAgent")||"",v=g.process,b=g.Deno,v=v&&v.versions||b&&b.version,b=v&&v.v8,Et=O=!(O=b?0<(S=b.split("."))[0]&&S[0]<4?1:+(S[0]+S[1]):O)&&t&&(!(S=t.match(/Edge\/(\d+)/))||74<=S[1])&&(S=t.match(/Chrome\/(\d+)/))?+S[1]:O,wt=!!Object.getOwnPropertySymbols&&!a(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Et&&Et<41}),St=wt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ot=Object,jt=St?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return K(e)&&mt(e.prototype,Ot(t))},xt=String,Kt=function(t){try{return xt(t)}catch(t){return"Object"}},kt=TypeError,At=function(t){if(K(t))return t;throw kt(Kt(t)+" is not a function")},Pt=function(t,e){t=t[e];return dt(t)?void 0:At(t)},It=TypeError,Ct=function(t,e){var n,r;if("string"===e&&K(n=t.toString)&&!d(r=x(n,t)))return r;if(K(n=t.valueOf)&&!d(r=x(n,t)))return r;if("string"!==e&&K(n=t.toString)&&!d(r=x(n,t)))return r;throw It("Can't convert object to primitive value")},Tt=Object.defineProperty,Ft=function(e,n){try{Tt(g,e,{value:n,configurable:!0,writable:!0})}catch(t){g[e]=n}return n},v="__core-js_shared__",m=g[v]||Ft(v,{}),b=$(function(t){(t.exports=function(t,e){return m[t]||(m[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),Rt=Object,Mt=u({}.hasOwnProperty),E=Object.hasOwn||function(t,e){return Mt(W(t),e)},Lt=0,Nt=Math.random(),Dt=u(1..toString),$t=b("wks"),w=g.Symbol,zt=w&&w.for,Ut=St?w:w&&w.withoutSetter||B,Yt=TypeError,_t=e("toPrimitive"),Wt=g.document,Bt=d(Wt)&&d(Wt.createElement),Gt=function(t){return Bt?Wt.createElement(t):{}},Ht=!y&&!a(function(){return 7!=Object.defineProperty(Gt("div"),"a",{get:function(){return 7}}).a}),Xt=Object.getOwnPropertyDescriptor,qt={f:y?Xt:function(t,e){if(t=s(t),e=G(e),Ht)try{return Xt(t,e)}catch(t){}if(E(t,e))return U(!x(ct.f,t,e),t[e])}},t=y&&a(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Vt=String,Jt=TypeError,k=function(t){if(d(t))return t;throw Jt(Vt(t)+" is not an object")},Qt=TypeError,Zt=Object.defineProperty,te=Object.getOwnPropertyDescriptor,ee="enumerable",ne="configurable",re="writable",oe={f:y?t?function(t,e,n){var r;return k(t),e=G(e),k(n),"function"==typeof t&&"prototype"===e&&"value"in n&&re in n&&!n[re]&&((r=te(t,e))&&r[re]&&(t[e]=n.value,n={configurable:(ne in n?n:r)[ne],enumerable:(ee in n?n:r)[ee],writable:!1})),Zt(t,e,n)}:Zt:function(t,e,n){if(k(t),e=G(e),k(n),Ht)try{return Zt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Qt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ie=y?function(t,e,n){return oe.f(t,e,U(1,n))}:function(t,e,n){return t[e]=n,t},S=Function.prototype,O=y&&Object.getOwnPropertyDescriptor,v=E(S,"name"),ue={EXISTS:v,PROPER:v&&"something"===function(){}.name,CONFIGURABLE:v&&(!y||O(S,"name").configurable)},ce=u(Function.toString),ae=(K(m.inspectSource)||(m.inspectSource=function(t){return ce(t)}),m.inspectSource),v=g.WeakMap,O=K(v)&&/native code/.test(String(v)),se=b("keys"),fe={},le="Object already initialized",pe=g.TypeError,S=g.WeakMap,he=O||m.state?((p=m.state||(m.state=new S)).get=p.get,p.has=p.has,p.set=p.set,rt=function(t,e){if(p.has(t))throw pe(le);return e.facade=t,p.set(t,e),e},l=function(t){return p.get(t)||{}},function(t){return p.has(t)}):(h=H("state"),fe[h]=!0,rt=function(t,e){if(E(t,h))throw pe(le);return e.facade=t,ie(t,h,e),e},l=function(t){return E(t,h)?t[h]:{}},function(t){return E(t,h)}),ye={set:rt,get:l,has:he,enforce:function(t){return he(t)?l(t):rt(t,{})},getterFor:function(e){return function(t){if(d(t)&&(t=l(t)).type===e)return t;throw pe("Incompatible receiver, "+e+" required")}}},de=$(function(t){var r=ue.CONFIGURABLE,o=ye.enforce,e=ye.get,i=Object.defineProperty,u=y&&!a(function(){return 8!==i(function(){},"length",{value:8}).length}),c=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!E(t,"name")||r&&t.name!==e)&&(y?i(t,"name",{value:e,configurable:!0}):t.name=e),u&&n&&E(n,"arity")&&t.length!==n.arity&&i(t,"length",{value:n.arity});try{n&&E(n,"constructor")&&n.constructor?y&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=o(t);return E(n,"source")||(n.source=c.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return K(this)&&e(this).source||ae(this)},"toString")}),ve=Math.ceil,ge=Math.floor,be=Math.trunc||function(t){t=+t;return(0<t?ge:ve)(t)},me=function(t){t=+t;return t!=t||0==t?0:be(t)},Ee=Math.max,we=Math.min,Se=Math.min,Oe=function(t){return 0<t?Se(me(t),9007199254740991):0},v={includes:V(!0),indexOf:V(!1)},je=v.indexOf,xe=u([].push),Ke=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ke=Ke.concat("length","prototype"),Ae={f:Object.getOwnPropertyNames||function(t){return J(t,ke)}},Pe={f:Object.getOwnPropertySymbols},Ie=u([].concat),Ce=n("Reflect","ownKeys")||function(t){var e=Ae.f(k(t)),n=Pe.f;return n?Ie(e,n(t)):e},Te=/#|\.prototype\./,Fe=o.normalize=function(t){return String(t).replace(Te,".").toLowerCase()},Re=o.data={},Me=o.NATIVE="N",Le=o.POLYFILL="P",Ne=o,De=qt.f,$e=Object.keys||function(t){return J(t,Ke)},ze=(i({target:"Object",stat:!0,forced:a(function(){$e(1)})},{keys:function(t){return $e(W(t))}}),u([].join)),O=yt!=Object,S=Q("join",","),Ue=(i({target:"Array",proto:!0,forced:O||!S},{join:function(t){return ze(s(this),void 0===t?",":t)}}),u(u.bind)),Ye=Array.isArray||function(t){return"Array"==j(t)},O={},S=(O[e("toStringTag")]="z","[object z]"===String(O)),_e=e("toStringTag"),We=Object,Be="Arguments"==j(function(){return arguments}()),Ge=S?j:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=We(t),_e))?e:Be?j(t):"Object"==(e=j(t))&&K(t.callee)?"Arguments":e},He=[],Xe=n("Reflect","construct"),qe=/^\s*(?:class|function)\b/,Ve=u(qe.exec),Je=!qe.exec(Z),Qe=(tt.sham=!0,!Xe||a(function(){var t;return c(c.call)||!c(Object)||!c(function(){t=!0})||t})?tt:c),Ze=e("species"),tn=Array,en=function(t){var e;return Ye(t)&&(e=t.constructor,(Qe(e)&&(e===tn||Ye(e.prototype))||d(e)&&null===(e=e[Ze]))&&(e=void 0)),void 0===e?tn:e},nn=u([].push),O={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)},rn=e("species"),on=O.filter;i({target:"Array",proto:!0,forced:!nt("filter")},{filter:function(t){return on(this,t,1<arguments.length?arguments[1]:void 0)}});function A(t){if("Symbol"===Ge(t))throw TypeError("Cannot convert a Symbol value to a string");return dn(t)}function un(){var t=k(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}function cn(){}function an(t){t.write(On("")),t.close();var e=t.parentWindow.Object;return t=null,e}function sn(o){return function(t,e){var n,t=A(_(t)),e=me(e),r=t.length;return e<0||r<=e?o?"":void 0:(n=Gn(t,e))<55296||56319<n||e+1===r||(r=Gn(t,e+1))<56320||57343<r?o?Bn(t,e):n:o?Hn(t,e,e+2):r-56320+(n-55296<<10)+65536}}function P(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N.util.bindAll(this,"handleKey"),this.options=N.util.assign({},t),this.parser=new T,this.enable()}S||X(Object.prototype,"toString",S?{}.toString:function(){return"[object "+Ge(this)+"]"},{unsafe:!0});var fn,ln,pn,hn,I,yn,dn=String,vn=g.RegExp,S=a(function(){var t=vn("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),gn=S||a(function(){return!vn("a","y").sticky}),gn={BROKEN_CARET:S||a(function(){var t=vn("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:gn,UNSUPPORTED_Y:S},bn={f:y&&!t?Object.defineProperties:function(t,e){k(t);for(var n,r=s(e),o=$e(e),i=o.length,u=0;u<i;)oe.f(t,n=o[u++],r[n]);return t}},mn=n("document","documentElement"),En="prototype",wn="script",Sn=H("IE_PROTO"),On=function(t){return"<"+wn+">"+t+"</"+wn+">"},jn=function(){try{fn=new ActiveXObject("htmlfile")}catch(t){}jn="undefined"==typeof document||document.domain&&fn?an(fn):(t=Gt("iframe"),e="java"+wn+":",t.style.display="none",mn.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(On("document.F=Object")),e.close(),e.F);for(var t,e,n=Ke.length;n--;)delete jn[En][Ke[n]];return jn()},xn=(fe[Sn]=!0,Object.create||function(t,e){var n;return null!==t?(cn[En]=k(t),n=new cn,cn[En]=null,n[Sn]=t):n=jn(),void 0===e?n:bn.f(n,e)}),Kn=g.RegExp,S=a(function(){var t=Kn(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),kn=g.RegExp,t=a(function(){var t=kn("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),An=ye.get,Pn=b("native-string-replace",String.prototype.replace),In=RegExp.prototype.exec,Cn=In,Tn=u("".charAt),Fn=u("".indexOf),Rn=u("".replace),Mn=u("".slice),Ln=(b=/b*/g,x(In,C=/a/,"a"),x(In,b,"a"),0!==C.lastIndex||0!==b.lastIndex),Nn=gn.BROKEN_CARET,Dn=void 0!==/()??/.exec("")[1],$n=Cn=Ln||Dn||Nn||S||t?function(t){var e,n,r,o,i,u,c=this,a=An(c),t=A(t),s=a.raw;if(s)return s.lastIndex=c.lastIndex,l=x(Cn,s,t),c.lastIndex=s.lastIndex,l;var f=a.groups,s=Nn&&c.sticky,l=x(un,c),a=c.source,p=0,h=t;if(s&&(l=Rn(l,"y",""),-1===Fn(l,"g")&&(l+="g"),h=Mn(t,c.lastIndex),0<c.lastIndex&&(!c.multiline||c.multiline&&"\n"!==Tn(t,c.lastIndex-1))&&(a="(?: "+a+")",h=" "+h,p++),e=new RegExp("^(?:"+a+")",l)),Dn&&(e=new RegExp("^"+a+"$(?!\\s)",l)),Ln&&(n=c.lastIndex),r=x(In,s?e:c,h),s?r?(r.input=Mn(r.input,p),r[0]=Mn(r[0],p),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:Ln&&r&&(c.lastIndex=c.global?r.index+r[0].length:n),Dn&&r&&1<r.length&&x(Pn,r[0],e,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r&&f)for(r.groups=i=xn(null),o=0;o<f.length;o++)i[(u=f[o])[0]]=r[u[1]];return r}:Cn,C=(i({target:"RegExp",proto:!0,forced:/./.exec!==$n},{exec:$n}),Function.prototype),zn=C.apply,Un=C.call,Yn="object"==typeof Reflect&&Reflect.apply||(ot?Un.bind(zn):function(){return Un.apply(zn,arguments)}),_n=e("species"),Wn=RegExp.prototype,Bn=u("".charAt),Gn=u("".charCodeAt),Hn=u("".slice),Xn={codeAt:sn(!1),charAt:sn(!0)}.charAt,qn=Math.floor,Vn=u("".charAt),Jn=u("".replace),Qn=u("".slice),Zn=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,tr=/\$([$&'`]|\d{1,2})/g,er=TypeError,nr=e("replace"),rr=Math.max,or=Math.min,ir=u([].concat),ur=u([].push),cr=u("".indexOf),ar=u("".slice),b="$0"==="a".replace(/./,"$0"),sr=!!/./[nr]&&""===/./[nr]("a","$0"),gn=!a(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),fr=(S=function(t,w,S){var O=sr?"$":"$0";return[function(t,e){var n=_(this),r=dt(t)?void 0:Pt(t,nr);return r?x(r,t,n,e):x(w,A(n),t,e)},function(t,e){var n=k(this),r=A(t);if("string"==typeof e&&-1===cr(e,O)&&-1===cr(e,"$<")){t=S(w,n,r,e);if(t.done)return t.value}for(var o,i,u,c=K(e),a=(c||(e=A(e)),n.global),s=(a&&(o=n.unicode,n.lastIndex=0),[]);null!==(y=function(t,e){var n=t.exec;if(K(n))return null!==(n=x(n,t,e))&&k(n),n;if("RegExp"===j(t))return x($n,t,e);throw er("RegExp#exec called on incompatible receiver")}(n,r))&&(ur(s,y),a);)""===A(y[0])&&(n.lastIndex=(i=r,(u=Oe(n.lastIndex))+(o?Xn(i,u).length:1)));for(var f,l="",p=0,h=0;h<s.length;h++){for(var y,d=A((y=s[h])[0]),v=rr(or(me(y.index),r.length),0),g=[],b=1;b<y.length;b++)ur(g,void 0===(f=y[b])?f:String(f));var m=y.groups,E=c?(E=ir([d],g,v,r),void 0!==m&&ur(E,m),A(Yn(e,void 0,E))):function(i,u,c,a,s,t){var f=c+i.length,l=a.length,e=tr;return void 0!==s&&(s=W(s),e=Zn),Jn(t,e,function(t,e){var n;switch(Vn(e,0)){case"$":return"$";case"&":return i;case"`":return Qn(u,0,c);case"'":return Qn(u,f);case"<":n=s[Qn(e,1,-1)];break;default:var r,o=+e;if(0==o)return t;if(l<o)return 0!==(r=qn(o/10))&&r<=l?void 0===a[r-1]?Vn(e,1):a[r-1]+Vn(e,1):t;n=a[o-1]}return void 0===n?"":n})}(d,r,v,g,m,e);p<=v&&(l+=ar(r,p,v)+E,p=v+d.length)}return l+ar(r,p)}]},t=!gn||!b||sr,I=e(ln="replace"),yn=!a(function(){var t={};return t[I]=function(){return 7},7!=""[ln](t)}),C=yn&&!a(function(){var t=!1,e=/a/;return"split"===ln&&((e={constructor:{}}).constructor[_n]=function(){return e},e.flags="",e[I]=/./[I]),e.exec=function(){return t=!0,null},e[I](""),!t}),yn&&C&&!t||(hn=u(/./[I]),C=S(I,""[ln],function(t,e,n,r,o){var t=u(t),i=e.exec;return i===$n||i===Wn.exec?yn&&!o?{done:!0,value:hn(e,n,r)}:{done:!0,value:t(n,e,r)}:{done:!1}}),X(String.prototype,ln,C[0]),X(Wn,I,C[1])),pn&&ie(Wn[I],"sham",!0),O.map),lr=(i({target:"Array",proto:!0,forced:!nt("map")},{map:function(t){return fr(this,t,1<arguments.length?arguments[1]:void 0)}}),v.indexOf),pr=u([].indexOf),hr=!!pr&&1/pr([1],1,-0)<0,gn=Q("indexOf"),T=(i({target:"Array",proto:!0,forced:hr||!gn},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return hr?pr(this,t,e)||0:lr(this,t,e)}}),N.util.assign(P.prototype,r.Events),P.prototype.on=function(t,e,n){return r.Events.on.call(this,this.normalizeEvent(t),e,n),this},P.prototype.off=function(t,e,n){t=t?this.normalizeEvent(t):null;return r.Events.off.call(this,t,e,n),this},P.prototype.normalizeEvent=function(t){if("object"!==D(t))return this.normalizeShortcut(t);for(var e=Object.keys(t),n={},r=0,o=e.length;r<o;r++){var i=e[r];n[this.normalizeEvent(i)]=t[i]}return n},P.prototype.normalizeShortcut=function(t){var e=t.toLowerCase();if(e in gr)return gr[e];for(var n=this.parser.toEventObjectList(t),r=[],o=0;o<n.length;o++)r.push(this.hash(n[o]));return r.join(" ")},P.prototype.enable=function(){window.addEventListener?(document.addEventListener("keydown",this.handleKey,!1),document.addEventListener("keypress",this.handleKey,!1),document.addEventListener("keyup",this.handleKey,!1)):window.attachEvent&&(document.attachEvent("keydown",this.handleKey,!1),document.attachEvent("keypress",this.handleKey,!1),document.attachEvent("keyup",this.handleKey,!1))},P.prototype.disable=function(){window.removeEventListener?(document.removeEventListener("keydown",this.handleKey,!1),document.removeEventListener("keypress",this.handleKey,!1),document.removeEventListener("keyup",this.handleKey,!1)):window.detachEvent&&(document.detachEvent("keydown",this.handleKey,!1),document.detachEvent("keypress",this.handleKey,!1),document.detachEvent("keyup",this.handleKey,!1))},P.prototype.isActive=function(t,e){return this.isModifierActive(t,e)},P.prototype.isModifierActive=function(t,e){for(var n=this.parser.toEventObjectList(t),r=0;r<n.length;r++)if(n[r].modifiersCompare(e))return!0;return!1},P.prototype.isKeyPrintable=function(t){return!!t&&(!!(t=t.key)&&(1===t.length||"Unidentified"===t))},P.prototype.hash=function(t){function e(t){return t?1:0}return[t.type,":",t.which,e(t.shiftKey),e(t.ctrlKey),e(t.altKey),e(t.metaKey)].join("")},P.prototype.handleKey=function(t){var e=this.options.filter;if("function"==typeof e){if(!e.call(this,t,this))return}else if(this.isConsumerElement(t))return;e=M.fromNative(t);r.Events.trigger.call(this,this.hash(e),t),this.isKeyPrintable(t)&&r.Events.trigger.call(this,"".concat(t.type,":printable"),t)},P.prototype.isConsumerElement=function(t){var e,t=t.target||t.srcElement;return!!t&&("INPUT"===(e=t.tagName.toUpperCase())||"SELECT"===e||"TEXTAREA"===e||t.isContentEditable)},function(){}),yr=(T.prototype={constructor:T,parseEventString:function(t){for(var e=(t=t||"").split("+"),n=new M(0),r=0;r<e.length;r++){var o=e[r],i=this.getModifierPropertyName(o);i&&(n[i]=!0),1!==e.length&&void 0!==i||(n.which=T.getCode(o))}return n},toEventObjectList:function(t){return t.replace(/\s*\+\s*/gi,"+").split(" ").map(this.composeEventObject,this)},composeEventObject:function(t){var e=t.split(":"),n=R.KEYDOWN,r=e[0];if(1<e.length&&(r=e[1],n=e[0]),-1===br.indexOf(n))throw t+": invalid shortcut definition";e=this.parseEventString(r);return n===R.KEYUP&&F[e.which]&&(e[F[e.which]]=!1),e.setType(n)},getModifierPropertyName:function(t){t=yr[t];return F[t]}},T.getCode=function(t){return vr[t]||t.toUpperCase().charCodeAt(0)},{"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91,meta:91}),F={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},dr={226:"\\",57392:"ctrl",63289:"num",59:";",61:"=",173:"-"},vr={backspace:8,tab:9,shift:16,ctrl:17,alt:18,meta:91,clear:12,enter:13,return:13,esc:27,escape:27,capslock:20,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,insert:45,ins:45,pageup:33,pagedown:34,plus:187,minus:189,"-":189,",":188,".":190,"/":191,"`":192,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},gr={all:"all",printable:"keypress:printable","keypress:printable":"keypress:printable","keydown:printable":"keydown:printable","keyup:printable":"keyup:printable"},R=(N.util.assign(P,{keyMap:vr,modifierMap:F,modifiers:yr,charCodeAlternatives:dr,eventNamesMap:gr}),{KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup"}),br=[R.KEYPRESS,R.KEYDOWN,R.KEYUP],M=function(t,e,n,r,o,i){this.which=t,this.shiftKey=e||!1,this.ctrlKey=n||!1,this.altKey=r||!1,this.metaKey=o||!1,this.type=i||R.KEYDOWN};M.fromNative=function(t){var e=t.which,n=(t.type===R.KEYPRESS&&(e=String.fromCharCode(t.which).toUpperCase().charCodeAt(0)),dr[e]&&(e=T.getCode(dr[e])),new M(e,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey,t.type));return t.type===R.KEYUP&&F[e]&&(n[F[e]]=!1),n},M.prototype.modifiersCompare=function(t){return!(this.shiftKey&&this.shiftKey!==t.shiftKey||this.ctrlKey&&this.ctrlKey!==t.ctrlKey||this.altKey&&this.altKey!==t.altKey||this.metaKey&&this.metaKey!==t.metaKey)},M.prototype.setType=function(t){return this.type=t,this},L.Keyboard=P}(this.joint.ui=this.joint.ui||{},Backbone,joint);