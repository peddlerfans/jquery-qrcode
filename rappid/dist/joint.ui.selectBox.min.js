/*! JointJS+ v3.6.3 - HTML5 Diagramming Framework

Copyright (c) 2022 client IO

 2022-12-09 


This Source Code Form is subject to the terms of the JointJS+ License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(N,c,s){"use strict";c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function D(t,e){return t(e={exports:{}},e.exports),e.exports}function _(t){return t&&t.Math==Math&&t}function u(t){try{return!!t()}catch(t){return!0}}function B(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function H(t){return ht?yt(t):function(){return gt.apply(t,arguments)}}function n(t){return bt(mt(t),8,-1)}function e(t){if("Function"===n(t))return H(t)}function V(t){if(jt(t))throw Ct("Can't call method on "+t);return t}function F(t){return St(V(t))}function o(t,e){return arguments.length<2?(n=y[t],p(n)?n:void 0):y[t]&&y[t][e];var n}function W(t){return Vt(V(t))}function G(t){return"Symbol("+(void 0===t?"":t)+")_"+Ut(++Wt+Gt,36)}function i(t){var e;return O(zt,t)&&(Pt||"string"==typeof zt[t])||(e="Symbol."+t,Pt&&O(S,t)?zt[t]=S[t]:zt[t]=(At&&Kt?Kt:qt)(e)),zt[t]}function U(t){return t=function(t,e){if(!d(t)||Rt(t))return t;var n=Nt(t,Xt);if(n){if(n=m(n,t,e=void 0===e?"default":e),!d(n)||Rt(n))return n;throw Jt("Can't convert object to primitive value")}return _t(t,e=void 0===e?"number":e)}(t,"string"),Rt(t)?t:t+""}function z(t){return ve[t]||(ve[t]=G(t))}function K(t,e,n,o){var i=(o=o||{}).enumerable,r=void 0!==o.name?o.name:e;if(p(n)&&Oe(n,r,o),o.global)i?t[e]=n:Ht(e,n);else{try{o.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:T.f(t,e,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}function q(t){return Pe(t.length)}function J(c){return function(t,e,n){var o,i=F(t),r=q(i),s=function(t,e){t=Te(t);return t<0?xe(t+e,0):Ee(t,e)}(n,r);if(c&&e!=e){for(;s<r;)if((o=i[s++])!=o)return!0}else for(;s<r;s++)if((c||s in i)&&i[s]===e)return c||s||0;return!c&&-1}}function X(t,e){var n,o=F(t),i=0,r=[];for(n in o)!O(ge,n)&&O(o,n)&&Le(r,n);for(;e.length>i;)!O(o,n=e[i++])||~Ae(r,n)||Le(r,n);return r}function Y(t,e){return(t=He[Be(t)])==Fe||t!=Ve&&(p(e)?u(e):!!e)}function r(t,e){var n,o,i,r=t.target,s=t.global,c=t.stat,u=s?y:c?y[r]||Ht(r,{}):(y[r]||{}).prototype;if(u)for(n in e){if(o=e[n],i=t.dontCallGetSet?(i=Ge(u,n))&&i.value:u[n],!We(s?n:r+(c?".":"#")+n,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;for(var a=o,l=i,f=g=v=d=p=h=void 0,h=De(l),p=T.f,d=ne.f,v=0;v<h.length;v++){var g=h[v];O(a,g)||f&&O(f,g)||p(a,g,d(l,g))}}(t.sham||i&&i.sham)&&fe(o,"sham",!0),K(u,n,o,t)}}function Q(t,e){return b(t),void 0===e?t:ht?Ue(t,e):function(){return t.apply(e,arguments)}}function Z(){}function tt(t){if(!p(t))return!1;try{return Qe(Z,Ye,t),!0}catch(t){return!1}}function et(t){if(!p(t))return!1;switch(Xe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return en||!!tn(Ze,de(t))}catch(t){return!0}}function nt(t,e){return new(sn(t))(0===e?0:e)}function a(h){var p=1==h,d=2==h,v=3==h,g=4==h,y=6==h,m=7==h,b=5==h||y;return function(t,e,n,o){for(var i,r,s=W(t),c=St(s),u=Q(e,n),a=q(c),l=0,e=o||nt,f=p?e(t,a):d||m?e(t,0):void 0;l<a;l++)if((b||l in c)&&(r=u(i=c[l],l,s),h))if(p)f[l]=r;else if(r)switch(h){case 3:return!0;case 5:return i;case 6:return l;case 2:cn(f,i)}else switch(h){case 4:return!1;case 7:cn(f,i)}return y?-1:v||g?g:f}}function ot(){}function it(t){t.write(dn("")),t.close();var e=t.parentWindow.Object;return t=null,e}function rt(t){yn[gn][t]=!0}function st(t,e){var n,t=C(t).constructor;if(void 0===t||jt(n=C(t)[Cn]))return e;if(nn(t=n))return t;throw jn(Mt(t)+" is not a constructor")}var ct,ut,l,f,at,lt,ft,y=_("object"==typeof globalThis&&globalThis)||_("object"==typeof window&&window)||_("object"==typeof self&&self)||_("object"==typeof t&&t)||function(){return this}()||Function("return this")(),h=!u(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),ht=!u(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),pt=Function.prototype.call,m=ht?pt.bind(pt):function(){return pt.apply(pt,arguments)},t={}.propertyIsEnumerable,dt=Object.getOwnPropertyDescriptor,vt={f:dt&&!t.call({1:2},1)?function(t){t=dt(this,t);return!!t&&t.enumerable}:t},t=Function.prototype,gt=t.call,yt=ht&&t.bind.bind(gt,gt),mt=H({}.toString),bt=H("".slice),wt=Object,Ot=e("".split),St=u(function(){return!wt("z").propertyIsEnumerable(0)})?function(t){return"String"==n(t)?Ot(t,""):wt(t)}:wt,jt=function(t){return null==t},Ct=TypeError,t="object"==typeof document&&document.all,t={all:t,IS_HTMLDDA:void 0===t&&void 0!==t},Tt=t.all,p=t.IS_HTMLDDA?function(t){return"function"==typeof t||t===Tt}:function(t){return"function"==typeof t},xt=t.all,d=t.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:p(t)||t===xt}:function(t){return"object"==typeof t?null!==t:p(t)},Et=e({}.isPrototypeOf),t=o("navigator","userAgent")||"",v=y.process,g=y.Deno,v=v&&v.versions||g&&g.version,g=v&&v.v8,$t=x=!(x=g?0<(j=g.split("."))[0]&&j[0]<4?1:+(j[0]+j[1]):x)&&t&&(!(j=t.match(/Edge\/(\d+)/))||74<=j[1])&&(j=t.match(/Chrome\/(\d+)/))?+j[1]:x,Pt=!!Object.getOwnPropertySymbols&&!u(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&$t&&$t<41}),At=Pt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Lt=Object,Rt=At?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return p(e)&&Et(e.prototype,Lt(t))},It=String,Mt=function(t){try{return It(t)}catch(t){return"Object"}},kt=TypeError,b=function(t){if(p(t))return t;throw kt(Mt(t)+" is not a function")},Nt=function(t,e){t=t[e];return jt(t)?void 0:b(t)},Dt=TypeError,_t=function(t,e){var n,o;if("string"===e&&p(n=t.toString)&&!d(o=m(n,t)))return o;if(p(n=t.valueOf)&&!d(o=m(n,t)))return o;if("string"!==e&&p(n=t.toString)&&!d(o=m(n,t)))return o;throw Dt("Can't convert object to primitive value")},Bt=Object.defineProperty,Ht=function(e,n){try{Bt(y,e,{value:n,configurable:!0,writable:!0})}catch(t){y[e]=n}return n},v="__core-js_shared__",w=y[v]||Ht(v,{}),g=D(function(t){(t.exports=function(t,e){return w[t]||(w[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})}),Vt=Object,Ft=e({}.hasOwnProperty),O=Object.hasOwn||function(t,e){return Ft(W(t),e)},Wt=0,Gt=Math.random(),Ut=e(1..toString),zt=g("wks"),S=y.Symbol,Kt=S&&S.for,qt=At?S:S&&S.withoutSetter||G,Jt=TypeError,Xt=i("toPrimitive"),Yt=y.document,Qt=d(Yt)&&d(Yt.createElement),Zt=function(t){return Qt?Yt.createElement(t):{}},te=!h&&!u(function(){return 7!=Object.defineProperty(Zt("div"),"a",{get:function(){return 7}}).a}),ee=Object.getOwnPropertyDescriptor,ne={f:h?ee:function(t,e){if(t=F(t),e=U(e),te)try{return ee(t,e)}catch(t){}if(O(t,e))return B(!m(vt.f,t,e),t[e])}},j=h&&u(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),oe=String,ie=TypeError,C=function(t){if(d(t))return t;throw ie(oe(t)+" is not an object")},re=TypeError,se=Object.defineProperty,ce=Object.getOwnPropertyDescriptor,ue="enumerable",ae="configurable",le="writable",T={f:h?j?function(t,e,n){var o;return C(t),e=U(e),C(n),"function"==typeof t&&"prototype"===e&&"value"in n&&le in n&&!n[le]&&((o=ce(t,e))&&o[le]&&(t[e]=n.value,n={configurable:(ae in n?n:o)[ae],enumerable:(ue in n?n:o)[ue],writable:!1})),se(t,e,n)}:se:function(t,e,n){if(C(t),e=U(e),C(n),te)try{return se(t,e,n)}catch(t){}if("get"in n||"set"in n)throw re("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},fe=h?function(t,e,n){return T.f(t,e,B(1,n))}:function(t,e,n){return t[e]=n,t},x=Function.prototype,v=h&&Object.getOwnPropertyDescriptor,E=O(x,"name"),he={EXISTS:E,PROPER:E&&"something"===function(){}.name,CONFIGURABLE:E&&(!h||v(x,"name").configurable)},pe=e(Function.toString),de=(p(w.inspectSource)||(w.inspectSource=function(t){return pe(t)}),w.inspectSource),E=y.WeakMap,v=p(E)&&/native code/.test(String(E)),ve=g("keys"),ge={},ye="Object already initialized",me=y.TypeError,x=y.WeakMap,be=v||w.state?((l=w.state||(w.state=new x)).get=l.get,l.has=l.has,l.set=l.set,ct=function(t,e){if(l.has(t))throw me(ye);return e.facade=t,l.set(t,e),e},ut=function(t){return l.get(t)||{}},function(t){return l.has(t)}):(f=z("state"),ge[f]=!0,ct=function(t,e){if(O(t,f))throw me(ye);return e.facade=t,fe(t,f,e),e},ut=function(t){return O(t,f)?t[f]:{}},function(t){return O(t,f)}),we={set:ct,get:ut,has:be,enforce:function(t){return be(t)?ut(t):ct(t,{})},getterFor:function(e){return function(t){if(d(t)&&(t=ut(t)).type===e)return t;throw me("Incompatible receiver, "+e+" required")}}},Oe=D(function(t){var o=he.CONFIGURABLE,i=we.enforce,e=we.get,r=Object.defineProperty,s=h&&!u(function(){return 8!==r(function(){},"length",{value:8}).length}),c=String(String).split("String"),t=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!O(t,"name")||o&&t.name!==e)&&(h?r(t,"name",{value:e,configurable:!0}):t.name=e),s&&n&&O(n,"arity")&&t.length!==n.arity&&r(t,"length",{value:n.arity});try{n&&O(n,"constructor")&&n.constructor?h&&r(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}n=i(t);return O(n,"source")||(n.source=c.join("string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return p(this)&&e(this).source||de(this)},"toString")}),Se=Math.ceil,je=Math.floor,Ce=Math.trunc||function(t){t=+t;return(0<t?je:Se)(t)},Te=function(t){t=+t;return t!=t||0==t?0:Ce(t)},xe=Math.max,Ee=Math.min,$e=Math.min,Pe=function(t){return 0<t?$e(Te(t),9007199254740991):0},Ae={includes:J(!0),indexOf:J(!1)}.indexOf,Le=e([].push),Re=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ie=Re.concat("length","prototype"),Me={f:Object.getOwnPropertyNames||function(t){return X(t,Ie)}},ke={f:Object.getOwnPropertySymbols},Ne=e([].concat),De=o("Reflect","ownKeys")||function(t){var e=Me.f(C(t)),n=ke.f;return n?Ne(e,n(t)):e},_e=/#|\.prototype\./,Be=Y.normalize=function(t){return String(t).replace(_e,".").toLowerCase()},He=Y.data={},Ve=Y.NATIVE="N",Fe=Y.POLYFILL="P",We=Y,Ge=ne.f,Ue=e(e.bind),ze=Array.isArray||function(t){return"Array"==n(t)},E={},g=(E[i("toStringTag")]="z","[object z]"===String(E)),Ke=i("toStringTag"),qe=Object,Je="Arguments"==n(function(){return arguments}()),Xe=g?n:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=qe(t),Ke))?e:Je?n(t):"Object"==(e=n(t))&&p(t.callee)?"Arguments":e},Ye=[],Qe=o("Reflect","construct"),Ze=/^\s*(?:class|function)\b/,tn=e(Ze.exec),en=!Ze.exec(Z),nn=(et.sham=!0,!Qe||u(function(){var t;return tt(tt.call)||!tt(Object)||!tt(function(){t=!0})||t})?et:tt),on=i("species"),rn=Array,sn=function(t){var e;return ze(t)&&(e=t.constructor,(nn(e)&&(e===rn||ze(e.prototype))||d(e)&&null===(e=e[on]))&&(e=void 0)),void 0===e?rn:e},cn=e([].push),v={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},un=Object.keys||function(t){return X(t,Re)},an={f:h&&!j?Object.defineProperties:function(t,e){C(t);for(var n,o=F(e),i=un(e),r=i.length,s=0;s<r;)T.f(t,n=i[s++],o[n]);return t}},ln=o("document","documentElement"),fn="prototype",hn="script",pn=z("IE_PROTO"),dn=function(t){return"<"+hn+">"+t+"</"+hn+">"},vn=function(){try{at=new ActiveXObject("htmlfile")}catch(t){}vn="undefined"==typeof document||document.domain&&at?it(at):(t=Zt("iframe"),e="java"+hn+":",t.style.display="none",ln.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(dn("document.F=Object")),e.close(),e.F);for(var t,e,n=Re.length;n--;)delete vn[fn][Re[n]];return vn()},x=(ge[pn]=!0,Object.create||function(t,e){var n;return null!==t?(ot[fn]=C(t),n=new ot,ot[fn]=null,n[pn]=t):n=vn(),void 0===e?n:an.f(n,e)}),E=T.f,gn=i("unscopables"),yn=Array.prototype,mn=(null==yn[gn]&&E(yn,gn,{configurable:!0,value:x(null)}),v.find),j="find",bn=!0,E=(j in[]&&Array(1)[j](function(){bn=!1}),r({target:"Array",proto:!0,forced:bn},{find:function(t){return mn(this,t,1<arguments.length?arguments[1]:void 0)}}),rt(j),g?{}.toString:function(){return"[object "+Xe(this)+"]"}),$=(g||K(Object.prototype,"toString",E,{unsafe:!0}),"process"==n(y.process)),wn=String,On=TypeError,x=Object.setPrototypeOf||("__proto__"in{}?function(){var n,o=!1,t={};try{(n=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),o=t instanceof Array}catch(t){}return function(t,e){return C(t),function(t){if("object"==typeof t||p(t))return;throw On("Can't set "+wn(t)+" as a prototype")}(e),o?n(t,e):t.__proto__=e,t}}():void 0),j=T.f,g=i("toStringTag"),E=i("species"),Sn=TypeError,jn=TypeError,Cn=i("species"),P=Function.prototype,Tn=P.apply,xn=P.call,En="object"==typeof Reflect&&Reflect.apply||(ht?xn.bind(Tn):function(){return xn.apply(Tn,arguments)}),$n=e([].slice),Pn=TypeError,P=/(?:ipad|iphone|ipod).*applewebkit/i.test(t),A=y.setImmediate,L=y.clearImmediate,An=y.process,Ln=y.Dispatch,Rn=y.Function,R=y.MessageChannel,In=y.String,Mn=0,kn={},Nn="onreadystatechange";try{lt=y.location}catch(t){}function Dn(t){return function(){Zn(t)}}function _n(t){Zn(t.data)}function Bn(t){y.postMessage(In(t),lt.protocol+"//"+lt.host)}function Hn(){this.head=null,this.tail=null}function Vn(t){var n,o;this.promise=new t(function(t,e){if(void 0!==n||void 0!==o)throw fo("Bad Promise constructor");n=t,o=e}),this.resolve=b(n),this.reject=b(o)}function Fn(t,e){var n,o,i,r,s=e.value,c=e.state==Po,u=c?t.ok:t.fail,a=t.resolve,l=t.reject,f=t.domain;try{u?(c||(e.rejection===Ro&&(r=e,m(po,y,function(){var t=r.facade;$?jo.emit("rejectionHandled",t):ko($o,t,r.value)})),e.rejection=Lo),!0===u?n=s:(f&&f.enter(),n=u(s),f&&(f.exit(),i=!0)),n===t.promise?l(Oo("Promise-chain cycle")):(o=Io(n))?m(o,n,a,l):a(n)):l(s)}catch(t){f&&!i&&f.exit(),l(t)}}var Wn,Gn,Un,zn,Kn,qn,Jn,Xn,Yn,Qn,Zn=function(t){var e;O(kn,t)&&(e=kn[t],delete kn[t],e())},R=(A&&L||(A=function(t){var e=arguments.length,n=1;if(e<n)throw Pn("Not enough arguments");var o=p(t)?t:Rn(t),i=$n(arguments,1);return kn[++Mn]=function(){En(o,void 0,i)},ft(Mn),Mn},L=function(t){delete kn[t]},$?ft=function(t){An.nextTick(Dn(t))}:Ln&&Ln.now?ft=function(t){Ln.now(Dn(t))}:R&&!P?(I=(R=new R).port2,R.port1.onmessage=_n,ft=Q(I.postMessage,I)):y.addEventListener&&p(y.postMessage)&&!y.importScripts&&lt&&"file:"!==lt.protocol&&!u(Bn)?(ft=Bn,y.addEventListener("message",_n,!1)):ft=Nn in Zt("script")?function(t){ln.appendChild(Zt("script"))[Nn]=function(){ln.removeChild(this),Zn(t)}}:function(t){setTimeout(Dn(t),0)}),{set:A,clear:L}),I=/ipad|iphone|ipod/i.test(t)&&void 0!==y.Pebble,A=/web0s(?!.*chrome)/i.test(t),L=ne.f,to=R.set,t=y.MutationObserver||y.WebKitMutationObserver,eo=y.document,no=y.process,M=y.Promise,L=L(y,"queueMicrotask"),L=L&&L.value,oo=(L||(Wn=function(){var t,e;for($&&(t=no.domain)&&t.exit();Gn;){e=Gn.fn,Gn=Gn.next;try{e()}catch(t){throw Gn?zn():Un=void 0,t}}Un=void 0,t&&t.enter()},zn=P||$||A||!t||!eo?!I&&M&&M.resolve?((P=M.resolve(void 0)).constructor=M,Jn=Q(P.then,P),function(){Jn(Wn)}):$?function(){no.nextTick(Wn)}:(to=Q(to,y),function(){to(Wn)}):(Kn=!0,qn=eo.createTextNode(""),new t(Wn).observe(qn,{characterData:!0}),function(){qn.data=Kn=!Kn})),L||function(t){t={fn:t,next:void 0};Un&&(Un.next=t),Gn||(Gn=t,zn()),Un=t}),io=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},ro=(Hn.prototype={add:function(t){t={item:t,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},Hn),k=y.Promise,so="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,co=!so&&!$&&"object"==typeof window&&"object"==typeof document,uo=(k&&k.prototype,i("species")),ao=!1,lo=p(y.PromiseRejectionEvent),A={CONSTRUCTOR:We("Promise",function(){var t=de(k),e=t!==String(k);if(!e&&66===$t)return!0;if(!$t||$t<51||!/native code/.test(t)){var t=new k(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((t.constructor={})[uo]=n,!(ao=t.then(function(){})instanceof n))return!0}return!e&&(co||so)&&!lo}),REJECTION_EVENT:lo,SUBCLASSING:ao},fo=TypeError,ho={f:function(t){return new Vn(t)}},po=R.set,vo="Promise",I=A.CONSTRUCTOR,go=A.REJECTION_EVENT,M=A.SUBCLASSING,yo=we.getterFor(vo),mo=we.set,P=k&&k.prototype,bo=k,wo=P,Oo=y.TypeError,So=y.document,jo=y.process,Co=ho.f,To=Co,xo=!!(So&&So.createEvent&&y.dispatchEvent),Eo="unhandledrejection",$o="rejectionhandled",Po=1,Ao=2,Lo=1,Ro=2,Io=function(t){var e;return!(!d(t)||!p(e=t.then))&&e},Mo=function(n,i){n.notified||(n.notified=!0,oo(function(){for(var t,o,e=n.reactions;t=e.get();)Fn(t,n);n.notified=!1,i&&!n.rejection&&(o=n,m(po,y,function(){var t=o.facade,e=o.value,n=No(o);if(n&&(n=io(function(){$?jo.emit("unhandledRejection",e,t):ko(Eo,t,e)}),o.rejection=$||No(o)?Ro:Lo,n.error))throw n.value}))}))},ko=function(t,e,n){var o;xo?((o=So.createEvent("Event")).promise=e,o.reason=n,o.initEvent(t,!1,!0),y.dispatchEvent(o)):o={promise:e,reason:n},!go&&(e=y["on"+t])?e(o):t===Eo&&function(t,e){var n=y.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},No=function(t){return t.rejection!==Lo&&!t.parent},Do=function(e,n,o){return function(t){e(n,t,o)}},_o=function(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=Ao,Mo(t,!0))},Bo=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw Oo("Promise can't be resolved itself");var o=Io(t);o?oo(function(){var e={done:!1};try{m(o,t,Do(Bo,e,n),Do(_o,e,n))}catch(t){_o(e,t,n)}}):(n.value=t,n.state=Po,Mo(n,!1))}catch(t){_o({done:!1},t,n)}}};if(I&&(wo=(bo=function(t){!function(t,e){if(Et(e,t))return;throw Sn("Incorrect invocation")}(this,wo),b(t),m(Xn,this);var e=yo(this);try{t(Do(Bo,e),Do(_o,e))}catch(t){_o(e,t)}}).prototype,(Xn=function(t){mo(this,{type:vo,done:!1,notified:!1,parent:!1,reactions:new ro,rejection:!1,state:0,value:void 0})}).prototype=K(wo,"then",function(t,e){var n=yo(this),o=Co(st(this,bo));return n.parent=!0,o.ok=!p(t)||t,o.fail=p(e)&&e,o.domain=$?jo.domain:void 0,0==n.state?n.reactions.add(o):oo(function(){Fn(o,n)}),o.promise}),Yn=function(){var t=new Xn,e=yo(t);this.promise=t,this.resolve=Do(Bo,e),this.reject=Do(_o,e)},ho.f=Co=function(t){return t===bo||void 0===t?new Yn:To(t)},p(k)&&P!==Object.prototype)){Qn=P.then,M||K(P,"then",function(t,e){var n=this;return new bo(function(t,e){m(Qn,n,t,e)}).then(t,e)},{unsafe:!0});try{delete P.constructor}catch(t){}x&&x(P,wo)}r({global:!0,constructor:!0,wrap:!0,forced:I},{Promise:bo}),t=!(eo=vo),(L=(L=bo)&&!t?L.prototype:L)&&!O(L,g)&&j(L,g,{configurable:!0,value:eo}),R=o(R=vo),M=T.f,h&&R&&!R[E]&&M(R,E,{configurable:!0,get:function(){return this}});function Ho(t,e,n){var o,i;C(t);try{if(!(o=Nt(t,"return"))){if("throw"===e)throw n;return}o=m(o,t)}catch(t){i=!0,o=t}if("throw"===e)throw n;if(i)throw o;C(o)}function Vo(t,e){this.stopped=t,this.result=e}function Fo(t,e,n){function o(t){return r&&Ho(r,"normal",t),new Vo(!0,t)}function i(t){return h?(C(t),v?g(t[0],t[1],o):g(t[0],t[1])):v?g(t,o):g(t)}var r,s,c,u,a,l,f=n&&n.that,h=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),g=Q(e,f);if(p)r=t.iterator;else if(d)r=t;else{if(!(n=Ko(t)))throw Jo(Mt(t)+" is not iterable");if(void 0!==(e=n)&&(Wo.Array===e||Uo[Go]===e)){for(s=0,c=q(t);s<c;s++)if((u=i(t[s]))&&Et(Xo,u))return;return}r=function(t,e){e=arguments.length<2?Ko(t):e;if(b(e))return C(m(e,t));throw qo(Mt(t)+" is not iterable")}(t,n)}for(a=(p?t:r).next;!(l=m(a,r)).done;){try{u=i(l.value)}catch(t){Ho(r,"throw",t)}if("object"==typeof u&&u&&Et(Xo,u))return}}var Wo={},Go=i("iterator"),Uo=Array.prototype,zo=i("iterator"),Ko=function(t){if(!jt(t))return Nt(t,zo)||Nt(t,"@@iterator")||Wo[Xe(t)]},qo=TypeError,Jo=TypeError,Xo=Vo.prototype,Yo=i("iterator"),Qo=!1;try{var Zo=0,ti={next:function(){return{done:!!Zo++}},return:function(){Qo=!0}};ti[Yo]=function(){return this},Array.from(ti,function(){throw 2})}catch(t){}x=A.CONSTRUCTOR||!function(t,e){if(!e&&!Qo)return!1;var n=!1;try{var o={};o[Yo]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}(function(t){k.all(t).then(void 0,function(){})}),r({target:"Promise",stat:!0,forced:x},{all:function(t){var c=this,e=ho.f(c),u=e.resolve,a=e.reject,n=io(function(){var o=b(c.resolve),i=[],r=0,s=1;Fo(t,function(t){var e=r++,n=!1;s++,m(o,c,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},a)}),--s||u(i)});return n.error&&a(n.value),e.promise}}),P=A.CONSTRUCTOR,I=k&&k.prototype;r({target:"Promise",proto:!0,forced:P,real:!0},{catch:function(t){return this.then(void 0,t)}}),p(k)&&(t=o("Promise").prototype.catch,I.catch!==t&&K(I,"catch",t,{unsafe:!0})),r({target:"Promise",stat:!0,forced:x},{race:function(t){var n=this,o=ho.f(n),i=o.reject,e=io(function(){var e=b(n.resolve);Fo(t,function(t){m(e,n,t).then(o.resolve,i)})});return e.error&&i(e.value),o.promise}});r({target:"Promise",stat:!0,forced:A.CONSTRUCTOR},{reject:function(t){var e=ho.f(this);return m(e.reject,void 0,t),e.promise}});function ei(t,e){var n=[][t];return!!n&&u(function(){n.call(null,e||function(){return 1},1)})}function ni(e){if(e&&e.forEach!==fi)try{fe(e,"forEach",fi)}catch(t){e.forEach=fi}}var oi,L=A.CONSTRUCTOR,ii=(o("Promise"),r({target:"Promise",stat:!0,forced:L},{resolve:function(t){return t=t,C(e=this),d(t)&&t.constructor===e?t:((0,(e=ho.f(e)).resolve)(t),e.promise);var e}}),v.findIndex),g="findIndex",ri=!0,si=(g in[]&&Array(1)[g](function(){ri=!1}),r({target:"Array",proto:!0,forced:ri},{findIndex:function(t){return ii(this,t,1<arguments.length?arguments[1]:void 0)}}),rt(g),Function),ci=e([].concat),ui=e([].join),ai={},eo=ht?si.bind:function(s){var c=b(this),t=c.prototype,u=$n(arguments,1),a=function(){var t=ci(u,$n(arguments));if(this instanceof a){var e=c,n=t.length,o=t;if(!O(ai,n)){for(var i=[],r=0;r<n;r++)i[r]="a["+r+"]";ai[n]=si("C,a","return new C("+ui(i,",")+")")}return ai[n](e,o)}return c.apply(s,t)};return d(t)&&(a.prototype=t),a},li=(r({target:"Function",proto:!0,forced:Function.bind!==eo},{bind:eo}),v.forEach),fi=ei("forEach")?[].forEach:function(t){return li(this,t,1<arguments.length?arguments[1]:void 0)},hi=(r({target:"Array",proto:!0,forced:[].forEach!=fi},{forEach:fi}),e([].join)),M=St!=Object,R=ei("join",","),pi=(r({target:"Array",proto:!0,forced:M||!R},{join:function(t){return hi(F(this),void 0===t?",":t)}}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),E=Zt("span").classList,ti=E&&E.constructor&&E.constructor.prototype,P=ti===Object.prototype?void 0:ti;for(oi in pi)pi[oi]&&ni(y[oi]&&y[oi].prototype);ni(P);I=s.mvc.View.extend({className:"select-box",events:{"click .select-box-selection":"onToggle"},options:{options:[],width:void 0,openPolicy:"auto",target:null,keyboardNavigation:!0,selected:void 0,selectBoxOptionsClass:void 0,disabled:!1},init:function(){this.options.target=this.options.target||document.body,s.util.bindAll(this,"onOutsideClick","onOptionSelect"),c(document).on("click.selectBox",this.onOutsideClick),this.$el.data("view",this),void 0===this.options.selected?this.selection=s.util.toArray(this.options.options).find(function(t){return!0===t.selected})||this.options.options[0]:this.selection=this.options.options[this.options.selected]},render:function(){return this.$el.empty(),this.$selection=null,this.renderSelection(this.selection),this.options.width&&this.$el.css("width",this.options.width),this.options.disabled&&this.disable(),this.$el.append(this.$options),this},renderOptions:function(){this.removeOptions();var t=this.options,e={selectBoxView:this,parentClassName:s.util.result(this,"className")||null,extraClassName:s.util.result(t,"selectBoxOptionsClass")||null,options:t.options},e=(t.width&&(e.width=t.width),t.theme&&(e.theme=t.theme),this.optionsView=new this.constructor.OptionsView(e));e.render(),this.listenTo(e,"option:select",this.onOptionSelect),this.listenTo(e,"option:hover",this.onOptionHover),this.listenTo(e,"options:mouseout",this.onOptionsMouseOut),this.$options=e.$el,this.$optionsArrow=e.$arrow,this.$target=c(t.target)},onOptionHover:function(t,e){this.trigger("option:hover",t,e)},onOptionsMouseOut:function(t){this.trigger("options:mouseout",t)},onOptionSelect:function(t,e){this.select(t,e)},removeOptions:function(){this.optionsView&&(this.stopListening(this.optionsView),this.optionsView.remove(),this.optionsView=null)},renderSelection:function(t){this.$selection||(this.$selection=c("<div/>",{class:"select-box-selection"}),this.$el.append(this.$selection)),this.$selection.empty(),t?(t=this.constructor.OptionsView.prototype.renderOptionContent.call(void 0,t),this.$selection.append(t)):this.options.placeholder&&(t=c("<div/>",{class:"select-box-placeholder",html:this.options.placeholder}),this.$selection.append(t))},onToggle:function(t){this.toggle()},onOutsideClick:function(t){!this.el.contains(t.target)&&this.$el.hasClass("opened")&&this.close()},getSelection:function(){return this.selection},getSelectionValue:function(t){return(t=t||this.selection)&&(void 0===t.value?t.content:t.value)},getSelectionIndex:function(){return s.util.toArray(this.options.options).findIndex(function(t){return t===this.selection}.bind(this))},select:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.selection=this.options.options[t],this.renderSelection(this.selection),this.trigger("option:select",this.selection,t,e),this.close()},selectByValue:function(t,e){for(var n=this.options.options||[],o=0;o<n.length;o++){var i=n[o];if(void 0===i.value&&i.content===t)return this.select(o,e);if(void 0!==i.value&&s.util.isEqual(i.value,t))return this.select(o,e)}},isOpen:function(){return this.$el.hasClass("opened")},toggle:function(){this.isOpen()?this.close():this.open()},position:function(){var t=this.$(".select-box-selection"),e=t.outerHeight(),t=t.offset(),n=t.left,o=t.top,i=this.$options.outerHeight(),r={left:0,top:0},t=(this.options.target!==document.body?((r=this.$target.offset()).width=this.$target.outerWidth(),r.height=this.$target.outerHeight(),r.left-=this.$target.scrollLeft(),r.top-=this.$target.scrollTop()):(r.width=c(window).width(),r.height=c(window).height()),n),s="auto",n=this.options.openPolicy;switch(n="selected"!==n||this.selection?n:"auto"){case"above":s=o-i;break;case"coverAbove":s=o-i+e;break;case"below":s=o+e;break;case"coverBelow":s=o;break;case"selected":s=o-this.$options.find(".selected").position().top;break;default:s=o-this.$target.scrollTop()+i>r.top+r.height?o-i+e:o}t-=r.left,s-=r.top,this.$options.css({left:t,top:s})},open:function(){this.isDisabled()||(this.renderOptions(),this.$options.appendTo(this.options.target),this.$options.addClass("rendered"),this.position(),this.$el.addClass("opened"),this.respectWindowBoundaries(),this.alignOptionsArrow())},respectWindowBoundaries:function(){var t=this.calculateElOverflow(this.$options,this.$target),e={left:0,top:0};this.$options.outerWidth()<=this.$target.innerWidth()&&(t.left&&t.right||(t.left?e.left=t.left:t.right&&(e.left=-t.right))),this.$options.outerHeight()<=this.$target.innerHeight()&&(t.top&&t.bottom||(t.top?e.top=t.top:t.bottom&&(e.top=-t.bottom))),this.$options.css({left:"+="+e.left,top:"+="+e.top})},alignOptionsArrow:function(){var t=this.$el[0].getBoundingClientRect(),e=this.$options[0].getBoundingClientRect(),t=t.left+t.width/2,t=(t-=e.left)-this.$optionsArrow.outerWidth()/2;this.$optionsArrow.css({left:t})},close:function(){this.removeOptions(),this.$el.removeClass("opened"),this.trigger("close")},onRemove:function(){this.removeOptions(),c(document).off(".selectBox",this.onOutsideClick)},isDisabled:function(){return this.$el.hasClass("disabled")},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.close(),this.$el.addClass("disabled")},onSetTheme:function(t,e){this.$options&&(t&&this.$options.removeClass(this.themeClassNamePrefix+t),this.$options.addClass(this.themeClassNamePrefix+e))},calculateElOverflow:function(t,e){e=e||window,t instanceof c&&(t=t[0]),e instanceof c&&(e=e[0]);var n,o,i={},r=t.getBoundingClientRect();return o=e===window?{width:t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,left:0,top:0,right:t,bottom:n}:e.getBoundingClientRect(),["left","top"].forEach(function(t){i[t]=Math.min(0,r[t]-o[t])}),["right","bottom"].forEach(function(t){i[t]=Math.min(0,o[t]-r[t])}),s.util.forIn(i,function(t,e){i[e]=Math.abs(Math.round(t))}),i}},{OptionsView:s.mvc.View.extend({events:{"mouseover .select-box-option":"onOptionHover","click .select-box-option":"onOptionClick"},className:function(){var t=["select-box-options"],e=this.options.parentClassName;return e&&t.push(e),t.join(" ")},init:function(){s.util.bindAll(this,"onMouseout","onKeydown"),c(document).on({"keydown.selectBoxOptions":this.onKeydown,"mouseleave.selectBoxOptions mouseout.selectBoxOptions":this.onMouseout})},render:function(){var t=this.options.extraClassName;return t&&this.$el.addClass(t),this.options.width&&this.$el.css("width",this.options.width),s.util.toArray(this.options.options).forEach(function(t,e){e=this.renderOption(t,e);this.options.selectBoxView.selection===t&&e.addClass("selected hover"),this.$el.append(e)},this),this.$arrow=c("<div/>").addClass("select-box-options-arrow").appendTo(this.$el),this},renderOption:function(t,e){t=this.renderOptionContent(t);return t.addClass("select-box-option"),t.data("index",e),t},renderOptionContent:function(t){var e=c("<div/>",{class:"select-box-option-content",html:t.content});return t.icon&&e.prepend(c("<img/>",{class:"select-box-option-icon",src:t.icon})),e},select:function(t){this.trigger("option:select",t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})},hover:function(t){var e=this.options.options[t];this.markOptionHover(t),this.trigger("option:hover",e,t)},onOptionClick:function(t){t=this.getOptionIndex(t.target);this.select(t,{ui:!0})},onOptionHover:function(t){t=this.getOptionIndex(t.target);this.hover(t)},onMouseout:function(t){this.trigger("options:mouseout",t)},onKeydown:function(t){var e,n=this.options.selectBoxView;if(n.options.keyboardNavigation&&n.isOpen()){switch(t.which){case 39:case 40:e=1;break;case 38:case 37:e=-1;break;case 13:var o=this.getOptionHoverIndex();return void(0<=o&&this.select(o));case 27:return n.close();default:return}t.preventDefault();var t=this.getOptionHoverIndex()+e,i=this.options.options;(t=t<0?i.length-1:t)>=i.length&&(t=0),this.hover(t)}},onRemove:function(){c(document).off(".selectBoxOptions")},markOptionHover:function(t){this.$el.find(".hover").removeClass("hover"),c(this.$el.find(".select-box-option")[t]).addClass("hover")},getOptionHoverIndex:function(){return this.$el.find(".select-box-option.hover").index()},getOptionIndex:function(t){return c(t).closest(".select-box-option").data("index")}})});N.SelectBox=I}(this.joint.ui=this.joint.ui||{},$,joint);